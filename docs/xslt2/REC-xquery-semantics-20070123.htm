<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0056)http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/ -->
<?xml version="1.0" encoding="utf-8"?><HTML lang=EN xml:lang="EN" 
xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>XQuery 1.0 and XPath 2.0 Formal Semantics</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<META content="MSHTML 6.00.2900.3020" name=GENERATOR>
<STYLE type=text/css>CODE {
	FONT-FAMILY: monospace
}
DIV.constraint {
	MARGIN-LEFT: 2em
}
DIV.issue {
	MARGIN-LEFT: 2em
}
DIV.note {
	MARGIN-LEFT: 2em
}
DIV.notice {
	MARGIN-LEFT: 2em
}
DIV.issue P.title {
	MARGIN-LEFT: -2em
}
OL.enumar {
	LIST-STYLE-TYPE: decimal
}
OL.enumla {
	LIST-STYLE-TYPE: lower-alpha
}
OL.enumlr {
	LIST-STYLE-TYPE: lower-roman
}
OL.enumua {
	LIST-STYLE-TYPE: upper-alpha
}
OL.enumur {
	LIST-STYLE-TYPE: upper-roman
}
LI P {
	MARGIN-TOP: 0.3em; MARGIN-BOTTOM: 0.3em
}
SUP SMALL {
	COLOR: #8f8f8f; FONT-STYLE: italic
}
DIV.exampleInner PRE {
	MARGIN-TOP: 0em; MARGIN-BOTTOM: 0em; MARGIN-LEFT: 1em
}
DIV.exampleOuter {
	BORDER-RIGHT: gray 4px double; PADDING-RIGHT: 0em; BORDER-TOP: gray 4px double; PADDING-LEFT: 0em; PADDING-BOTTOM: 0em; MARGIN: 0em; BORDER-LEFT: gray 4px double; PADDING-TOP: 0em; BORDER-BOTTOM: gray 4px double
}
DIV.exampleInner {
	PADDING-RIGHT: 4px; BORDER-TOP: #d3d3d3 4px double; PADDING-LEFT: 4px; PADDING-BOTTOM: 4px; MARGIN: 0em; PADDING-TOP: 4px; BORDER-BOTTOM: #d3d3d3 4px double; BACKGROUND-COLOR: #d5dee3
}
DIV.exampleWrapper {
	MARGIN: 4px
}
DIV.exampleHeader {
	FONT-WEIGHT: bold; MARGIN: 4px
}
DIV.issue {
	MARGIN-BOTTOM: 20pt; BORDER-BOTTOM: black 1pt solid
}
TH.issue-toc-head {
	BORDER-BOTTOM: black 1pt solid
}
TABLE.small {
	FONT-SIZE: x-small
}
A.judgment:visited {
	COLOR: black; FONT-FAMILY: sans-serif; TEXT-DECORATION: none
}
A.judgment:link {
	COLOR: black; FONT-FAMILY: sans-serif; TEXT-DECORATION: none
}
A.processing:visited {
	COLOR: black; TEXT-DECORATION: none
}
A.processing:link {
	COLOR: black; TEXT-DECORATION: none
}
A.env:visited {
	COLOR: black; TEXT-DECORATION: none
}
A.env:link {
	COLOR: black; TEXT-DECORATION: none
}
</STYLE>
<LINK href="REC-xquery-semantics-20070123_files/W3C-REC.css" type=text/css 
rel=stylesheet></HEAD>
<BODY>
<DIV class=head>
<P><A href="http://www.w3.org/"><IMG height=48 alt=W3C 
src="REC-xquery-semantics-20070123_files/w3c_home.png" width=72></A></P>
<H1><A id=title name=title></A>XQuery 1.0 and XPath 2.0 Formal Semantics</H1>
<H2><A id=w3c-doctype name=w3c-doctype></A>W3C Recommendation 23 January 
2007</H2>
<DL>
  <DT>This version: 
  <DD><A 
  href="http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/">http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/</A> 

  <DT>Latest version: 
  <DD><A 
  href="http://www.w3.org/TR/xquery-semantics/">http://www.w3.org/TR/xquery-semantics/</A> 

  <DT>Previous version: 
  <DD><A 
  href="http://www.w3.org/TR/2006/PR-xquery-semantics-20061121/">http://www.w3.org/TR/2006/PR-xquery-semantics-20061121/</A> 

  <DT>Editors: 
  <DD>Denise Draper, Microsoft <A 
  href="mailto:denised@microsoft.com">mailto:denised@microsoft.com</A> 
  <DD>Peter Fankhauser (XML Query WG), Infonyte GmbH <A 
  href="mailto:fankhaus@infonyte.com">mailto:fankhaus@infonyte.com</A> 
  <DD>Mary Fernández (XML Query WG), AT&amp;T Labs - Research <A 
  href="mailto:mff@research.att.com">mailto:mff@research.att.com</A> 
  <DD>Ashok Malhotra (XML Query and XSL WGs), Oracle Corporation <A 
  href="mailto:ashok.malhotra@oracle.com">mailto:ashok.malhotra@oracle.com</A> 
  <DD>Kristoffer Rose (XSL WG), IBM T.J. Watson Research Center <A 
  href="mailto:krisrose@us.ibm.com">mailto:krisrose@us.ibm.com</A> 
  <DD>Michael Rys (XML Query WG), Microsoft <A 
  href="mailto:mrys@microsoft.com">mailto:mrys@microsoft.com</A> 
  <DD>Jérôme Siméon (XML Query WG), IBM T.J. Watson Research Center <A 
  href="mailto:simeon@us.ibm.com">mailto:simeon@us.ibm.com</A> 
  <DD>Philip Wadler (XML Query WG), University of Edinburgh <A 
  href="mailto:wadler@inf.ed.ac.uk">mailto:wadler@inf.ed.ac.uk</A> </DD></DL>
<P>Please refer to the <A 
href="http://www.w3.org/XML/2007/qt-errata/xquery-semantics-errata.html"><STRONG>errata</STRONG></A> 
for this document, which may include some normative corrections.</P>
<P>See also <A 
href="http://www.w3.org/2003/03/Translations/byTechnology?technology=xquery-semantics"><STRONG>translations</STRONG></A>.</P>
<P>This document is also available in these non-normative formats: <A 
href="http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/xquery-semantics.xml">XML</A> 
and&nbsp;<A 
href="http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/diff-from-20061121.html">Recent 
revisions</A>.</P>
<P class=copyright><A 
href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</A>&nbsp;©&nbsp;2007&nbsp;<A 
href="http://www.w3.org/"> <ACRONYM 
title="World Wide Web Consortium">W3C</ACRONYM></A><SUP>®</SUP> (<A 
href="http://www.csail.mit.edu/"><ACRONYM 
title="Massachusetts Institute of Technology">MIT</ACRONYM></A>, <A 
href="http://www.ercim.org/"><ACRONYM 
title="European Research Consortium for Informatics and Mathematics">ERCIM</ACRONYM></A>, 
<A href="http://www.keio.ac.jp/">Keio</A>), All Rights Reserved. W3C <A 
href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</A>, 
<A 
href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</A> 
and <A href="http://www.w3.org/Consortium/Legal/copyright-documents">document 
use</A> rules apply.</P></DIV>
<HR>

<DIV>
<H2><A id=abstract name=abstract></A>Abstract</H2>
<P>This document defines formally the semantics of <SPAN class=xquery>XQuery 1.0 
<A 
href="http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/#xquery">[XQuery 
1.0: An XML Query Language]</A></SPAN> <SPAN class=shared>and</SPAN> <SPAN 
class=xpath>XPath 2.0 <A 
href="http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/#xpath20">[XML 
Path Language (XPath) 2.0]</A></SPAN>.</P></DIV>
<DIV>
<H2><A id=status name=status></A>Status of this Document</H2>
<P><EM>This section describes the status of this document at the time of its 
publication. Other documents may supersede this document. A list of current W3C 
publications and the latest revision of this technical report can be found in 
the <A href="http://www.w3.org/TR/">W3C technical reports index</A> at 
http://www.w3.org/TR/.</EM></P>
<P>This is one document in a set of eight documents that have progressed to 
Recommendation together (XQuery 1.0, XQueryX 1.0, XSLT 2.0, Data Model, 
Functions and Operators, Formal Semantics, Serialization, XPath 2.0).</P>
<P>This is a <A 
href="http://www.w3.org/2004/02/Process-20040205/tr.html#RecsW3C">Recommendation</A> 
of the W3C. It has been jointly developed by the W3C <A 
href="http://www.w3.org/XML/Query">XML Query Working Group</A> and the W3C <A 
href="http://www.w3.org/Style/XSL">XSL Working Group</A>, each of which is part 
of the <A href="http://www.w3.org/XML/Activity">XML Activity</A>.</P>
<P>This document has been reviewed by W3C Members, by software developers, and 
by other W3C groups and interested parties, and is endorsed by the Director as a 
W3C Recommendation. It is a stable document and may be used as reference 
material or cited from another document. W3C's role in making the Recommendation 
is to draw attention to the specification and to promote its widespread 
deployment. This enhances the functionality and interoperability of the Web.</P>
<P>No substantive changes have been made to this specification since its 
publication as a Proposed Recommendation.</P>
<P>Please report errors in this document using W3C's <A 
href="http://www.w3.org/Bugs/Public/">public Bugzilla system</A> (instructions 
can be found at <A 
href="http://www.w3.org/XML/2005/04/qt-bugzilla">http://www.w3.org/XML/2005/04/qt-bugzilla</A>). 
If access to that system is not feasible, you may send your comments to the W3C 
XSLT/XPath/XQuery public comments mailing list, <A 
href="mailto:public-qt-comments@w3.org">public-qt-comments@w3.org</A>. It will 
be very helpful if you include the string “[FS]” in the subject line of your 
report, whether made in Bugzilla or in email. Each Bugzilla entry and email 
message should contain only one error report. Archives of the comments and 
responses are available at <A 
href="http://lists.w3.org/Archives/Public/public-qt-comments/">http://lists.w3.org/Archives/Public/public-qt-comments/</A>.</P>
<P>This document was produced by groups operating under the <A 
href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C 
Patent Policy</A>. W3C maintains a <A 
href="http://www.w3.org/2004/01/pp-impl/18797/status#disclosures">public list of 
any patent disclosures</A> made in connection with the deliverables of the XML 
Query Working Group and also maintains a <A 
href="http://www.w3.org/2004/01/pp-impl/19552/status#disclosures">public list of 
any patent disclosures</A> made in connection with the deliverables of the XSL 
Working Group; those pages also include instructions for disclosing a patent. An 
individual who has actual knowledge of a patent which the individual believes 
contains <A 
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential 
Claim(s)</A> must disclose the information in accordance with <A 
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 
6 of the W3C Patent Policy</A>.</P></DIV>
<DIV class=toc>
<H2><A id=contents name=contents></A>Table of Contents</H2>
<P class=toc>1 <A 
href="REC-xquery-semantics-20070123.htm#introduction">Introduction</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;1.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-normativity">Normative 
and Informative Sections</A><BR>2 <A 
href="REC-xquery-semantics-20070123.htm#sec_preliminaries">Preliminaries</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;2.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_intro">Introduction 
to the Formal 
Semantics</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.1.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_grammar_notations">Notations 
from grammar 
productions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.1.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_judgments">Notations 
for judgments</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.1.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_environments">Notations 
for environments</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.1.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_inference">Notations 
for inference rules</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.1.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_together">Putting 
it together</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;2.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_namespaces">URIs, 
Namespaces, and Prefixes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;2.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_values">XML 
Values</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.3.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_data_model_overview">Formal 
values</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.3.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_example_values">Examples 
of values</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;2.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_types">The 
[XPath/XQuery] Type 
System</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.4.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_schema">XML 
Schema and the [XPath/XQuery] Type 
System</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.4.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_item_types">Item 
types</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.4.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_content_models">Content 
models</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.4.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions">Top 
level definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.4.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_types_example">Example 
of a complete Schema</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;2.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_fando">Functions 
and operators</A><BR>3 <A 
href="REC-xquery-semantics-20070123.htm#id-basics">Basics</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_context">Expression 
Context</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.1 <A 
href="REC-xquery-semantics-20070123.htm#static_context">Static 
Context</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames">Resolving 
QNames to Expanded 
QNames</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.2 <A 
href="REC-xquery-semantics-20070123.htm#eval_context">Dynamic 
Context</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.2 <A 
href="REC-xquery-semantics-20070123.htm#id-processing-model">Processing 
Model</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.1 <A 
href="REC-xquery-semantics-20070123.htm#id-fs-processing-model">Processing 
model</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_normalization">Normalization 
mapping rules</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_static">Static 
typing judgment</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_evaluation">Dynamic 
evaluation judgment</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_errors">Error 
Handling</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.4 <A 
href="REC-xquery-semantics-20070123.htm#id-important-concepts">Concepts</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.4.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-doc-order">Document 
Order</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.4.2 <A 
href="REC-xquery-semantics-20070123.htm#id-atomization">Atomization</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.4.3 
<A 
href="REC-xquery-semantics-20070123.htm#id-ebv">Effective 
Boolean Value</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.4.4 <A 
href="REC-xquery-semantics-20070123.htm#id-input-sources">Input 
Sources</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.4.5 <A 
href="REC-xquery-semantics-20070123.htm#id-uri-literals">URI 
Literals</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.5 <A 
href="REC-xquery-semantics-20070123.htm#id-type-conversion">Types</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-predefined-types">Predefined 
Schema Types</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5.2 <A 
href="REC-xquery-semantics-20070123.htm#id-typed-value">Typed 
Value and String 
Value</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5.3 <A 
href="REC-xquery-semantics-20070123.htm#id-sequencetype">SequenceType 
Syntax</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5.4 <A 
href="REC-xquery-semantics-20070123.htm#id-sequencetype-matching">SequenceType 
Matching</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.6 <A 
href="REC-xquery-semantics-20070123.htm#comments">Comments</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;3.7 
<A 
href="REC-xquery-semantics-20070123.htm#xml-terminals">XML-defined 
Terminals</A><BR>4 <A 
href="REC-xquery-semantics-20070123.htm#id-expressions">Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-primary-expressions">Primary 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.1.1 <A 
href="REC-xquery-semantics-20070123.htm#id-literals">Literals</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#id-variables">Variable 
References</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.1.3 <A 
href="REC-xquery-semantics-20070123.htm#id-paren-expressions">Parenthesized 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.1.4 <A 
href="REC-xquery-semantics-20070123.htm#id-context-item-expression">Context 
Item Expression</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.1.5 <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls">Function 
Calls</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.2 <A 
href="REC-xquery-semantics-20070123.htm#id-path-expressions">Path 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.1 <A 
href="REC-xquery-semantics-20070123.htm#id-axis-steps">Steps</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_axes">Axes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#node-tests">Node 
Tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.2 <A 
href="REC-xquery-semantics-20070123.htm#id-predicates">Predicates</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.3 
<A 
href="REC-xquery-semantics-20070123.htm#unabbrev">Unabbreviated 
Syntax</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.4 <A 
href="REC-xquery-semantics-20070123.htm#abbrev">Abbreviated 
Syntax</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.3 <A 
href="REC-xquery-semantics-20070123.htm#id-sequence-expressions">Sequence 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_constructing_sequences">Constructing 
Sequences</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_filter_exprs">Filter 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_combining_sequences">Combining 
Node Sequences</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_arithmetic">Arithmetic 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_comparisons">Comparison 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.5.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_value_comparisons">Value 
Comparisons</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.5.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_general_comparisons">General 
Comparisons</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.5.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_node-comparisons">Node 
Comparisons</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.6 <A 
href="REC-xquery-semantics-20070123.htm#id-logical-expressions">Logical 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.7 <A 
href="REC-xquery-semantics-20070123.htm#sec_constructors">Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.1 
<A 
href="REC-xquery-semantics-20070123.htm#id_element_constructor">Direct 
Element 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_direct_attributes">Attributes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_namespace_attrs">Namespace 
Declaration 
Attributes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.1.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_content">Content</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.1.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_whitespace">Boundary 
Whitespace</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_other_constructors">Other 
Direct Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_computedConstructors">Computed 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_comp_elem_constructor">Computed 
Element 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_attribute_constructor">Computed 
Attribute 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_documentConstructors">Document 
Node 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_textConstructors">Text 
Node 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_computed-pis">Computed 
Processing Instruction 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.3.6 
<A 
href="REC-xquery-semantics-20070123.htm#sec_computed-comments">Computed 
Comment 
Constructors</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.7.4 <A 
href="REC-xquery-semantics-20070123.htm#id-ns-nodes-on-elements">In-scope 
Namespaces of a Constructed Element</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.8 <A 
href="REC-xquery-semantics-20070123.htm#sec_for-expressions">[For/FLWOR] 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.8.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_flwor-expressions">FLWOR 
expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.8.2 <A 
href="REC-xquery-semantics-20070123.htm#id-for-expression">For 
expression</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.8.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_lets">Let 
Expression</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.8.4 <A 
href="REC-xquery-semantics-20070123.htm#id_orderby_clause">Order 
By and Return Clauses</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.9 <A 
href="REC-xquery-semantics-20070123.htm#sec_unordered-expressions">Ordered 
and Unordered Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.10 <A 
href="REC-xquery-semantics-20070123.htm#sec_conditionals">Conditional 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.11 <A 
href="REC-xquery-semantics-20070123.htm#id-quantified-expressions">Quantified 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.12 <A 
href="REC-xquery-semantics-20070123.htm#sec_sequencetype-matching">Expressions 
on SequenceTypes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_instance-of">Instance 
Of</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_typeswitch">Typeswitch</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_cast">Cast</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_castable">Castable</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_constructor-functions">Constructor 
Functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.12.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_treat">Treat</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.13 
<A 
href="REC-xquery-semantics-20070123.htm#sec_validate_expr">Validate 
Expressions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.13.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_validating_element">Validating 
an Element Node</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.13.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_validating_document">Validating 
a Document Node</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;4.14 <A 
href="REC-xquery-semantics-20070123.htm#id-extension-expressions">Extension 
Expressions</A><BR>5 <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog">Modules 
and Prologs</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_version-declaration">Version 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.2 <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration">Module 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_boundary-space-decls">Boundary-space 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_default-collation-declaration">Default 
Collation Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_base-uri-decl">Base 
URI Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_validation_decl">Construction 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.7 <A 
href="REC-xquery-semantics-20070123.htm#id-default-ordering-decl">Ordering 
Mode Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.8 <A 
href="REC-xquery-semantics-20070123.htm#id-empty-order-decl">Empty 
Order Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.9 <A 
href="REC-xquery-semantics-20070123.htm#id-copy-namespaces-decl">Copy-Namespaces 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.10 <A 
href="REC-xquery-semantics-20070123.htm#sec_schema_imports">Schema 
Import</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.11 <A 
href="REC-xquery-semantics-20070123.htm#id-module-imports">Module 
Import</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.12 <A 
href="REC-xquery-semantics-20070123.htm#sec_namespace_decls">Namespace 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.13 <A 
href="REC-xquery-semantics-20070123.htm#sec_default_namespace_decls">Default 
Namespace Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.14 <A 
href="REC-xquery-semantics-20070123.htm#sec_variable-declarations">Variable 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.15 <A 
href="REC-xquery-semantics-20070123.htm#sec_FunctionDeclns">Function 
Declaration</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;5.16 <A 
href="REC-xquery-semantics-20070123.htm#id-option-declaration">Option 
Declaration</A><BR>6 <A 
href="REC-xquery-semantics-20070123.htm#id-xquery-conformance">Conformance</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;6.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-static-typing-feature">Static 
Typing Feature</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.1.1 <A 
href="REC-xquery-semantics-20070123.htm#id-static-extensions">Static 
Typing Extensions</A><BR>7 <A 
href="REC-xquery-semantics-20070123.htm#sec_special_functions">Additional 
Semantics of Functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;7.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_special_fs_functions">Formal 
Semantics Functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand">The 
fs:convert-operand 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand">The 
fs:convert-simple-operand 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder">The 
fs:distinct-doc-order 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence">The 
fs:distinct-doc-order-or-atomic-sequence 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes">The 
fs:item-sequence-to-node-sequence 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes_doc">The 
fs:item-sequence-to-node-sequence-doc 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.7 <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic">The 
fs:item-sequence-to-untypedAtomic 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.8 <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI">The 
fs:item-sequence-to-untypedAtomic-PI 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.9 <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_text">The 
fs:item-sequence-to-untypedAtomic-text 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.10 <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_comment">The 
fs:item-sequence-to-untypedAtomic-comment 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.11 <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode">The 
fs:apply-ordering-mode 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1.12 <A 
href="REC-xquery-semantics-20070123.htm#sec_fs_to">The 
fs:to function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;7.2 <A 
href="REC-xquery-semantics-20070123.htm#function_rules">Standard 
functions with specific static typing 
rules</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_last">The 
fn:last context 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_position">The 
fn:position context 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_abs_ceil_floor_round">The 
fn:abs, fn:ceiling, fn:floor, fn:round, and fn:round-half-to-even 
functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_boolean">The 
fn:boolean function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_fn_doc_collection">The 
fn:collection and fn:doc 
functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_data">The 
fn:data function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.7 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_distinct_node_vals">The 
fn:distinct-values 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.8 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_unordered">The 
fn:unordered 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.9 <A 
href="REC-xquery-semantics-20070123.htm#sec_fnerror">The 
fn:error function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.10 
<A 
href="REC-xquery-semantics-20070123.htm#sec_fn_aggregates">The 
fn:min, fn:max, fn:avg, and fn:sum 
functions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.11 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_remove">The 
fn:remove function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.12 
<A 
href="REC-xquery-semantics-20070123.htm#sec_fn_reverse">The 
fn:reverse 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.13 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_subsequence">The 
fn:subsequence 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.14 <A 
href="REC-xquery-semantics-20070123.htm#sec_op_union_intersect_except">The 
op:union, op:intersect, and op:except 
operators</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.15 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_insert_before">The 
fn:insert-before 
function</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.2.16 <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_cardinality_funcs">The 
fn:zero-or-one, fn:one-or-more, and fn:exactly-one functions</A><BR>8 <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_judgments">Auxiliary 
Judgments</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_accessing_types">Judgments 
for accessing types</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#jd_aux_derives_from">Derives 
from</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_substitutes">Substitutes 
for</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_element_lookup">Element 
and attribute name lookup 
(Dynamic)</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.4 <A 
href="REC-xquery-semantics-20070123.htm#jd_aux_static_lookup">Element 
and attribute type lookup 
(Static)</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_extension">Extension</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.6 
<A 
href="REC-xquery-semantics-20070123.htm#sec_mixed">Mixed 
content</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.7 <A 
href="REC-xquery-semantics-20070123.htm#sec_adjustment">Type 
adjustment</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.8 <A 
href="REC-xquery-semantics-20070123.htm#sec_built_in_attributes">Builtin 
attributes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.9 <A 
href="REC-xquery-semantics-20070123.htm#sec_type_expansion">Type 
expansion</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.1.10 <A 
href="REC-xquery-semantics-20070123.htm#sec_union_interpretation">Union 
interpretation of derived types</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_xpath">Judgments 
for step expressions and 
filtering</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_jd_principal">Principal 
Node Kind</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_axis_judge">Auxiliary 
judgments for 
axes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_static_axis_judge">Static 
semantics of 
axes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_axis">Inference 
rules for all 
axes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_self">Inference 
rules for the self 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_child">Inference 
rules for the child 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_attribute">Inference 
rules for the attribute 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_parent">Inference 
rules for the parent 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.6 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_namespace">Inference 
rules for the namespace 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.7 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_descendant">Inference 
rules for the descendant 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.8 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_descendant_of_self">Inference 
rules for the descendant-or-self 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.9 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_ancestor">Inference 
rules for the ancestor 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.1.10 
<A 
href="REC-xquery-semantics-20070123.htm#sec_inference_ancestor_of_self">Inference 
rules for the ancestor-or-self 
axis</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.2.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_dyn_axes">Dynamic 
semantics of axes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_test_judge">Auxiliary 
judgments for node 
tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_sem_node_tests">Static 
semantics of node 
tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_sem_name_tests">Name 
Tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_sem_kind_tests">Kind 
Tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_dyn_node_tests">Dynamic 
semantics of node 
tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.2.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_dyn_sem_name_tests">Name 
Tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.2.3.2.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_dyn_kind_tests">Kind 
Tests</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_type_matching">Judgments 
for type matching</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.3.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_matches">Matches</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.3.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_subtyping">Subtyping 
(&lt;:)</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_factor">Judgments 
for FLWOR and other expressions on sequences</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_promotion_judgments">Judgments 
for function calls</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.5.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_promotion">Type 
promotion</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;8.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_validation_mode">Judgments 
for validation modes and 
contexts</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.6.1 <A 
href="REC-xquery-semantics-20070123.htm#jd_aux_context_is">Elements 
in validation mode</A><BR></P>
<H3><A id=appendices name=appendices></A>Appendices</H3>
<P class=toc>A <A 
href="REC-xquery-semantics-20070123.htm#sec_core">Normalized 
core and formal grammars</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;A.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_core_grammar">Core 
BNF</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;A.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_formal_grammar">Formal 
BNF</A><BR>B <A 
href="REC-xquery-semantics-20070123.htm#sec_indexes">Index 
of judgments</A><BR>C <A 
href="REC-xquery-semantics-20070123.htm#sec_functions_and_operators">Functions 
and Operators</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;C.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_used_functions">Functions 
and Operators used in the Formal Semantics</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;C.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_operators">Mapping 
of Overloaded Internal Functions</A><BR>D <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema">Importing 
Schemas</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_intro">Introduction</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_features">Features</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_organization">Organization</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_mapping">Main 
mapping rules</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_use">Special 
attributes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_attributes">use, 
default, and 
fixed</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4.2 
<A 
href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes">minOccurs, 
maxOccurs, minLength, maxLength, and 
length</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_mixed">mixed</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_nillable">nillable</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.4.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_substitution">substitutionGroup</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.1.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_anonymous">Anonymous 
type names</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_schema_as_a_whole">Schemas 
as a whole</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.2.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_whole">Schema</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.2.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_include">Include</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.2.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_redefine">Redefine</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.2.4 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_import">Import</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_attribute_decl">Attribute 
Declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.3.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_global_attributes">Global 
attributes 
declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.3.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_local_attributes">Local 
attribute declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_element">Element 
Declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.4.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_global_element">Global 
element 
declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.4.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_local_element">Local 
element declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.5 <A 
href="REC-xquery-semantics-20070123.htm#sec_complex_type">Complex 
Type Definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.5.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_global_complex_type">Global 
complex type</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.5.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_local_complex_type">Local 
complex type</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.5.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_ct_simple">Complex 
type with simple 
content</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.5.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_ct_complex">Complex 
type with complex content</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.6 <A 
href="REC-xquery-semantics-20070123.htm#sec_attribute_use">Attribute 
Uses</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.7 <A 
href="REC-xquery-semantics-20070123.htm#sec_attribute_group">Attribute 
Group Definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.7.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_attribute_group_def">Attribute 
group definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.7.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_attribute_group_ref">Attribute 
group reference</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.8 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_model">Model 
Group Definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.9 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_model_groups">Model 
Groups</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.9.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_all_groups">All 
groups</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.9.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_choice_groups">Choice 
groups</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.9.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_sequence_groups">Sequence 
groups</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.10 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_particles">Particles</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.10.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_element_ref">Element 
reference</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.10.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_group_ref">Group 
reference</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.11 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_wildcards">Wildcards</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.11.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_attribute_wildcards">Attribute 
wildcards</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.11.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_element_wildcards">Element 
wildcards</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.12 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_identity">Identity-constraint 
Definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.13 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_notation">Notation 
Declarations</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.14 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_annotation">Annotation</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;D.15 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_simple_type">Simple 
Type Definitions</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.15.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_import_global_simple_type">Global 
simple type 
definition</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.15.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_local_simple_type">Local 
simple type 
definition</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.15.3 <A 
href="REC-xquery-semantics-20070123.htm#sec_import_simple_type_content">Simple 
type content</A><BR>E <A 
href="REC-xquery-semantics-20070123.htm#appendix_references">References</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;E.1 
<A 
href="REC-xquery-semantics-20070123.htm#id-normative-references">Normative 
References</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;E.2 <A 
href="REC-xquery-semantics-20070123.htm#id-non-normative-references">Non-normative 
References</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;E.3 <A 
href="REC-xquery-semantics-20070123.htm#id-background-references">Background 
References</A><BR>F <A 
href="REC-xquery-semantics-20070123.htm#sec_validation_judgments">Auxiliary 
Judgments for Validation</A> (Non-Normative)<BR>&nbsp;&nbsp;&nbsp;&nbsp;F.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_validate">Judgments 
for the validate 
expression</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.1 <A 
href="REC-xquery-semantics-20070123.htm#sec_type_resolution">Type 
resolution</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.2 <A 
href="REC-xquery-semantics-20070123.htm#sec_interleaving">Interleaving</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_jd_filter">Attribute 
filtering</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.4 <A 
href="REC-xquery-semantics-20070123.htm#sec_erasure">Erasure</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.4.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_simply_erases">Simply 
erases</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.4.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_erases">Erases</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.5 
<A 
href="REC-xquery-semantics-20070123.htm#sec_jd_annotate">Annotate</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.5.1 
<A 
href="REC-xquery-semantics-20070123.htm#sec_simply_annotate">Simply 
annotate</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.5.2 
<A 
href="REC-xquery-semantics-20070123.htm#sec_nil_annotate">Nil-annotate</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.1.5.3 
<A 
href="REC-xquery-semantics-20070123.htm#sec_annotate">Annotate</A><BR>G 
<A 
href="REC-xquery-semantics-20070123.htm#id-fs-revisions-log">Revision 
Log</A> (Non-Normative)<BR></P></DIV>
<HR>

<DIV class=body>
<DIV class=div1>
<H2><A id=introduction name=introduction></A>1 Introduction</H2>
<P>This document defines the formal semantics of XQuery 1.0 and XPath 2.0. The 
present document is part of a set of documents that together define the XQuery 
1.0 and XPath 2.0 languages:</P>
<UL>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
  1.0: An XML Query Language]</A> introduces the XQuery 1.0 language, defines 
  its capabilities from a user-centric view, and defines the language 
syntax.</P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
  Path Language (XPath) 2.0]</A> introduces the XPath 2.0 language, defines its 
  capabilities from a user-centric view, and defines the language syntax.</P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
  and Operators]</A> lists the functions and operators defined for the 
  [XPath/XQuery] language and specifies the required types of their parameters 
  and return value.</P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A> formally specifies the data model used by [XPath/XQuery] to 
  represent the content of XML documents. The [XPath/XQuery] language is 
  formally defined by operations on this data model.</P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A> specifies how [XPath/XQuery] data model values are 
  serialized into XML.</P></LI></UL>
<P>The scope and goals for the [XPath/XQuery] language are discussed in the 
charter of the W3C [XSL/XML Query] Working Group and in the [XPath/XQuery] 
requirements <A 
href="REC-xquery-semantics-20070123.htm#xquery-requirements">[XML 
Query 1.0 Requirements]</A>.</P>
<P>This document defines the semantics of [XPath/XQuery] by giving a precise 
formal meaning to each of the expressions of the [XPath/XQuery] specification in 
terms of the [XPath/XQuery] data model. This document assumes that the reader is 
already familiar with the [XPath/XQuery] language. This document defines the 
formal semantics for XPath 2.0 only when the XPath 1.0 backward compatibility 
rules are not in effect.</P>
<P>Two important design aspects of [XPath/XQuery] are that it is 
<EM>functional</EM> and that it is <EM>typed</EM>. These two aspects play an 
important role in the [XPath/XQuery] Formal Semantics.</P>
<P><B>[XPath/XQuery] is a functional language</B>. [XPath/XQuery] is built from 
expressions, rather than statements. Every construct in the language (except for 
the XQuery query prolog) is an expression and expressions can be composed 
arbitrarily. The result of one expression can be used as the input to any other 
expression, as long as the type of the result of the former expression is 
compatible with the input type of the latter expression with which it is 
composed. Another characteristic of a functional language is that variables are 
always passed by value, and a variable's value cannot be modified through side 
effects.</P>
<P><B>[XPath/XQuery] is a typed language</B>. Types can be imported from one or 
more XML Schemas that describe the input documents and the output document, and 
the [XPath/XQuery] language can then perform operations based on these types. In 
addition, [XPath/XQuery] supports <EM>static type analysis</EM>. Static type 
analysis infers the output type of an expression based on the type of its input 
expressions. In addition to inferring the type of an expression for the user, 
static typing allows early detection of type errors, and can be used as the 
basis for certain classes of optimization. The [XPath/XQuery] type system 
captures most of the features of <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A>, including global and local element and attribute declarations, 
complex and simple type definitions, named and anonymous types, derivation by 
restriction, extension, list and union, substitution groups, and wildcard types. 
It does not model uniqueness constraints and facet constraints on simple 
types.</P>
<P>This document is organized as follows. <A 
href="REC-xquery-semantics-20070123.htm#sec_preliminaries"><B>[2 
Preliminaries]</B></A> introduces the notations used to define the 
[XPath/XQuery] Formal Semantics. These include the formal notations for values 
in the [XPath/XQuery] data model and for types in XML Schema. The next three 
sections: <A 
href="REC-xquery-semantics-20070123.htm#id-basics"><B>[3 
Basics]</B></A>, <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A>, and <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A> have the same structure as the corresponding 
sections in the <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> and <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A> documents. This allows the reader to quickly find 
the formal definition of a particular language construct. <A 
href="REC-xquery-semantics-20070123.htm#id-basics"><B>[3 
Basics]</B></A> defines the semantics for basic [XPath/XQuery] concepts, and <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A> defines the dynamic and static semantics of each 
[XPath/XQuery] expression. <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A> defines the semantics of the [XPath/XQuery] prolog. 
<A 
href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
Additional Semantics of Functions]</B></A> defines the static semantics of 
several functions in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> and gives the dynamic and static semantics of several 
supporting functions used in this document. The remaining sections, <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_judgments"><B>[8 
Auxiliary Judgments]</B></A> and <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A>, contain material that supports the formal semantics 
of [XPath/XQuery]. <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_judgments"><B>[8 
Auxiliary Judgments]</B></A> defines formal judgments that relate data model 
values to types, that relate types to types, and that support the formal 
definition of validation. These judgments are used in the definition of 
expressions in <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A>. Lastly, <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A>, specifies how XML Schema documents are imported into 
the [XPath/XQuery] type system and relates XML Schema types to the 
[XPath/XQuery] type system.</P>
<DIV class=div2>
<H3><A id=id-normativity name=id-normativity></A>1.1 Normative and Informative 
Sections</H3>
<P>Certain aspects of language processing are described in this specification as 
<B>implementation-defined</B> or <B>implementation-dependent</B>.</P>
<UL>
  <LI>
  <P>[<A id=dt-implementation-defined title="implementation defined" 
  name=dt-implementation-defined>Definition</A>: <B>Implementation-defined</B> 
  indicates an aspect that may differ between implementations, but must be 
  specified by the implementor for each particular implementation.]</P>
  <LI>
  <P>[<A id=dt-implementation-dependent title="implementation dependent" 
  name=dt-implementation-dependent>Definition</A>: 
  <B>Implementation-dependent</B> indicates an aspect that may differ between 
  implementations, is not specified by this or any W3C specification, and is not 
  required to be specified by the implementor for any particular 
  implementation.]</P></LI></UL>
<P class=xpath>A language aspect described in this specification as 
<B>implementation-defined</B> or <B>implementation dependent</B> may be further 
constrained by the specifications of a host language in which XPath or XQuery is 
embedded.</P>
<P>This document contains the normative static semantics of [XPath/XQuery]. The 
static semantics rules in <A 
href="REC-xquery-semantics-20070123.htm#id-basics"><B>[3 
Basics]</B></A>, <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A>, <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A>, and <A 
href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
Additional Semantics of Functions]</B></A> are normative. <A 
href="REC-xquery-semantics-20070123.htm#static_context"><B>[3.1.1 
Static Context]</B></A> is normative, because it defines the static context used 
in the static typing rules. <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_judgments"><B>[8 
Auxiliary Judgments]</B></A> is normative, because it contains all the judgments 
necessary for defining SequenceType Matching.</P>
<P>The dynamic semantics of [XPath/XQuery] are normatively defined in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> and <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>. In this document, the dynamic semantic rules in 
<A 
href="REC-xquery-semantics-20070123.htm#id-basics"><B>[3 
Basics]</B></A>, <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A>, and <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A>, the examples, and the material labeled as "Note" 
are provided for explanatory purposes and are not normative.</P>
<P>The mapping rules from XML Schema to the XQuery type system provided in <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A>, and the formal semantics of XML Schema validation in 
<A 
href="REC-xquery-semantics-20070123.htm#sec_validation_judgments"><B>[F 
Auxiliary Judgments for Validation]</B></A> are informative and do not handle 
every feature of XML Schema.</P></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_preliminaries name=sec_preliminaries></A>2 Preliminaries</H2>
<P>This section provides the background necessary to understand the Formal 
Semantics, introduces the notations that are used, and explains its relationship 
to other documents.</P>
<DIV class=div2>
<H3><A id=sec_intro name=sec_intro></A>2.1 Introduction to the Formal 
Semantics</H3>
<P><B>Why a Formal Semantics?</B> The goal of the formal semantics is to 
complement the [XPath/XQuery] specification (<A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> and <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>), by defining the meaning of [XPath/XQuery] 
expressions with mathematical rigor.</P>
<P>A rigorous formal semantics clarifies the intended meaning of the English 
specification, ensures that no corner cases are left out, and provides a 
reference for implementation.</P>
<P><B>Why use formal notations?</B> Rigor is achieved by the use of formal 
notations to represent [XPath/XQuery] objects such as expressions, XML values, 
and XML Schema types, and by the systematic definition of the relationships 
between those objects to reflect the meaning of the language. In particular, the 
dynamic semantics relates [XPath/XQuery] expressions to the XML value to which 
they evaluate, and the static semantics relates [XPath/XQuery] expressions to 
the XML Schema type that is inferred for that expression.</P>
<P>The Formal Semantics uses several kinds of formal notations to define the 
relationships between [XPath/XQuery] expressions, XML values, and XML Schema 
types. This section introduces the notations for judgments, inference rules, and 
mapping rules as well as the notation for environments, which implement the 
dynamic and static contexts. The reader already familiar with these notations 
can skip this section and continue with <A 
href="REC-xquery-semantics-20070123.htm#sec_values"><B>[2.3 
XML Values]</B></A>.</P>
<DIV class=div3>
<H4><A id=sec_grammar_notations name=sec_grammar_notations></A>2.1.1 Notations 
from grammar productions</H4>
<P>Grammar productions are used to describe "objects" (values, types, 
[XPath/XQuery] expressions, etc.) manipulated by the Formal Semantics. The 
Formal Semantics makes use of several kinds of grammar productions: productions 
from the [XPath/XQuery] grammar itself, productions for a subset of the 
[XPath/XQuery] language called the XQuery Core which is used throughout this 
document, and other productions used for formal specification only such as for 
the XQuery type system.</P>
<P>XQuery grammar productions describe the XQuery language and expressions. 
XQuery productions are identified by a number, which corresponds to their number 
in the <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> document, and are marked with "(XQuery)". For 
instance, the following production describes FLWOR expressions in XQuery.</P>
<H5><A id=N102B3 name=N102B3></A>[For/FLWOR] Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N103F0.doc-xquery-FLWORExpr 
      name=noid_N103F0.doc-xquery-FLWORExpr></A>[<SMALL>33&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-FLWORExpr">FLWORExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-LetClause">LetClause</A>)+ 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-WhereClause">WhereClause</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderByClause">OrderByClause</A>? 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P>For the purpose of this document, the differences between the XQuery 1.0 and 
the XPath 2.0 grammars are mostly irrelevant. By default, this document uses 
XQuery 1.0 grammar productions. Whenever the grammar for XPath 2.0 differs from 
the one for XQuery 1.0, the corresponding XPath 2.0 productions are also given. 
XPath productions are identified by a number, which corresponds to their number 
in <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>, and are marked with "(XPath)". For instance, the 
following production describes for expressions in XPath.</P>
<H5><A id=N102E3 name=N102E3></A>[For/FLWOR] Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N10407.doc-xpath-ForExpr 
      name=noid_N10407.doc-xpath-ForExpr></A>[<SMALL>4&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-ForExpr">ForExpr</A><SUP><SMALL> 
      XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xpath-SimpleForClause">SimpleForClause</A> 
      "return" ExprSingle</CODE></TD></TR></TBODY></TABLE>
<P>XQuery Core grammar productions describe the XQuery Core. The Core grammar is 
given in <A 
href="REC-xquery-semantics-20070123.htm#sec_core"><B>[A 
Normalized core and formal grammars]</B></A>. Core productions are identified by 
a number, which corresponds to their number in <A 
href="REC-xquery-semantics-20070123.htm#sec_core"><B>[A 
Normalized core and formal grammars]</B></A>, and are marked with "(Core)". For 
instance, the following production describes the simpler form of the "FLWOR" 
expression in the XQuery Core.</P>
<H5><A id=N10306 name=N10306></A>Core FLWOR Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N10422.doc-core-FLWORExpr 
      name=noid_N10422.doc-core-FLWORExpr></A>[<SMALL>24&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FLWORExpr">FLWORExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-LetClause">LetClause</A>) 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P>The Formal Semantics manipulates "objects" (values, types, expressions, etc.) 
for which there is no existing grammar production in the <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> document. In these cases, specific grammar 
productions are introduced. Notably, additional productions are used to describe 
values in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A>, and to describe the [XPath/XQuery] type system. Formal Semantics 
productions are identified by a number, and are marked by "(Formal)". For 
instance, the following production describes global type definitions in the 
[XPath/XQuery] type system.</P>
<H5><A id=N10330 name=N10330></A>Type Definitions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N10443.doc-fs-Definition 
      name=noid_N10443.doc-fs-Definition></A>[<SMALL>39&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Definition</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("define" "element" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName">ElementName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution">OptSubstitution</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable">OptNillable</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "attribute" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName">AttributeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "type" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation">TypeDerivation</A>)</CODE></TD></TR></TBODY></TABLE>
<P>Note that grammar productions that are specific to the Formal Semantics 
(i.e., marked with "(Formal)") are not part of [XPath/XQuery]. They are not 
accessible to the user and are only used in the course of defining the 
languages' semantics.</P>
<P>Grammar non-terminals are used extensively in this document to represent 
objects in judgments (see the next section). As a convenience, non-terminals 
used in judgments link to the appropriate grammar production.</P></DIV>
<DIV class=div3>
<H4><A id=sec_judgments name=sec_judgments></A>2.1.2 Notations for 
judgments</H4>
<P>The basic building block of the formal specification is called a 
<EM>judgment</EM>. A judgment expresses whether a property holds or not.</P>
<P>For example:</P>
<P><B>Notation</B></P>
<P>The judgment</P>
<DIV align=center><EM>Object</EM> <B>is a positive integer</B></DIV>
<P>holds if the object <EM>Object</EM> is a positive integer.</P>
<P>A judgment may hold (if it is true) or not hold (if it is false). For 
instance '1 <B>is a positive integer</B>' holds and '-1 <B>is a positive 
integer</B>' does not hold.</P>
<P><B>Notation</B></P>
<P>Here are two other example judgments.</P>
<P>The judgment</P>
<DIV align=center><EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></DIV>
<P>holds if the expression <EM>Expr</EM> yields (or evaluates to) the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</P>
<P>The judgment</P>
<DIV align=center><EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds if the expression <EM>Expr</EM> has the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<P>Most other judgments used in this document are short English sentences 
intended to reflect their meaning. For instance, the judgment</P>
<DIV align=center><EM>Axis</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
principal</B></A> <EM>PrincipalNodeKind</EM></DIV>
<P>holds if <EM>PrincipalNodeKind</EM> is the principal node kind for the axis 
<EM>Axis</EM>.</P>
<P>A judgment can contain <EM>symbols</EM> and <EM>patterns</EM>.</P>
<P>Symbols are purely syntactic and are used to write the judgment itself. 
Symbols are chosen to reflect a judgment's meaning, and are written in bold 
fonts. For example, '<B>is a positive integer</B>', '<B>=&gt;</B>' and 
'<B>:</B>' are symbols, the second and third of which should be read "yields", 
and "has type" respectively.</P>
<P>Patterns are used to represent objects, constructed from a given grammar 
production. In patterns, italicized words usually correspond to non-terminals in 
the grammar. The name of those non-terminals is significant, and may be 
instantiated only to an "object" (a value, a type, an expression, etc.) that can 
be substituted legally for that non-terminal. For example, '<EM>Expr</EM>' is a 
pattern that stands for every [XPath/XQuery] expressions, 
'<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> + <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB>' is a pattern that stands for every addition expression, 
'element a { <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
}' is a pattern that stands for every value in the [XPath/XQuery] data model 
that is an 'a' element.</P>
<P>Non-terminals in a pattern may appear with subscripts (e.g. 
<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB>) to distinguish different instances of the same sort of 
pattern. In some cases, non-terminals in a pattern may have a name that is not 
exactly the name of that non terminal, but is based on it. For instance, a <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
is a pattern that stands for a type name, as would <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. This usage is limited, and only occurs to improve the 
readability of some of the inference rules.</P>
<P>When <EM>instantiating</EM> the judgment, each pattern must be instantiated 
to an appropriate sort of "object" (value, type, expression, etc). For example, 
'3 <B>=&gt;</B> 3' and '$x+0 <B>=&gt;</B> 3' are both instances of the judgment 
'<EM>Expr</EM> <B>=&gt;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'. 
Note that in the first judgment, '3' corresponds to both the expression '3' (on 
the left-hand side of the <B>=&gt;</B> symbol) and to the value '3' (on the 
right-hand side of the <B>=&gt;</B> symbol).</P>
<P id=jd_not>In some cases, inference rules may need to use the fact that a 
certain judgment <EM>does not</EM> hold. <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>Judgment</EM>) 
holds if and only if <EM>Judgment</EM> does not hold.</P>
<P id=jd_isin>In some cases, a pattern may be instantiated to a value within a 
finite set of pre-determined values. We may write that set of possible values 
using the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
judgment. For instance, the judgment</P>
<DIV align=center><EM>Color</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
{ <B>blue</B>, <B>green</B> }</DIV>
<P>holds if the pattern <EM>Color</EM> has either the value <EM>blue</EM> or the 
value <EM>green</EM>.</P>
<P>In some cases, a judgment may use the "=" sign to indicate that a given value 
is equal to another value, or that a pattern is equal to a given value. For 
instance, the judgment</P>
<DIV align=center><EM>Color</EM> = <B>blue</B></DIV>
<P>holds if the pattern <EM>Color</EM> has the value <EM>blue</EM>.</P>
<P>An index to all the judgments used in this specification is provided in <A 
href="REC-xquery-semantics-20070123.htm#sec_indexes"><B>[B 
Index of judgments]</B></A>.</P></DIV>
<DIV class=div3>
<H4><A id=sec_environments name=sec_environments></A>2.1.3 Notations for 
environments</H4>
<P id=xq_environment>An environment component is a dictionary that maps a symbol 
(e.g., a function name or a variable name) to an "object" (e.g., a function 
body, a type, a value). One can access information in an environment component 
or update it.</P>
<P>If "envComp" is an environment component, then "envComp(<EM>symbol</EM>)" 
denotes the "object" to which <EM>symbol</EM> is mapped. The notation is 
intentionally similar to function application, because an environment component 
can be considered a function from the argument <EM>symbol</EM> to the "object" 
to which the <EM>symbol</EM> is mapped.</P>
<P>This document uses <EM>environments</EM> that group related environment 
components. If "env" is an environment containing the environment component 
"envComp", that environment component is denoted "env.envComp". The value that 
<EM>symbol</EM> is mapped to in that environment component is denoted 
"env.envComp(<EM>symbol</EM>)".</P>
<P>The two main environments used in the Formal Semantics are: a dynamic 
environment (<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>), 
which models the [XPath/XQuery] dynamic context, and a static environment (<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>), 
which models the [XPath/XQuery] static context. Both are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_context"><B>[3.1 
Expression Context]</B></A>.</P>
<P>For example, <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A> 
denotes the dynamic environment component that maps variables to values and <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM>) 
denotes the value of the variable <EM>Variable</EM> in the dynamic context.</P>
<P>Environments are used in a judgment to capture some of the context in which 
the judgment is computed, and most judgments are computed assuming that some 
environment is given. This <EM>assumption</EM> is denoted by prefixing the 
judgment with "env |-". The "|-" symbol is called a "turnstile" and is used in 
almost all inference rules.</P>
<P>For instance, the judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>Expr</EM> <B>=&gt;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></DIV>
<P>is read as: Assuming the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>, 
the expression <EM>Expr</EM> yields the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</P>
<P>Environments can be <EM>updated</EM>, using the following notation:</P>
<UL>
  <LI>
  <P>"env + envComp(<EM>symbol</EM> =&gt; <EM>object</EM>) " denotes the new 
  environment that is identical to <EM>env</EM> except that the environment 
  component <EM>envComp</EM> has been updated to map <EM>symbol</EM> to 
  <EM>object</EM>. The notation <EM>symbol</EM> =&gt; <EM>object</EM> indicates 
  that <EM>symbol</EM> is mapped to <EM>object</EM> in the new environment.</P>
  <LI>
  <P>In case the environment component contains only a constant value (e.g., the 
  ordering mode which can only be either ordered or unordered), the following 
  notation is used to set its value. "env + envComp( <EM>object</EM> ) ".</P>
  <LI>
  <P>The following shorthand is also allowed: "env + envComp( 
  <EM>symbol</EM><SUB><FONT size=2>1</FONT></SUB> =&gt; 
  <EM>object</EM><SUB><FONT size=2>1</FONT></SUB> ; ... ; 
  <EM>symbol</EM><SUB><FONT size=2>n</FONT></SUB> =&gt; 
  <EM>object</EM><SUB><FONT size=2>n</FONT></SUB> ) " in which each symbol is 
  mapped to a corresponding object in the new environment.</P>
  <P>This notation is equivalent to nested updates, as in " (env + envComp( 
  <EM>symbol</EM><SUB><FONT size=2>1</FONT></SUB> =&gt; 
  <EM>object</EM><SUB><FONT size=2>1</FONT></SUB>) + ... ) + 
  env(<EM>symbol</EM><SUB><FONT size=2>n</FONT></SUB> =&gt; 
  <EM>object</EM><SUB><FONT size=2>n</FONT></SUB>)".</P></LI></UL>
<P>Updating an environment creates a copy of the original environment and 
overrides any previous binding that might exist for the same name and the same 
component in that environment. Updating the environment is used to capture the 
<EM>scope</EM> of a symbol (e.g., for variables, namespace prefixes, etc). For 
instance, in the following expression</P>
<DIV class=exampleInner><PRE>  let $x := 1 return
  let $x := $x + 2 return
  $x - 3
</PRE></DIV>
<P>each let expression changes the dynamic context by binding a new variable to 
a new value. Each different context is represented by a different environment. 
The original environment, in which the expression <CODE>1</CODE> is evaluated, 
does not contain any binding for variable <CODE>$x</CODE>. This environment is 
updated a first time with a binding of variable <CODE>$x</CODE> to the value 
<CODE>1</CODE>, and this new environment is used for the evaluation of the 
expression <CODE>$x + 2</CODE>. Then this second environment is updated with a 
binding of variable <CODE>$x</CODE> to the value <CODE>3</CODE>, and this 
environment is used for the evaluation of the expression <CODE>$x - 
3</CODE>.</P>
<P>Also, note that there are no operations to remove entries from environments. 
This is never necessary as updating an environment effectively creates a new 
extended copy of the original environment, leaving the original environment 
accessible wherever it is in scope along with the updated copy.</P></DIV>
<DIV class=div3>
<H4><A id=sec_inference name=sec_inference></A>2.1.4 Notations for inference 
rules</H4>
<P>Inference rules are used to specify how to infer whether a given judgment 
holds or not. Inference rules express the logical relation between judgments and 
describe how complex judgments can be concluded from simpler premise 
judgments.</P>
<P>A logical inference rule is written as a collection of <EM>premise</EM>s and 
a <EM>conclusion</EM>, written respectively above and below a dividing line, as 
follows:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><EM>premise</EM><SUB><FONT size=2>1</FONT></SUB> ... 
      <EM>premise</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>conclusion</EM></TD></TR></TBODY></TABLE><BR></DIV>
<P>All premises and the conclusion are judgments. From a logical point of view, 
an inference rule is a deduction that if the premises hold, then the conclusion 
holds as well. In that sense, the previous inference rule has a similar meaning 
as the following logical statement.</P>
<P>IF <EM>premise</EM><SUB><FONT size=2>1</FONT></SUB></P>
<P>AND ...</P>
<P>AND <EM>premise</EM><SUB><FONT size=2>n</FONT></SUB></P>
<P>THEN <EM>conclusion</EM></P>
<P>Here is a simple example of inference rule, which uses specific instances of 
the example judgment '<EM>Expr</EM> <B>=&gt;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>' 
from above:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>$x <B>=&gt;</B> 0 &nbsp;&nbsp;&nbsp;&nbsp; 3 <B>=&gt;</B> 3</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>$x + 3 <B>=&gt;</B> 3</TD></TR></TBODY></TABLE><BR></DIV>
<P>This inference rule expresses the following property: <EM>if</EM> the 
variable expression '$x' yields the value '0', <EM>and</EM> the literal 
expression '3' yields the value '3', <EM>then</EM> the expression '$x + 3' 
yields the value '3'.</P>
<P>An inference rule may have no premises above the line, which means that the 
expression below the line always holds. For instance:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>3 <B>=&gt;</B> 3</TD></TR></TBODY></TABLE><BR></DIV>
<P>This inference rule expresses the following property: evaluating the literal 
expression '3' always yields the value '3'.</P>
<P>The two above rules are expressed in terms of specific expressions and 
values, but usually rules are more abstract. That is, the judgments are not 
fully instantiated. Here is a rule that says that for any variable 
$<EM>VarName</EM> that yields the integer value <EM>Integer</EM>, adding '0' 
yields the same integer value:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>$<EM>VarName</EM> <B>=&gt;</B> <EM>Integer</EM></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>$<EM>VarName</EM> + 0 <B>=&gt;</B> 
<EM>Integer</EM></TD></TR></TBODY></TABLE><BR></DIV>
<P>Each occurrence of a given pattern in a particular inference rule must be 
instantiated to the same "object" within the entire rule. This means that, in 
the context of a particular instantiation of a rule, one can talk about "the 
value of $<EM>VarName</EM>" instead of the value bound to the first (second, 
etc) occurrence of $<EM>VarName</EM>.</P>
<P>Here is an example of a rule occurring later in this document.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <B>:</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <B>:</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> , <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> <B>:</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>This rule is read as follows: if two expressions <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> and <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> are 
known to have the static types <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> (the two premises above the line), then it is the case 
that the sequence expression "<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> , 
<EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>" has the static type "<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>", which is the sequence of types <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. Note that this inference rule does not modify the static 
environment.</P>
<P>The following rule defines the static semantics of a "let" expression. The 
binding of the new variable is captured by an update to the varType component of 
the original static environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <B>:</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <B>:</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <CODE>let</CODE> <CODE>$</CODE><EM>VarName</EM> := <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB> <CODE>return</CODE> <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> <B>:</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>This rule is read as follows: First, because the variable is a QName, it is 
first expanded into an expanded QName. Second, the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> for the "let" input expression <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> is computed. Then the "let" variable with expanded name, 
<A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
with type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> is added into the varType component of the static 
environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>. 
Finally, the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> of <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> is 
computed in that new environment.</P>
<P>In some cases, ellipses may be used in inference rules to handle an arbitrary 
number of judgments. In those cases, some of the patterns may have indices as 
subscript. If the same index is used several times within the same rule, the 
number of judgment in each case must be the same. For instance, the following 
rule holds for any number of expressions, from <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> to <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB>, with the 
same number of types <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>n</FONT></SUB>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM> (<EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>This inference rule is equivalent to having an unbounded number of rules, the 
first of which has 1 judgment, the second of which has 2 judgments, etc. For 
instance, the above rule holds if and only if one of the following rules 
hold.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM> (<EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>or</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM> (<EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB>,<EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>etc.</P>
<P>When ellipses are used, the value for the index always ranges from 1 to an 
arbitrary number n.</P></DIV>
<DIV class=div3>
<H4><A id=sec_together name=sec_together></A>2.1.5 Putting it together</H4>
<P>In isolation, each inference rule describes a fragment of the semantics for a 
given judgment. Put together, inference rules describe possible inferences that 
can be used to decide whether a particular judgment holds.</P>
<P>For a given judgment, if that judgment can be inferred to be true by applying 
any sequence of inferences based on premises which are known to be true, the 
inference succeeds. In most cases, the inference will proceed by proving 
intermediate judgments, following the consequences from one judgment to the next 
by applying successive inference rules.</P>
<P>Such inference is a mechanism which can be used to describe both static type 
analysis and dynamic evaluation. More specifically, performing static typing 
consists in proving that the following judgment holds for a given expression 
<EM>Expr</EM>.</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>If the judgment holds for a given type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>, 
this type is a possible static type for the expression. If there exists no type 
for which this judgment holds, then static typing fails and a static type error 
is returned to the user.</P>
<P>Consider the following expression.</P>
<DIV class=exampleInner><PRE>  fn:count((1,2,3))
</PRE></DIV>
<P>Using the static typing rules given for expressions in the rest of this 
document, one can deduce that the expression is of type <CODE>xs:integer</CODE> 
through the following inference.</P>
<DIV class=exampleInner><PRE>  statEnv |- 1 : xs:integer  (from typing of literals)
  statEnv |- 2 : xs:integer  (from typing of literals)
  --------------------------------------------------- (sequence)
    statEnv |- 1,2 : xs:integer, xs:integer
    statEnv |- 3 : xs:integer
    ----------------------------------------------------- (sequence)
    statEnv |- 1,2,3 : xs:integer, xs:integer, xs:integer

    declare function fn:count($x as item()*) as xs:integer
    statEnv |- xs:integer,xs:integer,xs:integer &lt;: item()*
    ---------------------------------------------------------- (function call)
    statEnv |- fn:count((1,2,3)) : xs:integer
</PRE></DIV>
<P>Conversly, consider the following expression.</P>
<DIV class=exampleInner><PRE>  fn:nilled((1,2,3))
</PRE></DIV>
<P>Using the static typing rules given for expressions in the rest of this 
document, one can apply inference rules up to the following point.</P>
<DIV class=exampleInner><PRE>    ....
    ----------------------------------------------------- (sequence)
    statEnv |- 1,2,3 : xs:integer, xs:integer, xs:integer
</PRE></DIV>
<P>However, there is no rule that can infer the type of 
<CODE>fn:nilled((1,2,3))</CODE>, because the static typing rules for function 
calls will only hold if the type of the function parameters is a subtype of the 
expected type. However, here <CODE>(xs:integer,xs:integer,xs:integer)</CODE> is 
not a node type, which is the expected type for the function 
<CODE>fn:nilled</CODE>.</P>
<P>Note that in some cases, the inference can only proceed through the 
appropriate changes to the environment. For instance, consider the following 
expression.</P>
<DIV class=exampleInner><PRE>  let $x := 1 return ($x,$x)
</PRE></DIV>
<P>Using the static typing rules given for expressions in the rest of this 
document, one can deduce that the expression is of type 
<CODE>(xs:integer,xs:integer)</CODE> through the following inference.</P>
<DIV class=exampleInner><PRE>statEnv0.varType = ()

  -------------------------- (literal)
  statEnv0 |- 1 : xs:integer

statEnv1 = statEnv0 + varType($x =&gt; xs:integer)

     statEnv1.varType($x) = xs:integer
     --------------------------------- (variable reference)
     statEnv1 |- $x : xs:integer

     statEnv1.varType($x) = xs:integer
     --------------------------------- (variable reference)
     statEnv1 |- $x : xs:integer

     ------------------------------------------- (sequence)
     statEnv1 |- ($x,$x) : xs:integer,xs:integer

  -------------------------------------------------------------- (let)
  statEnv0 |- let $x := 1 return ($x,$x) : xs:integer,xs:integer
</PRE></DIV>
<P>This example illustrates how each rule is applied to individual 
sub-expressions, and how the environment is used to maintain the relevant 
context information.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_namespaces name=sec_namespaces></A>2.2 URIs, Namespaces, and 
Prefixes</H3>
<P>The Formal Semantics does not formally specify the adjustment of relative 
URIs according to a base URI. All URIs used in this document are assumed to be 
absolute URIs.</P>
<P>The Formal Semantics uses the following namespace prefixes.</P>
<UL>
  <LI>
  <P><CODE>fn:</CODE> for functions and operators from the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
  and Operators]</A> document.</P>
  <LI>
  <P><CODE>xs:</CODE> for XML Schema components and built-in types.</P></LI></UL>
<P>These prefixes are assumed to be bound to the appropriate URIs.</P>
<P>In addition, the Formal Semantics uses the following special prefixes for 
specification purposes.</P>
<UL>
  <LI>
  <P><EM>dm:</EM> for accessors of the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>.</P>
  <LI>
  <P><EM>op:</EM> for operators in <A 
  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
  and Operators]</A>.</P>
  <LI>
  <P><EM>fs:</EM> for functions and types defined in the formal 
  semantics.</P></LI></UL>
<P>These prefixes are always italicized to emphasize that the corresponding 
functions, variables, and types are abstract: they are not and cannot be made 
accessible in [XPath/XQuery]. None of these special prefixes are given an 
explicit URI, but they behave as if they had one for the purposes of namespace 
resolution.</P></DIV>
<DIV class=div2>
<H3><A id=sec_values name=sec_values></A>2.3 XML Values</H3>
<P>The [XPath/XQuery] language is defined over values of the [XPath/XQuery] data 
model. The [XPath/XQuery] data model is defined normatively in <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A>. We define the formal notation that is used in this document to 
describe and manipulate values in inference rules. Formal values are used for 
specification purposes only and are not exposed to the [XPath/XQuery] user.</P>
<P>This section gives the grammar for formal values, along with a summary of the 
corresponding data model properties. In the context of this document, all 
constraints on values that are specified in <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A> are assumed to hold.</P>
<DIV class=div3>
<H4><A id=sec_data_model_overview name=sec_data_model_overview></A>2.3.1 Formal 
values</H4>
<P>A value is a sequence of zero or more items. An item is either an atomic 
value or a node.</P>
<P>An atomic value is a value in the value space of an atomic type, labeled with 
the name of that atomic type. An atomic type is either a primitive or derived 
atomic type according to XML Schema <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-2">[Schema 
Part 2]</A>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>.</P>
<P>A node is either an element, an attribute, a document, a text, a comment, or 
a processing-instruction node.</P>
<P>Element nodes have a <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> and contain a complex value or a 
simple value. Attribute nodes have a <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> and contain a simple value. Text 
nodes always contain one string value of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
therefore the corresponding type annotation is omitted in the formal notation of 
a text node. Document nodes do not have a type annotation and contain a sequence 
of element, text, comment, or processing-instruction nodes.</P>
<P>A simple value is a sequence of atomic values.</P>
<P>A complex value is a sequence of attribute nodes followed by a sequence of 
element, text, comment, or processing-instruction nodes.</P>
<P>A <A href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> can be either the <EM>QName</EM> of a 
declared type or an anonymous type. An anonymous type corresponds to an XML 
Schema type for which the schema writer did not provide a name. Anonymous type 
names are not visible to the user, but are generated during schema validation 
and used to annotate nodes in the data model. By convention, anonymous type 
names are written using the <EM>fs:</EM> Formal Semantics prefix: 
<EM>fs:</EM>anon<SUB><FONT size=2>0</FONT></SUB>, <EM>fs:</EM>anon<SUB><FONT 
size=2>1</FONT></SUB>, etc.</P>
<P>Formal values are defined by the following grammar.</P>
<H5><A id=N10B7D name=N10B7D></A>Values</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Value 
      name=doc-fs-Value></A>[<SMALL>7&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Value</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item">Item</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value">Value</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value">Value</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Item 
      name=doc-fs-Item></A>[<SMALL>21&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Item</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue">NodeValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue">AtomicValue</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AtomicValue 
      name=doc-fs-AtomicValue></A>[<SMALL>22&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AtomicValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent">AtomicValueContent</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeAnnotation">TypeAnnotation</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AtomicValueContent 
      name=doc-fs-AtomicValueContent></A>[<SMALL>1&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AtomicValueContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>String<BR>| Boolean<BR>| Decimal<BR>| Float<BR>| Double<BR>| 
      Duration<BR>| DateTime<BR>| Time<BR>| Date<BR>| GYearMonth<BR>| GYear<BR>| 
      GMonthDay<BR>| GDay<BR>| GMonth<BR>| HexBinary<BR>| Base64Binary<BR>| 
      AnyURI<BR>| expanded-QName<BR>| NOTATION</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeAnnotation 
      name=doc-fs-TypeAnnotation></A>[<SMALL>2&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeAnnotation</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"of" "type" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementValue 
      name=doc-fs-ElementValue></A>[<SMALL>9&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName">ElementName</A> 
      "nilled"? <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeAnnotation">TypeAnnotation</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value">Value</A> 
      "}" ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings">NamespaceBindings</A> 
      "}")?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeValue 
      name=doc-fs-AttributeValue></A>[<SMALL>10&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName">AttributeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeAnnotation">TypeAnnotation</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue">SimpleValue</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-SimpleValue 
      name=doc-fs-SimpleValue></A>[<SMALL>8&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>SimpleValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue">AtomicValue</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue">SimpleValue</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue">SimpleValue</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-DocumentValue 
      name=doc-fs-DocumentValue></A>[<SMALL>11&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>DocumentValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value">Value</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-CommentValue 
      name=doc-fs-CommentValue></A>[<SMALL>13&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>CommentValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ProcessingInstructionValue 
      name=doc-fs-ProcessingInstructionValue></A>[<SMALL>14&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ProcessingInstructionValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TextValue 
      name=doc-fs-TextValue></A>[<SMALL>12&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TextValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-NodeValue 
      name=doc-fs-NodeValue></A>[<SMALL>20&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NodeValue</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue">ElementValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue">AttributeValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue">DocumentValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TextValue">TextValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-CommentValue">CommentValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ProcessingInstructionValue">ProcessingInstructionValue</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementName 
      name=doc-fs-ElementName></A>[<SMALL>3&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeName 
      name=doc-fs-AttributeName></A>[<SMALL>6&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeName 
      name=doc-fs-TypeName></A>[<SMALL>23&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-NamespaceBindings 
      name=doc-fs-NamespaceBindings></A>[<SMALL>15&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NamespaceBindings</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding">NamespaceBinding</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding">NamespaceBinding</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-NamespaceBinding 
      name=doc-fs-NamespaceBinding></A>[<SMALL>17&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NamespaceBinding</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" AnyURI "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>In the production for <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent"><EM>AtomicValueContent</EM></A>, 
each symbol in the right-hand side corresponds to one of the primitive 
datatypes. For example, <EM>String</EM> corresponds to <CODE>xs:string</CODE>, 
and <EM>Boolean</EM> corresponds to <CODE>xs:boolean</CODE>. (The mapping is 
obvious, except that "expanded-QName" corresponds to <CODE>xs:QName</CODE>) 
Although there are no explicit productions for these symbols, we assume that 
each is a non-terminal that derives a set of syntactic objects, each of which 
corresponds to a value in the value space of the corresponding datatype. For 
instance, the non-terminal <EM>String</EM> derives a set of syntactic objects, 
which appear in examples as <CODE>""</CODE>, <CODE>"a"</CODE>, 
<CODE>"John"</CODE>, etc.; each one corresponds to a string value in the 
<CODE>xs:string</CODE> value space. For familiarity, these objects have been 
given the same appearance as <EM>StringLiteral</EM>s from the XQuery and Core 
grammars; however, these are formal objects, with a distinct role in the FS.</P>
<P>Element (resp. attributes) without type annotations, are assumed to have the 
type annotation <CODE>xs:anyType</CODE> (resp. <CODE>xs:anySimpleType</CODE>). 
Atomic values without type annotations, are assumed to have a type annotation 
which is the base type for the corresponding value. For instance, <CODE>"Hello, 
World!"</CODE> is equivalent to <CODE>"Hello, World!" of type 
xs:string</CODE>.</P>
<P>Untyped elements (e.g., from well-formed documents) have the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A>, 
untyped attributes have the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
and untyped atomic values have the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<P>An element has an optional "nilled" marker. This marker is present only if 
the element has been validated against an element type in the schema which is 
"nillable", and the element has no content and an attribute <CODE>xsi:nil</CODE> 
set to <CODE>"true"</CODE>.</P>
<P>An element also has a sequence of namespace bindings, which are the set of 
in-scope namespaces for that element. Each namespace binding is a prefix, URI 
pair. Elements without namespace bindings are assumed to have an empty set of 
in-scope namespaces.</P>
<DIV class=note>
<P class=prefix><B>Note:</B></P>
<P>In <A 
href="REC-xquery-semantics-20070123.htm#">[XPath]</A>, 
the in-scope namespaces of an element node are represented by a collection of 
<B>namespace nodes</B> arranged on a <B>namespace axis</B>, which is optional 
and deprecated in <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>. XQuery does not support the namespace axis and 
does not represent namespace bindings in the form of nodes.</P></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_example_values name=sec_example_values></A>2.3.2 Examples of 
values</H4>
<P><B>A well-formed document</B></P>
<DIV class=exampleInner><PRE>  &lt;fact&gt;The cat weighs &lt;weight units="lbs"&gt;12&lt;/weight&gt; pounds.&lt;/fact&gt;
</PRE></DIV>
<P>In the absence of a Schema, this document is represented as</P>
<DIV class=exampleInner><PRE>  element fact of type xs:untyped {
    text { "The cat weighs " },
    element weight of type xs:untyped {
      attribute units of type xs:untypedAtomic {
        "lbs" of type xs:untypedAtomic
      }
      text { "12" }
    },
    text { " pounds." }
  }
</PRE></DIV>
<P><B>A document before and after validation.</B></P>
<DIV class=exampleInner><PRE>  &lt;weight xsi:type="xs:integer"&gt;42&lt;/weight&gt;
</PRE></DIV>
<P>The formal model for values can represent values before and after validation. 
Before validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element weight of type xs:untyped {
    attribute xsi:type of type xs:untypedAtomic {
      "xs:integer" of type xs:untypedAtomic
    },
    text { "42" }
  }
</PRE></DIV>
<P>After validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element weight of type xs:integer {
    attribute xsi:type of type xs:QName {
      "xs:integer" of type xs:QName
    },
    42 of type xs:integer
  }
</PRE></DIV>
<P><B>An element with a list type</B></P>
<DIV class=exampleInner><PRE>  &lt;sizes&gt;1 2 3&lt;/sizes&gt;
</PRE></DIV>
<P>Before validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type xs:untyped {
    text { "1 2 3" }
  }
</PRE></DIV>
<P>Assume the following Schema.</P>
<DIV class=exampleInner><PRE>  &lt;xs:element name="sizes" type="sizesType"/&gt;
  &lt;xs:simpleType name="sizesType"&gt;
    &lt;xs:list itemType="sizeType"/&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="sizeType"&gt;
    &lt;xs:restriction base="xs:integer"/&gt;
  &lt;/xs:simpleType&gt;
</PRE></DIV>
<P>After validation against this Schema, the element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type sizesType {
    1 of type sizeType,
    2 of type sizeType,
    3 of type sizeType
  }
</PRE></DIV>
<P><B>An element with an anonymous type</B></P>
<DIV class=exampleInner><PRE>  &lt;sizes&gt;1 2 3&lt;/sizes&gt;
</PRE></DIV>
<P>Before validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type xs:untyped {
    text { "1 2 3" }
  }
</PRE></DIV>
<P>Assume the following Schema.</P>
<DIV class=exampleInner><PRE>  &lt;xs:element name="sizes"&gt;
    &lt;xs:simpleType&gt;
      &lt;xs:list itemType="xs:integer"/&gt;
    &lt;/xs:simpleType&gt;
  &lt;/xs:element&gt;
</PRE></DIV>
<P>After validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type fs:anon1 {
    1 of type xs:integer,
    2 of type xs:integer,
    3 of type xs:integer
  }
</PRE></DIV>
<P>where <EM>fs:</EM>anon<SUB><FONT size=2>1</FONT></SUB> stands for the 
internal anonymous name generated by the system for the <CODE>sizes</CODE> 
element.</P>
<P><B>A nillable element with</B> <CODE>xsi:type</CODE> <B>set to true</B></P>
<DIV class=exampleInner><PRE>  &lt;sizes xsi:nil="true"/&gt;
</PRE></DIV>
<P>Before validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type xs:untyped {
    attribute xsi:nil of type xs:untypedAtomic { "true" of type xs:untypedAtomic }
  }
</PRE></DIV>
<P>Assume the following Schema.</P>
<DIV class=exampleInner><PRE>  &lt;xs:element name="sizes" type="sizesType" nillable="true"/&gt;
</PRE></DIV>
<P>After validation against this Schema, the element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes nilled of type sizesType {
    attribute xsi:nil of type xs:boolean { true of type xs:boolean }
  }
</PRE></DIV>
<P><B>An element with a union type</B></P>
<DIV class=exampleInner><PRE>  &lt;sizes&gt;1 two 3 four&lt;/sizes&gt;
</PRE></DIV>
<P>Before validation, this element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type xs:untyped {
    text { "1 two 3 four" }
  }
</PRE></DIV>
<P>Assume the following Schema:</P>
<DIV class=exampleInner><PRE>  &lt;xs:element name="sizes" type="sizesType"/&gt;
  &lt;xs:simpleType name="sizesType"&gt;
    &lt;xs:list itemType="sizeType"/&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="sizeType"&gt;
    &lt;xs:union memberType="xs:integer xs:string"/&gt;
  &lt;/xs:simpleType&gt;
</PRE></DIV>
<P>After validation against this Schema, the element is represented as:</P>
<DIV class=exampleInner><PRE>  element sizes of type sizesType {
    1 of type xs:integer,
    "two" of type xs:string,
    3 of type xs:integer,
    "four" of type xs:string
  }
</PRE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_types name=sec_types></A>2.4 The [XPath/XQuery] Type System</H3>
<P>The [XPath/XQuery] type system is used in the specification of the dynamic 
and of the static semantics of [XPath/XQuery]. This section introduces formal 
notations for describing types.</P>
<DIV class=div3>
<H4><A id=sec_schema name=sec_schema></A>2.4.1 XML Schema and the [XPath/XQuery] 
Type System</H4>
<P>The [XPath/XQuery] type system is based on <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A> and <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-2">[Schema 
Part 2]</A>. <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A> and <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-2">[Schema 
Part 2]</A> specify normatively the type information available in 
[XPath/XQuery]. We define the formal notation that is used in this document to 
describe and manipulate types in inference rules. Formal types are used for 
specification purposes only and are not exposed to the [XPath/XQuery] user.</P>
<P><B>Representation of content models.</B> For the purpose of static typing, 
the [XPath/XQuery] type system only describes minOccurs, maxOccurs, and 
minLength, maxLength on list types for the occurrences that correspond to the 
DTD operators <CODE>+</CODE>, <CODE>*</CODE>, and <CODE>?</CODE>. Choices are 
represented using the DTD operator <CODE>|</CODE>. <B>All groups</B> are 
represented using the interleaving operator (<CODE>&amp;</CODE>).</P>
<P><B>Representation of anonymous types.</B> To clarify the semantics, the 
[XPath/XQuery] type system makes all anonymous types explicit.</P>
<P><B>Representation of XML Schema simple type facets and identity 
constraints.</B> For simplicity, XML Schema simple type facets and identity 
constraints are not formally represented in the [XPath/XQuery] type system. 
However, an [XPath/XQuery] implementation supporting XML Schema import and 
validation must take simple type facets and identity constraints into 
account.</P>
<P>This document describe types in the [XPath/XQuery] types system, as well as 
the operations and properties over those types which are used to define the 
[XPath/XQuery] static typing feature. The two most important properties are 
whether a data instances matches a type, and whether a type is a subtype of 
another. Those properties are described in <A 
href="REC-xquery-semantics-20070123.htm#sec_type_matching"><B>[8.3 
Judgments for type matching]</B></A>. This document does not describe all other 
possible properties over those types.</P>
<P>The mapping from XML Schema into the [XPath/XQuery] type system is given in 
<A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A>. The rest of this section is organized as follows. <A 
href="REC-xquery-semantics-20070123.htm#sec_item_types"><B>[2.4.2 
Item types]</B></A> describes item types, <A 
href="REC-xquery-semantics-20070123.htm#sec_content_models"><B>[2.4.3 
Content models]</B></A> describes content models, and <A 
href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><B>[2.4.4 
Top level definitions]</B></A> describe top-level type declarations.</P></DIV>
<DIV class=div3>
<H4><A id=sec_item_types name=sec_item_types></A>2.4.2 Item types</H4>
<P>An item type is either an atomic type, an element type, an attribute type, a 
document node type, a text node type, a comment node type, or a processing 
instruction type. We distinguish between document nodes, attribute nodes, and 
nodes that can occur in element content (elements, comments, processing 
instructions, and text nodes), as we need to refer to element content types 
later in the formal semantics.</P>
<H5><A id=N10E29 name=N10E29></A>Item Types</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalItemType 
      name=doc-fs-FormalItemType></A>[<SMALL>25&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalItemType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName">AtomicTypeName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType">NodeType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AtomicTypeName 
      name=doc-fs-AtomicTypeName></A>[<SMALL>28&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AtomicTypeName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-NodeType 
      name=doc-fs-NodeType></A>[<SMALL>26&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NodeType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType">DocumentType</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType">AttributeType</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentType">ElementContentType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementContentType 
      name=doc-fs-ElementContentType></A>[<SMALL>27&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementContentType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType">ElementType</A><BR>| 
      "comment"<BR>| "processing-instruction"<BR>| "text"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementType 
      name=doc-fs-ElementType></A>[<SMALL>29&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementNameOrWildcard">ElementNameOrWildcard</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier">OptTypeSpecifier</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementNameOrWildcard 
      name=doc-fs-ElementNameOrWildcard></A>[<SMALL>4&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementNameOrWildcard</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeNameOrWildcard 
      name=doc-fs-AttributeNameOrWildcard></A>[<SMALL>5&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeNameOrWildcard</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptTypeSpecifier 
      name=doc-fs-OptTypeSpecifier></A>[<SMALL>77&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptTypeSpecifier</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier">TypeSpecifier</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeSpecifier 
      name=doc-fs-TypeSpecifier></A>[<SMALL>30&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeSpecifier</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable">OptNillable</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeType 
      name=doc-fs-AttributeType></A>[<SMALL>31&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard">AttributeNameOrWildcard</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference">OptTypeReference</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptNillable 
      name=doc-fs-OptNillable></A>[<SMALL>75&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptNillable</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Nillable">Nillable</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Nillable 
      name=doc-fs-Nillable></A>[<SMALL>32&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Nillable</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"nillable"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptTypeReference 
      name=doc-fs-OptTypeReference></A>[<SMALL>78&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptTypeReference</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeReference 
      name=doc-fs-TypeReference></A>[<SMALL>36&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeReference</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"of" "type" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-DocumentType 
      name=doc-fs-DocumentType></A>[<SMALL>45&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>DocumentType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      "}")?</CODE></TD></TR></TBODY></TABLE>
<P>An element or attribute type has a name or wildcard, and an optional type 
reference. A name alone corresponds to a reference to a global element or 
attribute declaration. A name with a type reference corresponds to a local 
element or attribute declaration. "element *" or "attribute *" alone refers to 
the wildcard types for any element or any attribute. In addition, an element 
type has an optional nillable flag that indicates whether the element can be 
nilled or not.</P>
<P>A document type has an optional content type. If no content type is given, 
then the type is treated as being the wildcard type for documents, i.e., a 
sequence of text and element nodes. For consistency with element nodes, PIs and 
comments are not indicated in that wildcard type, but may occur in 
instances.</P>
<P><B>Note</B></P>
<P>Generic node types (e.g., <CODE>node()</CODE>) such as used in the 
SequenceType production, are interpreted in the type system as a union of the 
corresponding node types (e.g., element,attribute,text,comment and 
processing-instruction nodes) and therefore do not appear in the grammar. The 
semantics of sequence types is described in <A 
href="REC-xquery-semantics-20070123.htm#id-sequencetype-matching"><B>[3.5.4 
SequenceType Matching]</B></A>.</P>
<P><B>Examples</B></P>
<P>The following is a text node type</P>
<DIV class=exampleInner><PRE>  text
</PRE></DIV>
<P>The following is a type for all elements</P>
<DIV class=exampleInner><PRE>  element * of type xs:anyType
</PRE></DIV>
<P>The following is a type for all elements of type string</P>
<DIV class=exampleInner><PRE>  element * of type xs:string
</PRE></DIV>
<P>The following is a type for a nillable element of type string and with name 
<CODE>size</CODE></P>
<DIV class=exampleInner><PRE>  element size nillable of type xs:string
</PRE></DIV>
<P>The following is a reference to a global attribute declaration</P>
<DIV class=exampleInner><PRE>  attribute sizes
</PRE></DIV>
<P>The following is a type for elements with anonymous type 
<EM>fs:</EM>anon<SUB><FONT size=2>1</FONT></SUB>:</P>
<DIV class=exampleInner><PRE>  element sizes of type fs:anon1
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_content_models name=sec_content_models></A>2.4.3 Content 
models</H4>
<P>Following XML Schema, types in [XPath/XQuery] are composed from item types by 
optional, one or more, zero or more, <B>all group</B>, <B>sequence</B>, 
<B>choice</B>, empty sequence (written <CODE>empty</CODE>), or empty choice 
(written <CODE>none</CODE>).</P>
<P>The type <CODE>empty</CODE> matches the empty sequence. The type 
<CODE>none</CODE> matches no values. <CODE>none</CODE> is the identity for 
choice, that is (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
| <CODE>none</CODE>) = <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>. 
The type <CODE>none</CODE> is the static type for <A 
href="REC-xquery-semantics-20070123.htm#sec_fnerror"><B>[7.2.9 
The fn:error function]</B></A>.</P>
<H5><A id=N10F7C name=N10F7C></A>Types</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Type 
      name=doc-fs-Type></A>[<SMALL>24&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Type</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType">FormalItemType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OccurrenceIndicator">OccurrenceIndicator</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      "|" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A>)<BR>| 
      "empty"<BR>| "none"<BR>| ("(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A> 
      ")")</CODE></TD></TR></TBODY></TABLE>
<P>The [XPath/XQuery] type system includes three binary operators on types: ",", 
"|" and "&amp;", corresponding respectively to sequence, choice and <B>all 
groups</B> in Schema. The [XPath/XQuery] type system includes three unary 
operators on types: "*", "+", and "?", corresponding respectively to zero or 
more instances of the type, one or more instances of the type, or an optional 
instance of the type.</P>
<P>The "&amp;" operator builds the "interleaved product" of two types. The type 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> &amp; <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> matches any sequence that is an interleaving of two 
sequences of items, <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>, with <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> matching <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> matching <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. The interleaving of two sequences of items <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> is any sequence <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>0</FONT></SUB> such that there is an ordered partition of <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>0</FONT></SUB> into the two sub-sequences <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. The interleaved product captures the semantics of <B>all 
groups</B> in XML Schema, but is more general as it applies to arbitrary types. 
<B>All groups</B> in XML Schema are restricted to apply only on global or local 
element declarations with minOccurs 0 or 1, and maxOccurs 1.</P>
<P>For example, consider the types <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> = 
<CODE>xs:integer</CODE>,<CODE>xs:integer</CODE>,<CODE>xs:integer</CODE> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> = <CODE>xs:string</CODE>,<CODE>xs:string</CODE>. <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <CODE>= (1,2,3)</CODE> matches the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <CODE>= ("a","b")</CODE> matches the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. Any of the following <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>0</FONT></SUB> are interleavings of <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>, and therefore match the type (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> &amp; <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>):</P>
<DIV class=exampleInner><PRE>Value0 = (1,2,3,"a","b")
Value0 = (1,2,"a",3,"b")
Value0 = (1,2,"a","b",3)
Value0 = (1,"a",2,3,"b")
Value0 = (1,"a",2,"b",3)
Value0 = (1,"a","b",2,3)
Value0 = ("a",1,2,3,"b")
Value0 = ("a",1,2,"b",3)
Value0 = ("a",1,"b",2,3)
Value0 = ("a","b",1,2,3)
</PRE></DIV>
<P><B>Types precedence order</B>. To improve readability when writing types, we 
assume the following precedence order between operators on types.</P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TH>#</TH>
    <TH>Operator</TH></TR>
  <TR>
    <TD>1</TD>
    <TD>| (choice)</TD></TR>
  <TR>
    <TD>2</TD>
    <TD>&amp; (interleaving)</TD></TR>
  <TR>
    <TD>3</TD>
    <TD>, (sequence)</TD></TR>
  <TR>
    <TD>4</TD>
    <TD>*, +, ? (occurrence)</TD></TR></TBODY></TABLE>
<P>Parenthesis can be used to enforce precedence. For instance</P>
<DIV class=exampleInner><PRE>  xs:string | xs:integer, xs:float*
</PRE></DIV>
<P>is equivalent to</P>
<DIV class=exampleInner><PRE>  xs:string | (xs:integer, (xs:float*))
</PRE></DIV>
<P>and a different precedence can be obtained by writing</P>
<DIV class=exampleInner><PRE>  ((xs:string | xs:integer), xs:float)*
</PRE></DIV>
<P><B>Examples</B></P>
<P><B>A sequence of elements</B></P>
<P>The "," operator builds the "sequence" of two types. For example,</P>
<DIV class=exampleInner><PRE>  element title of type xs:string, element year of type xs:integer
</PRE></DIV>
<P>is a sequence of an element title of type string followed by an element year 
of type integer.</P>
<P><B>The union of two element types</B></P>
<P>The "|" operator builds the "union" of two types. For example,</P>
<DIV class=exampleInner><PRE>  element editor of type xs:string | element bib:author
</PRE></DIV>
<P>means either an element editor of type string, or a reference to the global 
element <CODE>bib:author</CODE>.</P>
<P><B>An all group of two elements</B></P>
<P>The "&amp;" operator builds the "interleaved product" of two types. For 
example,</P>
<DIV class=exampleInner><PRE>  (element a &amp; element b) =
    element a, element b
  | element b, element a
</PRE></DIV>
<P>which specifies that the <CODE>a</CODE> and <CODE>b</CODE> elements can occur 
in any order.</P>
<P><B>An empty type</B></P>
<P>The following type matches the empty sequence.</P>
<DIV class=exampleInner><PRE>  empty
</PRE></DIV>
<P><B>A sequence of zero or more elements</B></P>
<P>The following type matches zero or more elements each of which can be a 
<CODE>surgeon</CODE> or a <CODE>plumber</CODE>.</P>
<DIV class=exampleInner><PRE>  (element surgeon | element plumber)*
</PRE></DIV>
<P><B>Notation</B></P>
<P>The grammar for <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
describe above is general enough to capture type infered for arbitrary 
expression, as well as to represent the content of an in <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A>. In a few cases, inference rules rely on the fact that a given type 
is a type validly describing the content of an element. To capture those cases, 
we introduce the following auxiliary grammar productions to describe more 
precisely the attribute declarations and the content model for an element.</P>
<H5><A id=N11152 name=N11152></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeModel 
      name=doc-fs-AttributeModel></A>[<SMALL>42&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeModel</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType">AttributeType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType">AttributeType</A> 
      "?")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel">AttributeModel</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel">AttributeModel</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementModel 
      name=doc-fs-ElementModel></A>[<SMALL>43&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementModel</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType">ElementType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType">ElementType</A> 
      "?")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel">ElementModel</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel">ElementModel</A>)<BR>| 
      ("(" ")")<BR>| "none"</CODE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_top_level_definitions name=sec_top_level_definitions></A>2.4.4 Top 
level definitions</H4>
<P>Top level definitions correspond to global element declarations, global 
attribute declarations and type definitions in XML Schema.</P>
<H5><A id=N111A4 name=N111A4></A>Type Definitions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Definitions 
      name=doc-fs-Definitions></A>[<SMALL>40&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Definitions</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Definition">Definition</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Definitions">Definitions</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Definition 
      name=doc-fs-Definition></A>[<SMALL>39&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Definition</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("define" "element" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName">ElementName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution">OptSubstitution</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable">OptNillable</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "attribute" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName">AttributeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "type" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation">TypeDerivation</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptSubstitution 
      name=doc-fs-OptSubstitution></A>[<SMALL>76&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptSubstitution</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Substitution">Substitution</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Substitution 
      name=doc-fs-Substitution></A>[<SMALL>41&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Substitution</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"substitutes" "for" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName">ElementName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeDerivation 
      name=doc-fs-TypeDerivation></A>[<SMALL>33&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeDerivation</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ComplexTypeDerivation">ComplexTypeDerivation</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeDerivation">AtomicTypeDerivation</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ComplexTypeDerivation 
      name=doc-fs-ComplexTypeDerivation></A>[<SMALL>34&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ComplexTypeDerivation</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation">Derivation</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed">OptMixed</A> 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AtomicTypeDerivation 
      name=doc-fs-AtomicTypeDerivation></A>[<SMALL>35&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AtomicTypeDerivation</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"restricts" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName">AtomicTypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Derivation 
      name=doc-fs-Derivation></A>[<SMALL>37&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Derivation</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("restricts" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A>)<BR>| 
      ("extends" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptMixed 
      name=doc-fs-OptMixed></A>[<SMALL>74&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptMixed</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Mixed">Mixed</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Mixed 
      name=doc-fs-Mixed></A>[<SMALL>38&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Mixed</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"mixed"</CODE></TD></TR></TBODY></TABLE>
<P>A type definition has a name (possibly anonymous) and a type derivation. In 
the case of a complex type, the derivation indicates whether it is derived by 
extension or restriction, its base type, and its content model, with an optional 
flag indicating if it has mixed content.</P>
<P>Note the type system allows recursive types, following the rules defined in 
<A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A>.</P>
<P><B>Example</B></P>
<P>For instance, the following complex type</P>
<DIV class=exampleInner><PRE> &lt;complexType name="UKAddress"&gt;
   &lt;complexContent&gt;
     &lt;extension base="ipo:Address"&gt;
       &lt;sequence&gt;
         &lt;element name="postcode" type="ipo:UKPostcode"/&gt;
       &lt;/sequence&gt;
       &lt;attribute name="exportCode" type="positiveInteger" fixed="1"/&gt;
     &lt;/extension&gt;
   &lt;/complexContent&gt;
 &lt;/complexType&gt;
</PRE></DIV>
<P>is represented as follows</P>
<DIV class=exampleInner><PRE>  define type UKAddress extends ipo:Address {
    attribute exportCode of type ipo:UKPostcode,
    element postcode of type positiveInteger
  };
</PRE></DIV>
<P><B>Example</B></P>
<P>In the case of simple types derived by union or list, the derivation is 
always a restriction from the base type <CODE>xs:anySimpleType</CODE>, and has a 
content which is a union of the member types, or a repetition of the item type. 
For instance, the two following simple type declarations</P>
<DIV class=exampleInner><PRE>&lt;xsd:simpleType name="listOfMyIntType"&gt;
  &lt;xsd:list itemType="myInteger"/&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="zipUnion"&gt;
  &lt;xsd:union memberTypes="USState FrenchRegion"/&gt;
&lt;/xsd:simpleType&gt;
</PRE></DIV>
<P>are represented as follows</P>
<DIV class=exampleInner><PRE>define type listOfMyIntType restricts xs:anySimpleType {
  myInteger*
}

define type zipUnion restricts xs:anySimpleType {
  USState | FrenchRegion
}
</PRE></DIV>
<P><B>Example</B></P>
<P>In the case of an atomic type, it just indicates its base type. For instance, 
the following type definition</P>
<DIV class=exampleInner><PRE>&lt;xsd:simpleType name="SKU"&gt;
 &lt;xsd:restriction base="xsd:string"&gt;
  &lt;xsd:pattern value="\d{3}-[A-Z]{2}"/&gt;
 &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;
</PRE></DIV>
<P>is represented as follow</P>
<DIV class=exampleInner><PRE>  define type SKU restrict xsd:string;
</PRE></DIV>
<P><B>Example</B></P>
<P>When the type derivation is omitted, the type derives by restriction from 
<CODE>xs:anyType</CODE>. For instance:</P>
<DIV class=exampleInner><PRE>  define type Bib { element book* } =
  define type Bib restricts xs:anyType { element book* }
</PRE></DIV>
<P><B>Example</B></P>
<P>Empty content can be indicated with the explicit empty sequence, or omitted, 
as in:</P>
<DIV class=exampleInner><PRE>  define type Bib { } =
  define type Bib { empty }
</PRE></DIV>
<P>Global element and attribute declarations always have a name and a reference 
to a (possibly anonymous) type. A global element declaration also may declare a 
substitution group for the element and whether the element is nillable.</P>
<P><B>Example</B></P>
<P>A type declaration with one element name of type <CODE>xs:string</CODE> 
follows by one or more elements street of type <CODE>xs:string</CODE>.</P>
<DIV class=exampleInner><PRE>  define type Address {
    element name of type xs:string,
    element street of type xs:string*
  }
</PRE></DIV>
<P><B>Example</B></P>
<P>A type declaration with complex content derived by extension</P>
<DIV class=exampleInner><PRE>  define type USAddress extends Address {
    element zip name of type xs:integer
  }
</PRE></DIV>
<P><B>Example</B></P>
<P>A type declaration with mixed content</P>
<DIV class=exampleInner><PRE>  define type Section mixed {
    (element h1 of type xs:string |
     element p of type xs:string |
     element div of type Section)*
  }
</PRE></DIV>
<P><B>Example</B></P>
<P>A type declaration with simple content derived by restriction</P>
<DIV class=exampleInner><PRE>  define type SKU restricts xs:string
</PRE></DIV>
<P><B>Example</B></P>
<P>An element declaration</P>
<DIV class=exampleInner><PRE>  define element address of type Address
</PRE></DIV>
<P><B>Example</B></P>
<P>An element declaration with a substitution group</P>
<DIV class=exampleInner><PRE>  define element usaddress substitutes for address of type USAddress
</PRE></DIV>
<P><B>Example</B></P>
<P>An element declaration which is nillable</P>
<DIV class=exampleInner><PRE>  define element zip nillable of type xs:integer
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_types_example name=sec_types_example></A>2.4.5 Example of a 
complete Schema</H4>
<P>Here is a schema describing purchase orders from <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-0">[XML 
Schema Part 0]</A>.</P>
<DIV class=exampleInner><PRE>  &lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;
  
   &lt;xsd:annotation&gt;
    &lt;xsd:documentation xml:lang="en"&gt;
     Purchase order schema for Example.com.
     Copyright 2000 Example.com. All rights reserved.
    &lt;/xsd:documentation&gt;
   &lt;/xsd:annotation&gt;
  
   &lt;xsd:element name="purchaseOrder" type="PurchaseOrderType"/&gt;
  
   &lt;xsd:element name="comment" type="xsd:string"/&gt;
  
   &lt;xsd:complexType name="PurchaseOrderType"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element name="shipTo" type="USAddress"/&gt;
     &lt;xsd:element name="billTo" type="USAddress"/&gt;
     &lt;xsd:element ref="comment" minOccurs="0"/&gt;
     &lt;xsd:element name="items"  type="Items"/&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="orderDate" type="xsd:date"/&gt;
   &lt;/xsd:complexType&gt;
  
   &lt;xsd:complexType name="USAddress"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element name="name"   type="xsd:string"/&gt;
     &lt;xsd:element name="street" type="xsd:string"/&gt;
     &lt;xsd:element name="city"   type="xsd:string"/&gt;
     &lt;xsd:element name="state"  type="xsd:string"/&gt;
     &lt;xsd:element name="zip"    type="xsd:decimal"/&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="country" type="xsd:NMTOKEN" fixed="US"/&gt;
   &lt;/xsd:complexType&gt;
  
   &lt;xsd:complexType name="Items"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element name="item" minOccurs="0" maxOccurs="unbounded"&gt;
      &lt;xsd:complexType&gt;
        &lt;xsd:sequence&gt;
         &lt;xsd:element name="productName" type="xsd:string"/&gt;
         &lt;xsd:element name="quantity"&gt;
          &lt;xsd:simpleType&gt;
           &lt;xsd:restriction base="xsd:positiveInteger"&gt;
            &lt;xsd:maxExclusive value="100"/&gt;
           &lt;/xsd:restriction&gt;
          &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="USPrice"  type="xsd:decimal"/&gt;
         &lt;xsd:element ref="comment"   minOccurs="0"/&gt;
         &lt;xsd:element name="shipDate" type="xsd:date" minOccurs="0"/&gt;
        &lt;/xsd:sequence&gt;
        &lt;xsd:attribute name="partNum" type="SKU" use="required"/&gt;
      &lt;/xsd:complexType&gt;
     &lt;/xsd:element&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
  
   &lt;!-- Stock Keeping Unit, a code for identifying products --&gt;
   &lt;xsd:simpleType name="SKU"&gt;
    &lt;xsd:restriction base="xsd:string"&gt;
     &lt;xsd:pattern value="\d{3}-[A-Z]{2}"/&gt;
    &lt;/xsd:restriction&gt;
   &lt;/xsd:simpleType&gt;
  
  &lt;/xsd:schema&gt;
</PRE></DIV>
<P>Here is the mapping of the above schema into the [XPath/XQuery] type 
system.</P>
<DIV class=exampleInner><PRE>  declare namespace xsd = "http://www.w3.org/2001/XMLSchema";

  define element purchaseOrder of type PurchaseOrderType;
 
  define element comment of type xsd:string;
  
  define type PurchaseOrderType {
    attribute orderDate of type xsd:date?,
    element shipTo of type USAddress,
    element billTo of type USAddress,
    element comment?,
    element items of type Items
  };

  define type USAddress {
    attribute country of type xsd:NMTOKEN,
    element name of type xsd:string,
    element street of type xsd:string,
    element city of type xsd:string,
    element state of type xsd:string,
    element zip of type xsd:decimal
  };

  define type Items {
    attribute partNum of type SKU,
    element item of type fs:anon1*
  };

  define type fs:anon1 {
    element productName of type xsd:string,
    element quantity of type fs:anon2,
    element USPrice of type xsd:decimal,
    element comment?,
    element shipDate of type xsd:date?
  };

  define type fs:anon2 restricts xsd:positiveInteger;

  define type SKU restrict xsd:string;
</PRE></DIV>
<P>Note that the two anonymous types in the <CODE>item</CODE> element 
declarations are mapping to types with names <EM>fs:</EM>anon<SUB><FONT 
size=2>1</FONT></SUB> and <EM>fs:</EM>anon<SUB><FONT size=2>2</FONT></SUB>.</P>
<P>The following additional definitions illustrate how more advanced XML Schema 
features (a complex type derived by extension, an anonymous simple type derived 
by restriction, and substitution groups) are represented in the [XPath/XQuery] 
type system.</P>
<DIV class=exampleInner><PRE>  &lt;complexType name="NYCAddress"&gt;
    &lt;complexContent&gt;
     &lt;extension base="USAddress"&gt;
      &lt;sequence&gt;
       &lt;element ref="apt"/&gt;
      &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;element name="apt"&gt;
    &lt;xsd:simpleType&gt;
     &lt;xsd:restriction base="xsd:positiveInteger"&gt;
      &lt;xsd:maxExclusive value="10000"/&gt;
     &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;
  &lt;/element&gt;

  &lt;element name="usaddress" substitutionGroup="address" type="USAddress"/&gt;
  &lt;element name="nycaddress" substitutionGroup="usaddress" type="NYCAddress"/&gt;
</PRE></DIV>
<P>The above definitions are mapped into the [XPath/XQuery] type system as 
follows:</P>
<DIV class=exampleInner><PRE>  define type NYCAddress extends USAddress {
    element apt
  }

  define element apt of type fs:anon3

  define type fs:anon3 restricts xsd:positiveInteger

  define element usaddress  substitutes for address of type USAddress
  define element nycaddress substitutes for usaddress of type NYCAddress
</PRE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_fando name=sec_fando></A>2.5 Functions and operators</H3>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document defines built-in functions available in 
[XPath/XQuery]. A number of these functions are used to define the 
[XPath/XQuery] semantics; those functions are listed in <A 
href="REC-xquery-semantics-20070123.htm#sec_used_functions"><B>[C.1 
Functions and Operators used in the Formal Semantics]</B></A>.</P>
<P>Many functions in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document are <EM>generic</EM>: they perform operations on 
arbitrary components of the data model, e.g., any kind of node, or any sequence 
of items. For instance, the <CODE>fn:unordered</CODE> returns its input sequence 
in an implementation-dependent order. The signature of the 
<CODE>fn:unordered</CODE> function takes arbitrary items as input and 
output:</P>
<DIV class=exampleInner><PRE>  fn:unordered($sourceSeq as item()*) as item()*
</PRE></DIV>
<P>As defined, this signature provides little useful type information. For such 
functions, better type information can often be obtained by having the output 
type depend on the type of input parameters. For instance, if the function 
<CODE>fn:unordered</CODE> is applied on a sequence of <CODE>a</CODE> elements, 
the result is also a sequence of <CODE>a</CODE> elements.</P>
<P>In order to provide better static typing for those functions, specific static 
typing rules are given in <A 
href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
Additional Semantics of Functions]</B></A>.</P></DIV></DIV>
<DIV class=div1>
<H2><A id=id-basics name=id-basics></A>3 Basics</H2>
<P>The organization of this section parallels the organization of <A 
href="http://www.w3.org/TR/xquery#id-basics">Section 2 
Basics</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<DIV class=div2>
<H3><A id=sec_context name=sec_context></A>3.1 Expression Context</H3>
<P><B>Introduction</B></P>
<P>The expression context for a given expression consists of all the information 
that can affect the result of the expression. This information is organized into 
the <EM>static context</EM> and the <EM>dynamic context</EM>. This section 
specifies the environments that represent the context information used by 
[XPath/XQuery] expressions.</P>
<DIV class=div3>
<H4><A id=static_context name=static_context></A>3.1.1 Static Context</H4>
<P><B>Notation</B></P>
<P>We introduce the following auxiliary grammar production to describe function 
signatures.</P>
<H5><A id=N1137E name=N1137E></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FunctionSig 
      name=doc-fs-FunctionSig></A>[<SMALL>85&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FunctionSig</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "function" expanded-QName "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeList">TypeList</A>? 
      ")" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-TypeList 
      name=doc-fs-TypeList></A>[<SMALL>86&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>TypeList</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A>)*</CODE></TD></TR></TBODY></TABLE>
<P id=xq_stat_env><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
denotes the environment available during static analysis. Static analysis may 
extend parts of the static environment. The static environment is also available 
during dynamic evaluation.</P>
<P>If analysis of an expression relies on some component of the static context 
that has not been assigned a value, a static error is raised.</P>
<P id=xq_stat_env_def>The following environment components are part of the 
static environment:</P>
<TABLE class=figure cellPadding=5 summary="">
  <COLGROUP>
  <COL width="10%">
  <COL width="15%">
  <COL align=justify width="65%">
  <COL width="10%">
  <TBODY>
  <TR>
    <TD></TD>
    <TD id=xq_xpath_compat_flag vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_xpath_compat_flag">xpath1.0_compatibility</A></TD>
    <TD>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_xpath_compat_flag">xpath1.0_compatibility</A> 
            environment component designates the <B>XPath 1.0 compatibility 
            flag</B> in the [XPath/XQuery] static context. It specifies whether 
            the semantic rules for backward compatibility with XPath 1.0 are in 
            effect. This document defines the formal semantics for XPath 2.0 
            only when the XPath 1.0 backward compatibility rules are not in 
            effect.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_ns_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A></TD>
    <TD><A id=term_active name=term_active></A>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
            environment component designates the <B>statically known 
            namespaces</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
            environment component maps a namespace prefix (<EM>NCName</EM>) onto 
            a <B>namespace kind</B> and a namespace URI (<EM>AnyURI</EM>), the 
            null namespace (#NULL-NAMESPACE), or (#UNDECLARED). The namespace 
            kind is either <B>passive</B> or <B>active</B>. The namespace kind 
            determines whether a namespace node is created for an element during 
            element construction. The (#UNDECLARED) value may be used to 
            indicate that the prefix has been undeclared, and may occur only if 
            the implementation supports <A 
            href="REC-xquery-semantics-20070123.htm#XMLNAMES11">[XML 
            Names 1.1]</A>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_elem_ns_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A> 
            environment component designates the <B>default element/type 
            namespace</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A> 
            environment component contains a namespace URI (a <EM>AnyURI</EM>) 
            or the null namespace (#NULL-NAMESPACE) and is used for any 
            unprefixed QName appearing in a position where an element or type 
            name is expected.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_fn_ns_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A> 
            environment component designates the <B>default function 
            namespace</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A> 
            environment component contains a namespace URI (a <EM>AnyURI</EM>) 
            or the null namespace (#NULL-NAMESPACE) and is used for any 
            unprefixed QName appearing as the function name in a function 
          call.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_type_defn vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A> 
            environment component designates the <B>in-scope schema types</B> in 
            the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A> 
            environment component maps expanded type names (expanded <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>s) 
            onto their type definition (<A 
            href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A>). 
            A type name may be globally declared or 
      anonymous.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_elem_decl vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A> 
            environment component designates the <B>in-scope element 
            declarations</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A> 
            environment component maps expanded element names (expanded <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A>s) 
            onto their declaration (<A 
            href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_attr_decl vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A> 
            environment component designates the <B>in-scope attribute 
            declarations</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A> 
            environment component maps expanded attribute names (expanded <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A>s) 
            onto their declaration (<A 
            href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_type_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A> 
            environment component designates the <B>in-scope variables</B> in 
            the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A> 
            environment component maps expanded variable names (expanded 
            <EM>VarName</EM>) to their static type (<A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>).</TD></TR>
        <TR>
          <TD>The <B>context item static type</B> in the [XPath/XQuery] static 
            context is represented by the binding of the variable <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            to its corresponding type in <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_functy_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A> 
            environment component designates the <B>function signatures</B> in 
            the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A> 
            environment component stores the static type signatures of 
            functions. Because [XPath/XQuery] allows multiple functions with the 
            same name differing in the number of parameters, this environment 
            component maps an expanded <EM>QName</EM> and an arity to a function 
            signature <EM>FunctionSig</EM>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_collations_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_collations_env">collations</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collations_env">collations</A> 
            environment component designates the <B>statically known 
            collations</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collations_env">collations</A> 
            environment component maps a unique namespace URI (a 
            <EM>AnyURI</EM>) to a pair of functions: the first function takes a 
            set of strings and returns a sequence containing those strings in 
            sorted order; and the second function takes two strings, returns 
            true if they are considered equal, and false if 
      not.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_collation_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_collation_env">defaultCollation</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collation_env">defaultCollation</A> 
            environment component designates the <B>default collation</B> in the 
            [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collation_env">defaultCollation</A> 
            environment component is a pair of functions as described in <A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collations_env">collations</A> 
            above.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_construction_mode_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
            environment component designates the <B>construction mode</B> in the 
            [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
            environment component is one of <B>preserve</B> or 
        <B>strip</B>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_ordering_mode_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
            environment component designates the <B>ordering mode</B> in the 
            [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
            environment component is one of <B>ordered</B> or 
          <B>unordered</B>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_empty_order vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_empty_order">defaultEmptySequenceOrder</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_empty_order">defaultEmptySequenceOrder</A> 
            environment component designates the <B>default order for empty 
            sequences</B> in the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_empty_order">defaultEmptySequenceOrder</A> 
            environment component controls whether an empty sequence is 
            interpreted as the greatest value or as the least value during 
            processing of an <CODE>order by</CODE> clause in a FLWOR expression. 
            Its value may be <CODE>greatest</CODE> or 
        <CODE>least</CODE>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_boundary_space vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_boundary_space">boundarySpace</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_boundary_space">boundarySpace</A> 
            environment component designates the <B>boundary-space policy</B> in 
            the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_boundary_space">boundarySpace</A> 
            environment component controls the processing of boundary whitespace 
            by element constructors. Its value may be <CODE>preserve</CODE> or 
            <CODE>strip</CODE>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_copy_namespaces_mode vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_copy_namespaces_mode">copyNamespacesMode</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_copy_namespaces_mode">copyNamespacesMode</A> 
            environment component designates the <B>copy-namespaces mode</B> in 
            the [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_copy_namespaces_mode">copyNamespacesMode</A> 
            environment component controls the namespace bindings that are 
            assigned when an existing element node is copied by an element 
            constructor. Its value consists of two parts: <CODE>preserve</CODE> 
            or <CODE>no-preserve</CODE>, and <CODE>inherit</CODE> or 
            <CODE>no-inherit</CODE>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_base_uri_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_base_uri_env">baseURI</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_base_uri_env">baseURI</A> 
            environment component designates the <B>base URI</B> in the 
            [XPath/XQuery] static context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_base_uri_env">baseURI</A> 
            environment component contains a unique namespace URI (a 
            <EM>AnyURI</EM>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_doc_type_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A> 
            environment component designates the <B>statically known 
            documents</B> in the [XPath/XQuery] static context. It contains the 
            static type for the input documents, and is used to provide the 
            static type to the <CODE>fn:doc</CODE> function.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A> 
            environment component contains bindings from input URIs (a 
            <EM>AnyURI</EM>) to types (a <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_collection_type_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A> 
            environment component designates the <B>statically known 
            collections</B> in the [XPath/XQuery] static context. It contains 
            the static type for the input collections, and is used to provide 
            the static type to the <CODE>fn:collection</CODE> function.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A> 
            environment component contains bindings from input URIs (a 
            <EM>AnyURI</EM>) to types (a <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_collection_type_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_collection_type_env">defaultCollectionType</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collection_type_env">defaultCollectionType</A> 
            environment component designates the <B>statically known default 
            collection type</B> in the [XPath/XQuery] static context. It 
            contains the static type for the default collection, and is used to 
            provide the static type to the <CODE>fn:collection</CODE> function 
            when called with no arguments.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collection_type_env">defaultCollectionType</A> 
            environment component contains type (a <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR></TBODY></TABLE>
<P>Note that the boundary-space behavior is not formally specified in this 
document.</P>
<P id=xq_default_stat_env>An initial environment is set up when 
[expression/query] processing begins, containing, for example, the function 
signatures of all built-in functions. The initial values for the static context 
are defined in <A 
href="http://www.w3.org/TR/xquery#id-xq-context-components">Section C Context 
Components</A><SUP><SMALL>XQ</SMALL></SUP> and <A 
href="http://www.w3.org/TR/xpath20/#id-xp-context-components">Section C Context 
Components</A><SUP><SMALL>XP</SMALL></SUP> and is denoted by <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_default_stat_env">statEnvDefault</A> 
in the Formal Semantics.</P>
<P>Here is an example that shows how the static environment is modified in 
response to a namespace definition.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, <EM>AnyURI</EM>)) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <CODE>declare namespace</CODE> <EM>NCName</EM> = <EM>URILiteral</EM>; 
      <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>This rule reads as follows: "the phrase on the bottom (a namespace 
declaration in the query prolog followed by an expression) is well-typed 
(accepted by the static typing rules) within an environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<EM>if</EM> the expression above the line is well-typed in the environment 
obtained from <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
by adding the namespace declaration".</P>
<P id=fs_activeNS>The helper function <A 
href="REC-xquery-semantics-20070123.htm#fs_activeNS">fs:<CODE>active_ns</CODE></A>(<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>) 
returns all the active in-scope namespaces in the given static environment.</P>
<P id=fs_ns_from_items>For each attribute and element node in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>, 
such that the node has name <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
in the namespace <EM>AnyURI</EM>, the helper function <A 
href="REC-xquery-semantics-20070123.htm#fs_ns_from_items">fs:<CODE>get_static_ns_from_items</CODE></A>(<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>) 
returns the in-scope namespace that corresponds to <EM>AnyURI</EM>. This is a 
reverse-lookup on <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
by <EM>AnyURI</EM>.</P>
<DIV class=div4>
<H5><A id=id-expanded-qnames name=id-expanded-qnames></A>3.1.1.1 Resolving 
QNames to Expanded QNames</H5>
<P>A common use of the static environment is to expand a <EM>QName</EM> by 
looking up the URI that corresponds to the QName's namespace prefix in the <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
environment component and by constructing an <A 
href="http://www.w3.org/TR/xpath-datamodel/#dt-expanded-qname">expanded-QName</A><SUP> 
<SMALL>DM</SMALL></SUP>, which contains the URI and the QName's local part. 
Element and type names may be in the null namespace, that is, there is no URI 
associated with their namespace prefix. The null namespace is denoted by the 
special value <CODE>#NULL-NAMESPACE</CODE>.</P>
<P>The auxiliary judgments below expand an element, type, attribute, variable, 
or function <EM>QName</EM> by looking up the namespace prefix in <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
or, if the QName is unqualified, by using the appropriate default namespace.</P>
<P><B>Notation</B></P>
<P id=jd_elem_qname_expands_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
elem/type expands to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></DIV>
<P>holds when the element or type QName expands to the given expanded QName.</P>
<P id=jd_attr_qname_expands_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
attr expands to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></DIV>
<P>holds when the attribute QName expands to the given expanded QName.</P>
<P>We use <EM>Variable</EM> to denote the expanded QNames of variables.</P>
<P id=jd_var_qname_expands_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
var expands to</B></A> <EM>Variable</EM></DIV>
<P>holds when the variable QName expands to the given expanded QName.</P>
<P id=jd_func_qname_expands_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
func expands to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></DIV>
<P>holds when the function QName expands to the given expanded QName.</P>
<P><B>Semantics</B></P>
<P>Note that none of the inference rules can infer a resolved name in the case a 
given namespace prefix is bound to the (#UNDECLARED) value. As a result, 
namespace resolution will fail if the implementation supports <A 
href="REC-xquery-semantics-20070123.htm#XMLNAMES11">[XML 
Names 1.1]</A> and a given namespace prefix has been undeclared.</P>
<P>An element or type QName consisting of a prefix NCName and a local part 
NCName expands to the URI (or the null namespace) corresponding to that prefix 
and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
      size=2>1</FONT></SUB>) = (<A 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI-or-#NULL-NAMESPACE</EM>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB>:<EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
      elem/type expands to</B></A> (<EM>AnyURI-or-#NULL-NAMESPACE</EM>, 
      <EM>NCName</EM><SUB><FONT 
size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>An element or type QName consisting only of a local part NCName expands to 
the default element/type namespace and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A> 
      = <EM>AnyURI-or-#NULL-NAMESPACE</EM></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
      elem/type expands to</B></A> (<EM>AnyURI-or-#NULL-NAMESPACE</EM>, 
      <EM>NCName</EM>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>An attribute QName consisting of a prefix NCName and a local part NCName 
expands to the URI (or the null namespace) corresponding to the prefix and the 
local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
      size=2>1</FONT></SUB>) = (<A 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI-or-#NULL-NAMESPACE</EM>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB>:<EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
      attr expands to</B></A> (<EM>AnyURI-or-#NULL-NAMESPACE</EM>, 
      <EM>NCName</EM><SUB><FONT 
size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>An attribute QName consisting only of a local part NCName expands to the null 
namespace and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
      attr expands to</B></A> (#NULL-NAMESPACE, 
<EM>NCName</EM>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>A variable QName consisting of a prefix NCName and a local part NCName 
expands to the URI that corresponds to the prefix and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
      size=2>1</FONT></SUB>) = (<A 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB>:<EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
      var expands to</B></A> (<EM>AnyURI</EM>, <EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>A variable QName consisting only of a local part NCName expands to the null 
namespace and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
      var expands to</B></A> (#NULL-NAMESPACE, 
<EM>NCName</EM>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>A function QName consisting of a prefix NCName and a local part NCName 
expands to the URI that corresponds to the prefix and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
      size=2>1</FONT></SUB>) = (<A 
      href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB>:<EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
      func expands to</B></A> (<EM>AnyURI</EM>, <EM>NCName</EM><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>A function QName consisting only of a local part NCName expands to the 
default function namespace URI and the local part.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A> 
      = <EM>AnyURI</EM></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>NCName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
      func expands to</B></A> (<EM>AnyURI</EM>, 
<EM>NCName</EM>)</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div3>
<H4><A id=eval_context name=eval_context></A>3.1.2 Dynamic Context</H4>
<P id=xq_dyn_env_def><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
denotes the environment available during dynamic evaluation. Dynamic evaluation 
may extend parts of the dynamic environment.</P>
<P>If evaluation of an expression relies on some component of the dynamic 
context that has not been assigned a value, a dynamic error is raised.</P>
<P>The following environment components are part of the dynamic environment:</P>
<TABLE class=figure cellPadding=5 summary="">
  <COLGROUP>
  <COL width="10%">
  <COL width="15%">
  <COL align=justify width="65%">
  <COL width="10%">
  <TBODY>
  <TR>
    <TD></TD>
    <TD id=xq_val_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A> 
            environment component corresponds to the <B>variable values</B>, the 
            <B>context item</B>, the <B>context position</B> and the <B>context 
            size</B> in the [XPath/XQuery] evaluation context.</TD></TR>
        <TR>
          <TD>The dynamic value environment component maps an expanded 
            variable name (expanded <EM>VarName</EM>) to the variable's value 
            (<A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>) 
            or to the value <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>), if the 
            variable is defined in the imported module with namespace 
            <EM>AnyURI</EM>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_func_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A> 
            environment component corresponds to the <B>function 
            implementations</B> (or definition) part of the [XPath/XQuery] 
            dynamic context.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A> 
            environment component maps an expanded function name and parameter 
            signature of the form "<A 
            href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
            (<A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
            size=2>1</FONT></SUB>, ..., <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
            size=2>n</FONT></SUB>)" to the remainder of the corresponding 
            function definition. If the function is defined in <A 
            href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
            and Operators]</A>, the function definition is the value 
            <CODE>#BUILT-IN</CODE>. If the function is externally defined, the 
            function definition is the value <CODE>#EXTERNAL</CODE>. If the 
            function is defined in the imported module with namespace 
            <EM>AnyURI</EM>, the function definition is the value 
            <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>). If the function is locally 
            declared, the function definition is of the form "(<EM>Expr</EM>, 
            <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB>,..., 
            <EM>Variable</EM><SUB><FONT size=2>n</FONT></SUB>)", where 
            <EM>Expr</EM> is the function body and <EM>Variable</EM><SUB><FONT 
            size=2>1</FONT></SUB>, ..., <EM>Variable</EM><SUB><FONT 
            size=2>n</FONT></SUB> are the function parameters.</TD></TR>
        <TR>
          <TD>The initial function environment component (<A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A>.funcDefn) 
            maps the signatures of the internal functions defined in <A 
            href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
            Mapping of Overloaded Internal Functions]</B></A> and the signatures 
            of the functions defined in <A 
            href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
            and Operators]</A> to <CODE>#BUILT-IN</CODE>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_date_time_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_date_time_env">dateTime</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_date_time_env">dateTime</A> 
            environment component corresponds to the <B>current dateTime</B> in 
            the [XPath/XQuery] dynamic context.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_timezone_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_timezone_env">timezone</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_timezone_env">timezone</A> 
            environment component corresponds to the <B>implicit timezone</B> in 
            the [XPath/XQuery] dynamic context and is used by the timezone 
            related functions in <A 
            href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
            and Operators]</A>.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_doc_value_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_doc_value_env">docValue</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_doc_value_env">docValue</A> 
            environment component corresponds to the <B>available documents</B> 
            in the [XPath/XQuery] dynamic context. It contains the document 
            nodes corresponding to input documents, and is used to provide the 
            dynamic value of the <CODE>fn:doc</CODE> function.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_doc_value_env">docValue</A> 
            environment component contains bindings from input URIs (a 
            <EM>AnyURI</EM>) to documents (a <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A>).</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_collection_value_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_collection_value_env">collectionValue</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collection_value_env">collectionValue</A> 
            environment component corresponds to the <B>available 
            collections</B> in the [XPath/XQuery] dynamic context. It contains 
            the root nodes corresponding to the input collections, and is used 
            to provide the dynamic value of the <CODE>fn:collection</CODE> 
            function.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_collection_value_env">collectionValue</A> 
            environment component contains bindings from input URIs (a 
            <EM>AnyURI</EM>) to a sequence of nodes.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR>
  <TR>
    <TD></TD>
    <TD id=xq_default_collection_value_env vAlign=top><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_collection_value_env">defaultCollectionValue</A></TD>
    <TD>
      <TABLE>
        <TBODY>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collection_value_env">defaultCollectionValue</A> 
            environment component corresponds to the <B>default collection</B> 
            in the [XPath/XQuery] dynamic context. It contains the sequence of 
            nodes corresponding to the default collection, and is used to 
            provide the dynamic value of the <CODE>fn:collection</CODE> function 
            when called with no arguments.</TD></TR>
        <TR>
          <TD>The <A class=env 
            href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
            class=env 
            href="REC-xquery-semantics-20070123.htm#xq_default_collection_value_env">defaultCollectionValue</A> 
            environment component contains a sequence of 
      nodes.</TD></TR></TBODY></TABLE></TD>
    <TD></TD></TR></TBODY></TABLE>
<P id=xq_default_dyn_env>The initial values for the dynamic context are defined 
in <A href="http://www.w3.org/TR/xquery#id-xq-context-components">Section C 
Context Components</A><SUP><SMALL>XQ</SMALL></SUP> and <A 
href="http://www.w3.org/TR/xpath20/#id-xp-context-components">Section C Context 
Components</A><SUP><SMALL>XP</SMALL></SUP>. The corresponding initial dynamic 
environment is denoted by <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A> 
in the Formal Semantics.</P>
<P id=fs_builtin_vars>The following Formal Semantics variables represent the 
<B>context item</B>, <B>context position</B>, and <B>context size</B> properties 
of the dynamic context:</P>
<TABLE summary="" border=1>
  <TBODY>
  <TR>
    <TD>Built-in Variable&nbsp;&nbsp;</TD>
    <TD>Represents:</TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A></TD>
    <TD>context item</TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A></TD>
    <TD>context position</TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A></TD>
    <TD>context size</TD></TR></TBODY></TABLE>
<P>Within this document, variables with the "fs" prefix are reserved for use in 
the formal specification. Values of <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
can be obtained by invoking the <CODE>fn:position</CODE> and 
<CODE>fn:last</CODE> functions, respectively. Note that the type for those 
variables is obtained as for any other variables. As expected the type of <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
is always <CODE>xs:integer</CODE> while the type of <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
depends on the context in which it is being used.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=id-processing-model name=id-processing-model></A>3.2 Processing 
Model</H3>
<P>This section reviews the processing model for [XPath/XQuery]. The 
[XPath/XQuery] processing model is defined normatively in <A 
href="http://www.w3.org/TR/xquery#id-processing-model">Section 2.2 Processing 
Model</A><SUP><SMALL>XQ</SMALL></SUP>. This section also explains how the main 
notations (normalization rules, static typing rules, and dynamic evaluation 
rules) relate to the phases in that processing model.</P>
<DIV class=div3>
<H4><A id=id-fs-processing-model name=id-fs-processing-model></A>3.2.1 
Processing model</H4>
<P>The following figure depicts the [XPath/XQuery] processing model</P><IMG 
alt="Processing Model Overview" 
src="REC-xquery-semantics-20070123_files/ProcMod-XQuery.gif"> 
<P>Figure 1: Processing Model Overview</P>
<P>This processing model is not intended to describe an actual implementation, 
although a naive implementation might be based upon it. It does not prescribe an 
implementation technique, but any implementation should produce the same results 
as obtained by following this processing model and applying the rest of the 
Formal Semantics specification.</P>
<P>Query processing consists of two phases: a static analysis phase and a 
dynamic evaluation phase. Static analysis is further divided into four 
sub-phases. Typically, each phase consumes the result of the previous phase and 
generates output for the next phase. When processing query prologs, these phases 
may be mutually dependent (See <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A>). For each processing phase, we point to the 
relevant notations introduced later in the document.</P>
<P>[<A id=dt-static-analysis title="static analysis phase" 
name=dt-static-analysis>Definition</A>: The <B>static analysis phase</B> depends 
on the expression itself and on the static context. The <B>static analysis 
phase</B> does not depend on input data (other than schemas).]</P>
<P>The purpose of the static analysis phase is to detect errors, e.g., syntax 
errors or type errors, at compile time rather than at run-time. If no error 
occurs, the result of static analysis could be some compiled form of 
[expression/query], suitable for execution by a compiled-[expression/query] 
processor. Static analysis consists of the following sub-phases:</P>
<OL class=enumar>
  <LI>
  <P id=processing_parsing><B>Parsing.</B> (Step SQ1 in Figure 1). The grammar 
  for the [XPath/XQuery] syntax is defined in <A 
  href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
  1.0: An XML Query Language]</A>. Parsing may generate syntax errors. If no 
  error occurs, an internal operation tree of the parsed query is created.</P>
  <LI>
  <P id=processing_context><B>Static Context Processing.</B> (Steps SQ2, SQ3, 
  and SQ4 in Figure 1). The static semantics of [expression/query] depends on 
  the input static context. The input static context needs to be generated 
  before the [expression/query] can be analysed. In XQuery, the input static 
  context may be defined by the processing environment and by declarations in 
  the Query Prolog (See <A 
  href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
  Modules and Prologs]</B></A>). In XPath, the input static context is defined 
  by the processing environment. The static context is denoted by <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.</P>
  <LI>
  <P id=processing_normalization><B>Normalization.</B> (Step SQ5 in Figure 1). 
  To simplify the semantics specification, some normalization is performed on 
  the [expression/query]. The [XPath/XQuery] language provides many powerful 
  features that make [expression/query]s simpler to write and use, but are also 
  redundant. For instance, a complex <CODE>for</CODE> expression might be 
  rewritten as a composition of several simple <CODE>for</CODE> expressions. The 
  language composed of these simpler [expression/query] is called the 
  [XPath/XQuery] <EM>Core language</EM> and is described by a grammar which is a 
  subset of the XQuery grammar. The grammar of the [XPath/XQuery] Core language 
  is given in <A 
  href="REC-xquery-semantics-20070123.htm#sec_core"><B>[A 
  Normalized core and formal grammars]</B></A>.</P>
  <P>During the normalization phase, each [XPath/XQuery] [expression/query] is 
  mapped into its equivalent [expression/query] in the Core. (Note that this has 
  nothing to do with Unicode Normalization, which works on character strings.) 
  Normalization works by recursive application of the normalization rules over a 
  given expression.</P>
  <P>Specifically the normalization phase is defined in terms of the static part 
  of the context (<A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>) 
  and a [expression/query] (<EM>Expr</EM>) abstract syntax tree. Formal 
  notations for the normalization phase are introduced in <A 
  href="REC-xquery-semantics-20070123.htm#sec_normalization"><B>[3.2.2 
  Normalization mapping rules]</B></A>.</P>
  <P>After normalization, the full semantics is obtained by giving a semantics 
  to the normalized Core [expression/query]. This is done during the last two 
  phases.</P>
  <LI>
  <P id=processing_static><B>Static type analysis.</B> (Step SQ6 in Figure 1). 
  Static type analysis is optional. If this phase is not supported, then 
  normalization is followed directly by dynamic evaluation.</P>
  <P>Static type analysis checks whether each [expression/query] is well-typed, 
  and if so, determines its static type. Static type analysis is defined only 
  for Core [expression/query]. Static type analysis works by recursive 
  application of the static typing rules over a given expression.</P>
  <P>If the [expression/query] is not well-typed, static type analysis yields a 
  <EM>type error</EM>. For instance, a comparison between an integer value and a 
  string value might be detected as an type error during the static type 
  analysis. If static type analysis succeeds, it yields an abstract syntax tree 
  where each sub-expression is associated with its static type.</P>
  <P>More precisely, the static analysis phase is defined in terms of the static 
  context (<A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>) 
  and a Core [expression/query] (<EM>CoreExpr</EM>). Formal notations for the 
  static analysis phase are introduced in <A 
  href="REC-xquery-semantics-20070123.htm#sec_static"><B>[3.2.3 
  Static typing judgment]</B></A>.</P>
  <P>Static typing does not imply that the content of XML documents must be 
  rigidly fixed or even known in advance. The [XPath/XQuery] type system 
  accommodates "flexible" types, such as elements that can contain any content. 
  Schema-less documents are handled in [XPath/XQuery] by associating a standard 
  type with the document, such that it may include any legal XML 
  content.</P></LI></OL>
<P>If the static analysis phase succeeds, the dynamic evaluation phase 
(sometimes also called "execution") evaluates a query on input document(s).</P>
<OL class=enumar>
  <LI>
  <P id=dyn_processing_context><B>Dynamic Context Processing.</B> (Steps DQ2 and 
  DQ3 in Figure 1).The dynamic semantics of [expression/query] depends on the 
  dynamic input context. The dynamic input context needs to be generated before 
  the [expression/query] can be evaluated. The dynamic input context may be 
  defined by the processing environment and by statements in the Query Prolog 
  (See <A 
  href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
  Modules and Prologs]</B></A>). In XPath, the dynamic input context is defined 
  by the processing environment. The static input context is denoted by <A 
  class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.</P>
  <LI>
  <P id=processing_dynamic><B>Dynamic Evaluation.</B> (Steps DQ4 and DQ5 in 
  Figure 1). This phase computes the value of an [expression/query]. The 
  semantics of evaluation is defined only for Core [expression/query] terms. The 
  formal description of evaluation works by recursive application of the dynamic 
  evaluation rules over a given expression. Evaluation may result in a value OR 
  a dynamic error, which may be a non-type error or a type error. If static 
  typing of an expression does not raise a type error, then dynamic evaluation 
  of the same expression will not raise a type error (and thus dynamic type 
  checking can be avoided when static typing is enabled). Dynamic evaluation may 
  still raise a non-type error.</P>
  <P>The dynamic evaluation phase is defined in terms of the static context (<A 
  class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>) 
  and evaluation context (<A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>), 
  and a Core [expression/query] (<EM>CoreExpr</EM>). Formal notations for the 
  dynamic evaluation phase are introduced in <A 
  href="REC-xquery-semantics-20070123.htm#sec_evaluation"><B>[3.2.4 
  Dynamic evaluation judgment]</B></A>.</P></LI></OL>
<P>Static type analysis catches only certain classes of errors. For instance, it 
can detect a comparison operation applied between incompatible types (e.g., 
<CODE>xs:int</CODE> and <CODE>xs:date</CODE>). Some other classes of errors 
cannot be detected by the static analysis and are only detected at evaluation 
time. For instance, whether an arithmetic expression on 32 bit integers 
(<CODE>xs:int</CODE>) yields an out-of-bound value can only be detected at 
run-time by looking at the data.</P>
<P>While implementations are free to implement different processing models, the 
[XPath/XQuery] static semantics relies on the existence of a static type 
analysis phase that precedes any access to the input data.</P>
<P>The above processing phases are all internal to the [XPath/XQuery] processor. 
They do not deal with how the [XPath/XQuery] processor interacts with the 
outside world, notably how it accesses actual documents and types. A typical 
[expression/query] engine would support at least three other important 
processing phases:</P>
<OL class=enumar>
  <LI>
  <P><B>Schema Import Processing.</B> The [XPath/XQuery] type system is based on 
  XML Schema. In order to perform dynamic or static typing, the [XPath/XQuery] 
  processor needs to build type descriptions that correspond to the schema(s) of 
  the input documents. This phase is achieved by mapping all schemas required by 
  the [expression/query] into the [XPath/XQuery] type system. The XML Schema 
  import phase is described in <A 
  href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
  Importing Schemas]</B></A>.</P>
  <LI>
  <P><B>Data Model Generation.</B> Expressions are evaluated on values in the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>. XML documents must be loaded into the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A> before the evaluation phase. This is described in the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A> and is not discussed further here.</P>
  <LI>
  <P><B>Serialization.</B> Once the [expression/query] is evaluated, processors 
  might want to serialize the result of the [expression/query] as actual XML 
  documents. Serialization of data model instances is described in <A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A> and is not discussed further here.</P></LI></OL>
<P>The parsing phase is not specified formally; the formal semantics does not 
define a formal model for the syntax trees, but uses the [XPath/XQuery] concrete 
syntax directly. More details about parsing for XQuery 1.0 can be found in the 
<A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> document and more details about parsing for 
XPath 2.0 can be found in the <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A> document. No further discussion of parsing is 
included here.</P></DIV>
<DIV class=div3>
<H4><A id=sec_normalization name=sec_normalization></A>3.2.2 Normalization 
mapping rules</H4>
<P>Normalization is specified using <EM>mapping</EM> rules, which describe how a 
[XPath/XQuery] expression is rewritten into an expression in the [XPath/XQuery] 
Core. Mapping rules are also used in <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A> to specify how XML Schemas are imported into the 
[XPath/XQuery] type system.</P>
<P><B>Notation</B></P>
<P>Mapping rules are written using a square bracket notation, as follows:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>Object<FONT size=6>]</FONT><SUB><FONT 
      size=2>Subscript</FONT></SUB>, <EM>premises</EM></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>Mapped 
  Object</EM></TD></TR></TBODY></TABLE></DIV>
<P>The original "object", and an optional list of premises, is written above the 
<B>=</B> sign. The rewritten "object" is written beneath the <B>=</B> sign. The 
subscript is used to indicate what kind of "object" is mapped, and sometimes to 
pass some information between mapping rules. For instance, the mapping rule 
<FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
size=2>FunctionArgument(Type)</FONT></SUB></A> is used in the normalization of 
<A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A> and passes a sequence type as a parameter during 
normalization.</P>
<P>Since normalization is always applied in the presence of a static context, 
the above rule is a shorthand for:</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B>premises</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <FONT size=6>[</FONT>Object<FONT size=6>]</FONT> <SUB><FONT 
      size=2>Subscript</FONT></SUB> = Mapped 
Object</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<P>Most normalization rules have no premises, so they are omitted. The static 
environment is used in certain normalization rules (e.g. for normalization of 
function calls). To keep the notation simpler, the static environment is not 
written in the normalization rules, but it is assumed to be available.</P>
<P id=jd_map_expr>The normalization rule that is used to map "top-level" 
expressions in the [XPath/XQuery] syntax into expressions in the [XPath/XQuery] 
Core is:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle><EM>CoreExpr</EM></TD></TR></TBODY></TABLE></DIV>
<P>which indicates that the expression <EM>Expr</EM> is normalized to the 
expression <EM>CoreExpr</EM> in the [XPath/XQuery] Core (with the implied <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>). 
Note that <EM>Expr</EM> within the square brackets are the expression being 
normalized, while the <EM>Expr</EM> in the subscript indicate that this is the 
main normalization rule that applies to expressions. For instance, here is the 
normalization rule applied to the literal integer <CODE>1</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>1<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>1</TD></TR></TBODY></TABLE></DIV>
<P>To simplify the specification in some cases, some further normalization may 
be used on the right-hand side of a normalization rule. For instance, the 
following normalization rules for the <CODE>/</CODE> operator applies 
normalization to the expanded expression on the right-hand side.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>/<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>(<CODE>fn:root</CODE>(self::node()) treat as 
      document-node())<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B>Example</B></P>
<P>For instance, the following [expression/query]</P>
<DIV class=exampleInner><PRE>    for $i in (1, 2),
        $j in (3, 4)
    return
      element pair { ($i,$j) }
</PRE></DIV>
<P>is normalized to the Core expression</P>
<DIV class=exampleInner><PRE>    for $i in (1, 2) return
      for $j in (3, 4) return
          element pair { ($i,$j) }
</PRE></DIV>
<P>in which the "FWLR" expression is mapped into a composition of two simpler 
"for" expressions.</P></DIV>
<DIV class=div3>
<H4><A id=sec_static name=sec_static></A>3.2.3 Static typing judgment</H4>
<P>The static semantics is specified using <B>static typing rules</B>, which 
relate [XPath/XQuery] expressions to types and specify under what conditions an 
expression is well typed.</P>
<P><B>Notation</B></P>
<P id=jd_has_type>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds when, in the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
the expression <EM>Expr</EM> has type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<P><B>Example</B></P>
<P>The result of static type inference is to associate a static type with every 
[expression/query], such that any evaluation of that [expression/query] is 
guaranteed to yield a value that belongs to that type.</P>
<P>For instance, the following expression.</P>
<DIV class=exampleInner><PRE>   let $v := 3 return $v+5
</PRE></DIV>
<P>has type <CODE>xs:integer</CODE>. This can be inferred as follows: the 
literal '3' has type integer, so the variable $v also has type integer. Since 
the sum of two integers is an integer, the complete expression has type 
integer.</P>
<P><B>Note</B></P>
<P>The type of an expression is computed by inference. Static typing rules 
define for each kind of expression how to compute the type of the expression 
given the types of its sub-expressions. Here is a simple example:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <CODE>if</CODE> (<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>) 
      <CODE>then</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> 
      <CODE>else</CODE> <EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB> )</TD></TR></TBODY></TABLE><BR></DIV>
<P>This rule states that if the conditional expression of an "if" expression has 
type boolean, then the type of the entire expression is one of the two types of 
its "then" and "else" clauses. Note that the resulting type is represented as a 
union: '(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>|<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>3</FONT></SUB>)'.</P>
<P>The part after the <B>|-</B> and before <B>:</B> in the judgment 
<EM>below</EM> the line corresponds to some [expression/query], for which a type 
is computed. If the [expression/query] has been parsed into an internal abstract 
syntax tree, this usually corresponds to some node in that tree. The judgment 
usually has patterns in it (here <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, 
<EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>, and <EM>Expr</EM><SUB><FONT 
size=2>3</FONT></SUB>) that need to be matched against the children of the node 
in the abstract syntax tree. The judgments <EM>above</EM> the line indicate 
things that need to be computed to use this rule; in this case, the types of the 
condition expression and the two branches of the if-then-else expression. Once 
those types are computed (by further applying static typing rules recursively to 
those sub-expressions), then the type of the expression below the line can be 
computed. This example illustrates a general feature of the [XPath/XQuery] type 
system: the type of an expression depends only on the type of its 
sub-expressions. Static type inference is recursive, following the abstract 
syntax of the [expression/query]. At each point in the recursion, an inference 
rule whose conclusion has a structure that matches that of the premise in 
question is sought. If all the premises of a rule cannot be satisfied, then the 
static type inference has failed for the given expression, and the 
[expression/query] is not well-typed.</P></DIV>
<DIV class=div3>
<H4><A id=sec_evaluation name=sec_evaluation></A>3.2.4 Dynamic evaluation 
judgment</H4>
<P>The dynamic, or operational, semantics is specified using <B>dynamic 
evaluation rules</B>, which relate [XPath/XQuery] expressions to values, and in 
some cases specify the order in which an [XPath/XQuery] expression is 
evaluated.</P>
<P><B>Notation</B></P>
<P id=jd_yields>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></DIV>
<P>holds when, in the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
and dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>, 
the expression <EM>Expr</EM> yields the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</P>
<P>The static environment is used in certain cases (e.g. for type matching) 
during evaluation. To keep the notation simpler, the static environment is not 
written in the dynamic evaluation rules, but it is assumed to be available.</P>
<P>The inference rules used for dynamic evaluation, like those for static 
typing, follow a recursive structure, computing the value of expressions from 
the values of their sub-expressions.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_errors name=sec_errors></A>3.3 Error Handling</H3>
<P>Expressions can raise errors during static analysis or dynamic evaluation. 
The <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>, and <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A> specify the conditions under which an expression 
or operator raises an error. The user may raise an error explicitly by calling 
the <CODE>fn:error</CODE> function, which takes an optional item as an 
argument.</P>
<P>This document does not describe formally the conditions under which dynamic 
errors are raised. Notably, it does not specify the error codes or the rules 
about errors and optimization, as described in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>. Instead, this document describe the rules 
necessary to statically detect the subset of the [XPath/XQuery] dynamic errors 
known as <A href="http://www.w3.org/TR/xquery#dt-type-error">type 
error</A><SUP><SMALL>XQ</SMALL></SUP>.</P></DIV>
<DIV class=div2>
<H3><A id=id-important-concepts name=id-important-concepts></A>3.4 Concepts</H3>
<P>[XPath/XQuery] is most generally used to process <B>documents</B>. The 
representation of a document is normatively defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A>. The functions used to access documents and collections are 
normatively defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>.</P>
<DIV class=div3>
<H4><A id=id-doc-order name=id-doc-order></A>3.4.1 Document Order</H4>
<P>Document order is defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A>.</P></DIV>
<DIV class=div3>
<H4><A id=id-atomization name=id-atomization></A>3.4.2 Atomization</H4>
<P>Atomization converts an item sequence into a sequence of atomic values and is 
implemented by the <CODE>fn:data</CODE> function. Atomization is applied to a 
value when the value is used in a context in which a sequence of atomic values 
is required.</P></DIV>
<DIV class=div3>
<H4><A id=id-ebv name=id-ebv></A>3.4.3 Effective Boolean Value</H4>
<P>If a sequence of items is encountered where a boolean value is expected, the 
item sequence's effective boolean value is used. The <CODE>fn:boolean</CODE> 
function returns the effective boolean value of an item sequence.</P></DIV>
<DIV class=div3>
<H4><A id=id-input-sources name=id-input-sources></A>3.4.4 Input Sources</H4>
<P>[XPath/XQuery] has several functions that provide access to input data, 
described in <A href="http://www.w3.org/TR/xquery#id-input-sources">Section 
2.4.4 Input Sources</A><SUP><SMALL>XQ</SMALL></SUP>. These functions are of 
particular importance because they provide a way in which an expression can 
reference a document or a collection of documents. The dynamic semantics of 
these input functions are described in more detail in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>.</P></DIV>
<DIV class=div3>
<H4><A id=id-uri-literals name=id-uri-literals></A>3.4.5 URI Literals</H4>
<P>In certain places in the XQuery grammar, a statically known valid absolute 
URI is required. These places are denoted by the grammatical symbol 
<EM>URILiteral</EM>, and are treated as described in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=id-type-conversion name=id-type-conversion></A>3.5 Types</H3>
<DIV class=div3>
<H4><A id=id-predefined-types name=id-predefined-types></A>3.5.1 Predefined 
Schema Types</H4>
<P>All the built-in types of XML Schema are recognized by [XPath/XQuery]. In 
addition, [XPath/XQuery] recognizes the predefined types <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>, 
<A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
and the duration subtypes <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
. The definition of those types in the [XPath/XQuery] type system is given 
below.</P>
<P>[<A id=dt-xs_anyType title=xs:anyType name=dt-xs_anyType>Definition</A>: The 
following type definition of <B><SPAN><CODE>xs:anyType</CODE></SPAN></B> 
reflects the semantics of the Ur type from Schema in the [XPath/XQuery] type 
system.]</P>
<DIV class=exampleInner><PRE>  define type xs:anyType restricts xs:anyType {
    ( attribute * of type xs:anySimpleType )*,
    ( xs:anyAtomicType* | ( element * of type xs:anyType | text | comment | processing-instruction )* )
  }
</PRE></DIV>
<P>[<A id=dt-xs_anySimpleType title=xs:anySimpleType 
name=dt-xs_anySimpleType>Definition</A>: The following type definition of 
<B><SPAN><CODE>xs:anySimpleType</CODE></SPAN></B> reflects the semantics of the 
Ur simple type from Schema in the [XPath/XQuery] type system.]</P>
<DIV class=exampleInner><PRE>  define type xs:anySimpleType restricts xs:anyType {
    xs:anyAtomicType*
  }
</PRE></DIV>
<P>The name of the Ur simple type is <CODE>xs:anySimpleType</CODE>. It is 
derived by restriction from <CODE>xs:anyType</CODE>, its content is a sequence 
any atomic types.</P>
<P>[<A id=dt-xs_anyAtomicType title=xs:anyAtomicType 
name=dt-xs_anyAtomicType>Definition</A>: <SPAN>The following type definition of 
<B><SPAN><A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A></SPAN></B> 
reflects the semantics of <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
in the [XPath/XQuery] type system.</SPAN>]</P>
<DIV class=exampleInner><PRE>  define type xs:anyAtomicType restricts xs:anySimpleType {
    ( xs:string
    | xs:boolean
    | xs:decimal
    | xs:float
    | xs:double
    | xs:duration
    | xs:dateTime
    | xs:time
    | xs:date
    | xs:gYearMonth
    | xs:gYear
    | xs:gMonthDay
    | xs:gDay
    | xs:gMonth
    | xs:hexBinary
    | xs:base64Binary
    | xs:anyURI
    | xs:QName
    | xs:NOTATION
    | xs:untypedAtomic )
  }
</PRE></DIV>
<P>[<A id=dt-primitive-types title="primitive types" 
name=dt-primitive-types>Definition</A>: The following type definitions of <B>the 
XML Schema primitive types</B> reflect the semantics of the primitive types from 
Schema in the [XPath/XQuery] type system.]</P>
<DIV class=exampleInner><PRE>  define type xs:string       restricts xs:anyAtomicType
  define type xs:boolean      restricts xs:anyAtomicType
  define type xs:decimal      restricts xs:anyAtomicType
  define type xs:float        restricts xs:anyAtomicType
  define type xs:double       restricts xs:anyAtomicType
  define type xs:duration     restricts xs:anyAtomicType
  define type xs:dateTime     restricts xs:anyAtomicType
  define type xs:time         restricts xs:anyAtomicType
  define type xs:date         restricts xs:anyAtomicType
  define type xs:gYearMonth   restricts xs:anyAtomicType
  define type xs:gYear        restricts xs:anyAtomicType
  define type xs:gMonthDay    restricts xs:anyAtomicType
  define type xs:gDay         restricts xs:anyAtomicType
  define type xs:gMonth       restricts xs:anyAtomicType
  define type xs:hexBinary    restricts xs:anyAtomicType
  define type xs:base64Binary restricts xs:anyAtomicType
  define type xs:anyURI       restricts xs:anyAtomicType
  define type xs:QName        restricts xs:anyAtomicType
  define type xs:NOTATION     restricts xs:anyAtomicType
</PRE></DIV>
<P>All of those primitive types derive from <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>. 
Note that the value space of each atomic type (such as <CODE>xs:string</CODE>) 
does not appear. The value space for each type is built-in and is as defined in 
<A 
href="REC-xquery-semantics-20070123.htm#xmlschema-2">[Schema 
Part 2]</A>.</P>
<P>[<A id=dt-xs_untypedAtomic title=xs:untypedAtomic 
name=dt-xs_untypedAtomic>Definition</A>: The type <B><SPAN><A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></SPAN></B> 
is defined as follows.]</P>
<DIV class=exampleInner><PRE>  define type xs:untypedAtomic restricts xs:anyAtomicType
</PRE></DIV>
<P>Note that this rule does not indicate the value space of <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>. 
By definition, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
has the same value space as <CODE>xs:string</CODE>.</P>
<P>The following example shows two atomic values. The first one is a value of 
type string containing "Database". The second one is an untyped atomic value 
containing "Database".</P>
<DIV class=exampleInner><PRE>  "Databases" of type xs:string
  "Databases" of type xs:untypedAtomic
</PRE></DIV>
<P>[<A id=dt-xs_untyped title=xs:untyped name=dt-xs_untyped>Definition</A>: The 
type <B><SPAN><A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A></SPAN></B> 
is defined as follows.]</P>
<DIV class=exampleInner><PRE>  define type xs:untyped restricts xs:anyType {
    attribute * of type xs:untypedAtomic*,
    ( element * of type xs:untyped | text | comment | processing-instruction )*
  }
</PRE></DIV>
<P>[<A id=dt-derived-types title="derived types" 
name=dt-derived-types>Definition</A>: The following type definitions of the 
<B>XML Schema derived types</B> reflect the semantics of the XML Schema types 
derived by restriction from another atomic type.]</P>
<DIV class=exampleInner><PRE>  define type xs:normalizedString   restricts xs:string
  define type xs:token              restricts xs:normalizedString
  define type xs:language           restricts xs:token
  define type xs:NMTOKEN            restricts xs:token
  define type xs:Name               restricts xs:token
  define type xs:NCName             restricts xs:Name
  define type xs:ID                 restricts xs:NCName
  define type xs:IDREF              restricts xs:NCName
  define type xs:ENTITY             restricts xs:NCName
  define type xs:integer            restricts xs:decimal
  define type xs:nonPositiveInteger restricts xs:integer
  define type xs:negativeInteger    restricts xs:nonPositiveInteger
  define type xs:long               restricts xs:integer
  define type xs:int                restricts xs:long
  define type xs:short              restricts xs:int
  define type xs:byte               restricts xs:short
  define type xs:nonNegativeInteger restricts xs:integer
  define type xs:unsignedLong       restricts xs:nonNegativeInteger
  define type xs:unsignedInt        restricts xs:unsignedLong
  define type xs:unsignedShort      restricts xs:unsignedInt
  define type xs:unsignedByte       restricts xs:unsignedShort
  define type xs:positiveInteger    restricts xs:nonNegativeInteger
</PRE></DIV>
<P>Three XML Schema built-in derived types are derived by list, as follows. Note 
that those derive directly from <CODE>xs:anySimpleType</CODE>, since they are 
derived by list, and that their value space is defined using a "one or more" 
occurrence indicator.</P>
<DIV class=exampleInner><PRE>  define type xs:NMTOKENS restricts xs:anySimpleType { xs:NMTOKEN+ }
  define type xs:IDREFS   restricts xs:anySimpleType { xs:IDREF+ }
  define type xs:ENTITIES restricts xs:anySimpleType { xs:ENTITY+ }
</PRE></DIV>
<P>For example, here is an element whose content is of type 
<CODE>xs:IDREFS</CODE>.</P>
<DIV class=exampleInner><PRE>  element a of type xs:IDREFS {
    "id1" of type xs:IDREF,
    "id2" of type xs:IDREF,
    "id3" of type xs:IDREF
  }
</PRE></DIV>
<P>Note that the type name <CODE>xs:IDREFS</CODE> derives from 
<CODE>xs:anySimpleType</CODE>, but not from <CODE>xs:IDREF</CODE>. As a 
consequence, calling the following three XQuery functions with the element 
<CODE>a</CODE> as a parameter succeeds for <CODE>f1</CODE> and <CODE>f2</CODE>, 
but raises a type error for <CODE>f3</CODE>.</P>
<DIV class=exampleInner><PRE>  declare function f1($x as element(*,xs:anySimpleType)) { $x }
  declare function f2($x as element(*,xs:IDREFS)) { $x }
  declare function f3($x as element(*,xs:IDREF)) { $x }
</PRE></DIV>
<P>[<A id=dt-xs_durations title="Totally ordered duration types" 
name=dt-xs_durations>Definition</A>: <SPAN>The <B>totally ordered duration 
types</B>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
, are derived by restriction from <CODE>xs:duration</CODE>.</SPAN>]</P>
<DIV class=exampleInner><PRE>  define type xs:yearMonthDuration restricts xs:duration
  define type xs:dayTimeDuration   restricts xs:duration
</PRE></DIV>
<P>[<A id=dt-fs_numeric title=fs:numeric name=dt-fs_numeric>Definition</A>: In 
addition, the Formal Semantics uses the additional type 
<EM>fs:</EM><CODE>numeric</CODE>. This type is necessary for the specification 
of some of XPath type conversion rules. It is defined as follows.]</P>
<DIV class=exampleInner><PRE>  define type fs:numeric restricts xs:anyAtomicType { xs:decimal | xs:float | xs:double }
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=id-typed-value name=id-typed-value></A>3.5.2 Typed Value and String 
Value</H4>
<P>The typed value of a node is computed by the <CODE>fn:data</CODE> function, 
and the string value of a node is computed by the <CODE>fn:string</CODE> 
function, defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>. The normative definitions of typed value and string value 
are defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
Model]</A>.</P></DIV>
<DIV class=div3>
<H4><A id=id-sequencetype name=id-sequencetype></A>3.5.3 SequenceType 
Syntax</H4>
<P><B>Introduction</B></P>
<P>Sequence types can be used in [XPath/XQuery] to refer to an XML Schema type. 
Sequence types are used to declare the types of function parameters and in 
several [XPath/XQuery] expressions.</P>
<P>The syntax of sequence types is described by the following grammar 
productions.</P>
<H5><A id=N12456 name=N12456></A>SequenceType</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SequenceType 
      name=doc-xquery-SequenceType></A>[<SMALL>119&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SequenceType">SequenceType</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("empty-sequence" "(" ")")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ItemType">ItemType</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OccurrenceIndicator">OccurrenceIndicator</A>?)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ItemType 
      name=doc-xquery-ItemType></A>[<SMALL>121&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ItemType">ItemType</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-KindTest">KindTest</A> 
      | ("item" "(" ")") | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AtomicType">AtomicType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OccurrenceIndicator 
      name=doc-xquery-OccurrenceIndicator></A>[<SMALL>120&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OccurrenceIndicator">OccurrenceIndicator</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"?" | "*" | "+"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AtomicType 
      name=doc-xquery-AtomicType></A>[<SMALL>122&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AtomicType">AtomicType</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-KindTest 
      name=doc-xquery-KindTest></A>[<SMALL>123&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-KindTest">KindTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DocumentTest">DocumentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementTest">ElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AttributeTest">AttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaElementTest">SchemaElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaAttributeTest">SchemaAttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PITest">PITest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CommentTest">CommentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TextTest">TextTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AnyKindTest">AnyKindTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DocumentTest 
      name=doc-xquery-DocumentTest></A>[<SMALL>125&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DocumentTest">DocumentTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document-node" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementTest">ElementTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaElementTest">SchemaElementTest</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ElementTest 
      name=doc-xquery-ElementTest></A>[<SMALL>133&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ElementTest">ElementTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard">ElementNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeName">TypeName</A> 
      "?"?)?)? ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SchemaElementTest 
      name=doc-xquery-SchemaElementTest></A>[<SMALL>135&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SchemaElementTest">SchemaElementTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-element" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementDeclaration">ElementDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ElementDeclaration 
      name=doc-xquery-ElementDeclaration></A>[<SMALL>136&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ElementDeclaration">ElementDeclaration</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementName">ElementName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AttributeTest 
      name=doc-xquery-AttributeTest></A>[<SMALL>129&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AttributeTest">AttributeTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AttribNameOrWildcard">AttribNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeName">TypeName</A>)?)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SchemaAttributeTest 
      name=doc-xquery-SchemaAttributeTest></A>[<SMALL>131&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SchemaAttributeTest">SchemaAttributeTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-attribute" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AttributeDeclaration">AttributeDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AttributeDeclaration 
      name=doc-xquery-AttributeDeclaration></A>[<SMALL>132&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AttributeDeclaration">AttributeDeclaration</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AttributeName">AttributeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ElementNameOrWildcard 
      name=doc-xquery-ElementNameOrWildcard></A>[<SMALL>134&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ElementNameOrWildcard">ElementNameOrWildcard</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementName">ElementName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ElementName 
      name=doc-xquery-ElementName></A>[<SMALL>138&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ElementName">ElementName</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AttribNameOrWildcard 
      name=doc-xquery-AttribNameOrWildcard></A>[<SMALL>130&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AttribNameOrWildcard">AttribNameOrWildcard</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AttributeName">AttributeName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AttributeName 
      name=doc-xquery-AttributeName></A>[<SMALL>137&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AttributeName">AttributeName</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-TypeName 
      name=doc-xquery-TypeName></A>[<SMALL>139&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-TypeName">TypeName</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PITest 
      name=doc-xquery-PITest></A>[<SMALL>128&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PITest">PITest</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CommentTest 
      name=doc-xquery-CommentTest></A>[<SMALL>127&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CommentTest">CommentTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-TextTest 
      name=doc-xquery-TextTest></A>[<SMALL>126&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-TextTest">TextTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AnyKindTest 
      name=doc-xquery-AnyKindTest></A>[<SMALL>124&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AnyKindTest">AnyKindTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"node" "(" ")"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for sequence types are:</P>
<H5><A id=N125A5 name=N125A5></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SequenceType 
      name=doc-core-SequenceType></A>[<SMALL>76&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SequenceType">SequenceType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("empty-sequence" "(" ")")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ItemType">ItemType</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OccurrenceIndicator">OccurrenceIndicator</A>?)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ItemType 
      name=doc-core-ItemType></A>[<SMALL>78&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ItemType">ItemType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-KindTest">KindTest</A> 
      | ("item" "(" ")") | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType">AtomicType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OccurrenceIndicator 
      name=doc-core-OccurrenceIndicator></A>[<SMALL>77&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OccurrenceIndicator">OccurrenceIndicator</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"?" | "*" | "+"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AtomicType 
      name=doc-core-AtomicType></A>[<SMALL>79&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AtomicType">AtomicType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-KindTest 
      name=doc-core-KindTest></A>[<SMALL>80&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-KindTest">KindTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DocumentTest">DocumentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementTest">ElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeTest">AttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaElementTest">SchemaElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaAttributeTest">SchemaAttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PITest">PITest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CommentTest">CommentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TextTest">TextTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AnyKindTest">AnyKindTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-DocumentTest 
      name=doc-core-DocumentTest></A>[<SMALL>82&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DocumentTest">DocumentTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document-node" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementTest">ElementTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaElementTest">SchemaElementTest</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ElementTest 
      name=doc-core-ElementTest></A>[<SMALL>90&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementTest">ElementTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementNameOrWildcard">ElementNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeName">TypeName</A> 
      "?"?)?)? ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SchemaElementTest 
      name=doc-core-SchemaElementTest></A>[<SMALL>92&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaElementTest">SchemaElementTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-element" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementDeclaration">ElementDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ElementDeclaration 
      name=doc-core-ElementDeclaration></A>[<SMALL>93&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementDeclaration">ElementDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementName">ElementName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AttributeTest 
      name=doc-core-AttributeTest></A>[<SMALL>86&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeTest">AttributeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttribNameOrWildcard">AttribNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeName">TypeName</A>)?)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SchemaAttributeTest 
      name=doc-core-SchemaAttributeTest></A>[<SMALL>88&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaAttributeTest">SchemaAttributeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-attribute" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeDeclaration">AttributeDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AttributeDeclaration 
      name=doc-core-AttributeDeclaration></A>[<SMALL>89&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeDeclaration">AttributeDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeName">AttributeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ElementNameOrWildcard 
      name=doc-core-ElementNameOrWildcard></A>[<SMALL>91&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementNameOrWildcard">ElementNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementName">ElementName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ElementName 
      name=doc-core-ElementName></A>[<SMALL>95&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementName">ElementName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AttribNameOrWildcard 
      name=doc-core-AttribNameOrWildcard></A>[<SMALL>87&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttribNameOrWildcard">AttribNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeName">AttributeName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AttributeName 
      name=doc-core-AttributeName></A>[<SMALL>94&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeName">AttributeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-TypeName 
      name=doc-core-TypeName></A>[<SMALL>96&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeName">TypeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-PITest 
      name=doc-core-PITest></A>[<SMALL>85&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PITest">PITest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StringLiteral">StringLiteral</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CommentTest 
      name=doc-core-CommentTest></A>[<SMALL>84&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CommentTest">CommentTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-TextTest 
      name=doc-core-TextTest></A>[<SMALL>83&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TextTest">TextTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AnyKindTest 
      name=doc-core-AnyKindTest></A>[<SMALL>81&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AnyKindTest">AnyKindTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"node" "(" ")"</CODE></TD></TR></TBODY></TABLE>
<P>The semantics of SequenceTypes is defined by means of normalization rules 
from SequenceTypes into types in the [XPath/XQuery] type system (See <A 
href="REC-xquery-semantics-20070123.htm#sec_types"><B>[2.4 
The [XPath/XQuery] Type System]</B></A>).</P>
<P>However, the [XPath/XQuery] type system not being part of the [XPath/XQuery] 
syntax, the SequenceType syntax is still part of the [XPath/XQuery] Core. 
Normalization from SequenceTypes to types is not applied during the 
normalization phase but whenever a dynamic evaluation or static typing rule 
requires it.</P></DIV>
<DIV class=div3>
<H4><A id=id-sequencetype-matching name=id-sequencetype-matching></A>3.5.4 
SequenceType Matching</H4>
<P><B>Introduction</B></P>
<P>During processing of a query, it is sometimes necessary to determine whether 
a given value matches a type that was declared using the SequenceType syntax. 
This process is known as SequenceType matching, and is formally specified in <A 
href="REC-xquery-semantics-20070123.htm#sec_type_matching"><B>[8.3 
Judgments for type matching]</B></A>.</P>
<P><B>Notation</B></P>
<P id=jd_map_sequencetype>To define normalization of SequenceTypes to the 
[XPath/XQuery] type system, the following auxiliary mapping rule is used.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SequenceType</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>specifies that <EM>SequenceType</EM> is mapped to a <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>, 
in the [XPath/XQuery] type system.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>OccurenceIndicators are left unchanged when normalizing SequenceTypes into 
[XPath/XQuery] types. Each kind of SequenceType component is normalized 
separately into the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ItemType"><EM>ItemType</EM></A> 
      <EM>OccurrenceIndicator</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ItemType"><EM>ItemType</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A> 
  <EM>OccurrenceIndicator</EM></TD></TR></TBODY></TABLE></DIV>
<P>The "empty-sequence()" sequence type is mapped to the empty type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>empty-sequence()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>empty</TD></TR></TBODY></TABLE></DIV>
<P>An atomic type is normalized to itself in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>An "element" SequenceType without content or with a wildcard and no type name 
is normalized into a wildcard element type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>element()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element * of type 
      <CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>element(*)<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element * of type 
      <CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE></DIV>
<P>An "element" SequenceType with a wildcard and a type name is normalized into 
a wildcard element type with a corresponding type name. The presence of a "?" 
after the type name indicates a nillable element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>element(*,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element * of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>element(*,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>?)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element * nillable of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>An "element" SequenceType with a name and a type name is normalized into an 
element type with a corresponding type name. The presence of a "?" after the 
type name indicates a nillable element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>?)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      nillable of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>An "element" SequenceType with only a name is normalized into a 
<EM>nillable</EM> element type with a corresponding name. The reason for the 
normalization to allow nillable elements is because the semantics of 
SequenceTypes in that case allows it to match every possible element with that 
names, regardless of its type or nilled property.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      nillable of type <CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE></DIV>
<P>A "schema-element" SequenceType with an element declaration is normalized 
into a reference to the corresponding global element declaration.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>schema-element(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>An "attribute" SequenceType without content or with a wildcard and no type 
name is normalized into a wildcard attribute type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>attribute()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute * of type 
      <CODE>xs:anySimpleType</CODE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>attribute(*)<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute * of type 
      <CODE>xs:anySimpleType</CODE></TD></TR></TBODY></TABLE></DIV>
<P>An "attribute" SequenceType with a wildcard and a type name is normalized 
into a wildcard attribute type with a corresponding type name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>attribute(*,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute * of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>An "attribute" SequenceType with a name and a type name is normalized into an 
attribute type with a corresponding type name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>attribute(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>A "schema-attribute" SequenceType with an attribute declaration is normalized 
into a reference to the corresponding global attribute declaration.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>schema-attribute(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A></TD></TR></TBODY></TABLE></DIV>
<P>A "document-node()" sequence types is normalized into the corresponding 
document type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>document-node()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>document { (element * of type 
      <CODE>xs:anyType</CODE> | text | comment | processing-instruction)* 
  }</TD></TR></TBODY></TABLE></DIV>
<P>A "document-node" sequence type with an element test (resp. a schema element 
test) is normalized into the corresponding document type, whose content is the 
normalization of the element test (resp. schema element test), interleaved with 
an arbitrary sequence of processing instruction, comment, and text nodes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>document-node(<EM>ElementTest</EM>)<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>document { <FONT 
      size=6>[</FONT><EM>ElementTest</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A> &amp; ( processing-instruction | 
      comment ) *}</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>document-node(<EM>SchemaElementTest</EM>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>document { <FONT 
      size=6>[</FONT><EM>SchemaElementTest</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A> &amp; ( processing-instruction | 
      comment ) *}</TD></TR></TBODY></TABLE></DIV>
<P>A "processing-instruction()" SequenceType is normalized into the 
corresponding processing-instruction type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction()<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle>processing-instruction</TD></TR></TBODY></TABLE></DIV>
<P>The [XPath/XQuery] type system does not model the target of a 
processing-instruction, which is treated as a dynamic property. Therefore a 
"processing-instruction" SequenceType with a string or NCName parameter is 
normalized into an optional processing-instruction type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction(<EM>StringLiteral</EM>)<FONT size=6> 
      ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle>processing-instruction?</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction(<EM>NCName</EM>)<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle>processing-instruction?</TD></TR></TBODY></TABLE></DIV>
<P>A "comment()" SequenceType is normalized into the corresponding comment 
type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>comment()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle>comment</TD></TR></TBODY></TABLE></DIV>
<P>A "text()" SequenceType is normalized into the corresponding text type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>text()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>text</TD></TR></TBODY></TABLE></DIV>
<P>The "node()" SequenceType denotes any node. It is normalized into a choice 
between the corresponding wildcard types for each kind of node.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>node()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(element * of type 
      <CODE>xs:anyType</CODE> | attribute * of type 
      <CODE>xs:anySimpleType</CODE> | text | document { (element * of type 
      <CODE>xs:anyType</CODE> | text | comment | processing-instruction)* } | 
      comment | processing-instruction)</TD></TR></TBODY></TABLE></DIV>
<P>The "item()" SequenceType denotes any node or atomic value. It is normalized 
into a choice between the corresponding wildcard types for each kind of nodes or 
atomic values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>item()<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
      size=2>sequencetype</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(element * of type 
      <CODE>xs:anyType</CODE> | attribute * of type 
      <CODE>xs:anySimpleType</CODE> | text | document { (element * of type 
      <CODE>xs:anyType</CODE> | text | comment | processing-instruction)* } | 
      comment | processing-instruction | <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
      )</TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=comments name=comments></A>3.6 Comments</H3>
<H5><A id=N12AE4 name=N12AE4></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Comment 
      name=doc-xquery-Comment></A>[<SMALL>151&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Comment">Comment</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(:" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CommentContents">CommentContents</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Comment">Comment</A>)* 
      ":)"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CommentContents 
      name=doc-xquery-CommentContents></A>[<SMALL>159&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CommentContents">CommentContents</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A>+ 
      - (Char* ('(:' | ':)') Char*))</CODE></TD></TR></TBODY></TABLE>
<P>Comments are lexical constructs only, and have no effect on the meaning of 
the query, and therefore do not have any formal semantics.</P></DIV>
<DIV class=div2>
<H3><A id=xml-terminals name=xml-terminals></A>3.7 XML-defined Terminals</H3>
<P>The following terminals are defined by XML.</P>
<H5><A id=N12B0F name=N12B0F></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-PITarget 
      name=prod-xquery-PITarget></A>[<SMALL>152&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PITarget">PITarget</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-PITarget">[http://www.w3.org/TR/REC-xml#NT-PITarget]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-CharRef 
      name=prod-xquery-CharRef></A>[<SMALL>153&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CharRef">CharRef</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-CharRef">[http://www.w3.org/TR/REC-xml#NT-CharRef]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-QName 
      name=prod-xquery-QName></A>[<SMALL>154&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-QName">QName</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml-names/#NT-QName">[http://www.w3.org/TR/REC-xml-names/#NT-QName]</A><SUP> 
      <SMALL>Names</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-NCName 
      name=prod-xquery-NCName></A>[<SMALL>155&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NCName">NCName</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml-names/#NT-NCName">[http://www.w3.org/TR/REC-xml-names/#NT-NCName]</A><SUP> 
      <SMALL>Names</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-S 
      name=prod-xquery-S></A>[<SMALL>156&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-S">S</A><SUP><SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-S">[http://www.w3.org/TR/REC-xml#NT-S]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-xquery-Char 
      name=prod-xquery-Char></A>[<SMALL>157&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Char">Char</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-Char">[http://www.w3.org/TR/REC-xml#NT-Char]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div1>
<H2><A id=id-expressions name=id-expressions></A>4 Expressions</H2>
<P>This section gives the semantics of all the [XPath/XQuery] expressions. The 
organization of this section parallels the organization of <A 
href="http://www.w3.org/TR/xquery#id-expressions">Section 3 
Expressions</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<H5><A id=N12B94 name=N12B94></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Expr 
      name=doc-xquery-Expr></A>[<SMALL>31&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Expr">Expr</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ExprSingle 
      name=doc-xquery-ExprSingle></A>[<SMALL>32&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ExprSingle">ExprSingle</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FLWORExpr">FLWORExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QuantifiedExpr">QuantifiedExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeswitchExpr">TypeswitchExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-IfExpr">IfExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrExpr">OrExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xpath-XPath 
      name=doc-xpath-XPath></A>[<SMALL>1&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-XPath">XPath</A><SUP><SMALL> 
      XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Expr</CODE></TD></TR></TBODY></TABLE>
<P>For each expression, a short description and the relevant grammar productions 
are given. The semantics of an expression includes the normalization, static 
analysis, and dynamic evaluation phases. Recall that normalization rules 
translate [XPath/XQuery] syntax into Core syntax. In the sections that contain 
normalization rules, the Core grammar productions into which the expression is 
normalized are also provided. After normalization, sections on static type 
inference and dynamic evaluation define the static type and dynamic value for 
the Core expression.</P>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for expressions are:</P>
<H5><A id=N12BE2 name=N12BE2></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Expr 
      name=doc-core-Expr></A>[<SMALL>22&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ExprSingle 
      name=doc-core-ExprSingle></A>[<SMALL>23&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-FLWORExpr">FLWORExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-QuantifiedExpr">QuantifiedExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeswitchExpr">TypeswitchExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-IfExpr">IfExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrExpr">OrExpr</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>During static analysis, it is a type error for an expression to have the 
empty type, except for the following expressions and function calls:</P>
<UL>
  <LI>
  <P>Empty parentheses <CODE>()</CODE>, which denote the empty sequence.</P>
  <LI>
  <P>The <CODE>fn:data</CODE> function and all functions in the <EM>fs</EM> 
  namespace applied to empty parentheses <CODE>()</CODE>.</P>
  <LI>
  <P>Any function which returns the empty type.</P></LI></UL>
<P>The reason for these exceptions is that they are typically part of the result 
of normalizing a larger user-level expression and are used to capture the 
semantics of the user-level expression when applied to the empty sequence.</P>
<P>The rule below enforces the above constraints. It is a static type error, if 
the following conditions hold for a given expression <EM>Expr</EM>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <CODE>empty</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>Expr</EM> 
                  is the empty parentheses () or <CODE>fn:data</CODE> or any 
                  <EM>fs</EM> function applied to empty parentheses 
              ())</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD>A static type error is raised for expression 
                <EM>Expr</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In general, static type errors are raised whenever there is no static typing 
rules which can compute the type of a given expression. This is the reason for 
the absence of a formal post-condition in this rules. There is indeed a rule 
that infers the type for expression <EM>Expr</EM>, however the inferred type is 
empty and still a static type error must be raised.</P>
<P><B>Example</B></P>
<P>The above rule is useful in catching common mistakes, such as the misspelling 
of an element or attribute name or referencing of an element or attribute that 
does not exist. For instance, the following path expression</P>
<DIV class=exampleInner><PRE>  $x/title
</PRE></DIV>
<P>raises a static type error if the type of variable <CODE>$x</CODE> does not 
include any <CODE>title</CODE> children elements.</P>
<DIV class=div2>
<H3><A id=id-primary-expressions name=id-primary-expressions></A>4.1 Primary 
Expressions</H3>
<P><B>Primary expressions</B> are the basic primitives of the language. They 
include literals, variables, function calls, and the parenthesized 
expressions.</P>
<H5><A id=N12CC2 name=N12CC2></A>Primary Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PrimaryExpr 
      name=doc-xquery-PrimaryExpr></A>[<SMALL>84&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PrimaryExpr">PrimaryExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Literal">Literal</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarRef">VarRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ParenthesizedExpr">ParenthesizedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ContextItemExpr">ContextItemExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FunctionCall">FunctionCall</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderedExpr">OrderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-UnorderedExpr">UnorderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Constructor">Constructor</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for primary expressions is:</P>
<H5><A id=N12D00 name=N12D00></A>Primary Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-PrimaryExpr 
      name=doc-core-PrimaryExpr></A>[<SMALL>55&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PrimaryExpr">PrimaryExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Literal">Literal</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarRef">VarRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ParenthesizedExpr">ParenthesizedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-FunctionCall">FunctionCall</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderedExpr">OrderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-UnorderedExpr">UnorderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Constructor">Constructor</A></CODE></TD></TR></TBODY></TABLE>
<DIV class=div3>
<H4><A id=id-literals name=id-literals></A>4.1.1 Literals</H4>
<P><B>Introduction</B></P>
<P>A <B>literal</B> is a direct syntactic representation of an atomic value. 
[XPath/XQuery] supports two kinds of literals: string literals and numeric 
literals.</P>
<H5><A id=N12D40 name=N12D40></A>Literals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Literal 
      name=doc-xquery-Literal></A>[<SMALL>85&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Literal">Literal</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NumericLiteral">NumericLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-NumericLiteral 
      name=doc-xquery-NumericLiteral></A>[<SMALL>86&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NumericLiteral">NumericLiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-IntegerLiteral">IntegerLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DecimalLiteral">DecimalLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DoubleLiteral">DoubleLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-IntegerLiteral 
      name=doc-xquery-IntegerLiteral></A>[<SMALL>141&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-IntegerLiteral">IntegerLiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DecimalLiteral 
      name=doc-xquery-DecimalLiteral></A>[<SMALL>142&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DecimalLiteral">DecimalLiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("." <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A> 
      "." [0-9]*)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DoubleLiteral 
      name=doc-xquery-DoubleLiteral></A>[<SMALL>143&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DoubleLiteral">DoubleLiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("." <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A> 
      ("." [0-9]*)?)) [eE] [+-]? <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-StringLiteral 
      name=doc-xquery-StringLiteral></A>[<SMALL>144&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-StringLiteral">StringLiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>('"' (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredefinedEntityRef">PredefinedEntityRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-CharRef">CharRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeQuot">EscapeQuot</A> 
      | [^"&amp;])* '"') | ("'" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredefinedEntityRef">PredefinedEntityRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-CharRef">CharRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeApos">EscapeApos</A> 
      | [^'&amp;])* "'")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-URILiteral 
      name=doc-xquery-URILiteral></A>[<SMALL>140&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-URILiteral">URILiteral</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PredefinedEntityRef 
      name=doc-xquery-PredefinedEntityRef></A>[<SMALL>145&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PredefinedEntityRef">PredefinedEntityRef</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&amp;" ("lt" | "gt" | "amp" | "quot" | "apos") 
  ";"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Digits 
      name=doc-xquery-Digits></A>[<SMALL>158&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Digits">Digits</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>[0-9]+</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for literals are:</P>
<H5><A id=N12DEB name=N12DEB></A>Literals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Literal 
      name=doc-core-Literal></A>[<SMALL>56&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Literal">Literal</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NumericLiteral">NumericLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-NumericLiteral 
      name=doc-core-NumericLiteral></A>[<SMALL>57&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NumericLiteral">NumericLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-IntegerLiteral">IntegerLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DecimalLiteral">DecimalLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DoubleLiteral">DoubleLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-IntegerLiteral 
      name=doc-core-IntegerLiteral></A>[<SMALL>98&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-IntegerLiteral">IntegerLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-DecimalLiteral 
      name=doc-core-DecimalLiteral></A>[<SMALL>99&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DecimalLiteral">DecimalLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("." <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A> 
      "." [0-9]*)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-DoubleLiteral 
      name=doc-core-DoubleLiteral></A>[<SMALL>100&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DoubleLiteral">DoubleLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("." <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A> 
      ("." [0-9]*)?)) [eE] [+-]? <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-StringLiteral 
      name=doc-core-StringLiteral></A>[<SMALL>101&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StringLiteral">StringLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>('"' (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EscapeQuot">EscapeQuot</A> 
      | [^"])* '"') | ("'" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EscapeApos">EscapeApos</A> 
      | [^'])* "'")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-URILiteral 
      name=doc-core-URILiteral></A>[<SMALL>97&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Digits 
      name=doc-core-Digits></A>[<SMALL>112&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>[0-9]+</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>To define the dynamic semantics of literals, we introduce the following 
auxiliary judgments.</P>
<P id=jd_has_atomic_value>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>Literal</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
atomic value</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A></DIV>
<P>holds if the literal expression <EM>Literal</EM> corresponds to the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A>. 
This judgment yields an atomic value, according to the rules described in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>. Notably, this judgment deals with handling of 
literal overflows for numeric literals, and handling of character references, 
and predefined entity references for string literals.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Literals are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>IntegerLiteral</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>IntegerLiteral</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DecimalLiteral</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>DecimalLiteral</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DoubleLiteral</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>DoubleLiteral</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>StringLiteral</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>StringLiteral</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static type of a literal expression is its corresponding atomic type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>IntegerLiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  xs:integer</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>DecimalLiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  xs:decimal</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>DoubleLiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  xs:double</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>StringLiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  xs:string</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>In the dynamic semantics, a literal is evaluated by constructing an atomic 
value in the data model, using the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
atomic value</B></A> judgment defined above.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Literal</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Literal</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=id-variables name=id-variables></A>4.1.2 Variable References</H4>
<P><B>Introduction</B></P>
<P>A <B>variable</B> evaluates to the value to which the variable's QName is 
bound in the <B>dynamic context</B>.</P>
<H5><A id=N12FF5 name=N12FF5></A>Variable References</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-VarRef 
      name=doc-xquery-VarRef></A>[<SMALL>87&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-VarRef">VarRef</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-VarName 
      name=doc-xquery-VarName></A>[<SMALL>88&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-VarName">VarName</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for variable references are:</P>
<H5><A id=N13015 name=N13015></A>Primary Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-VarRef 
      name=doc-core-VarRef></A>[<SMALL>58&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarRef">VarRef</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-VarName 
      name=doc-core-VarName></A>[<SMALL>59&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Variable references are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarRef"><EM>VarRef</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarRef"><EM>VarRef</EM></A></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>In the static semantics, the type of a variable is simply its type in the 
static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  $<EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the variable is not bound in the static environment, a static type error 
is raised.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>In the dynamic semantics, a locally declared variable is evaluated by 
"looking up" its value in <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  $<EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the dynamic semantics, a reference to a variable imported from a module is 
evaluated by accessing the dynamic context of the module in which the variable 
is declared.</P>
<P>The notation <EM>AnyURI</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
size=2>module_dynEnv</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB> is used to access a module context and is defined in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM>) 
                  = <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  $<EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=id-paren-expressions name=id-paren-expressions></A>4.1.3 Parenthesized 
Expressions</H4>
<H5><A id=N131D8 name=N131D8></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ParenthesizedExpr 
      name=doc-xquery-ParenthesizedExpr></A>[<SMALL>89&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ParenthesizedExpr">ParenthesizedExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A>? 
      ")"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for parenthesized expressions is:</P>
<H5><A id=N131ED name=N131ED></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ParenthesizedExpr 
      name=doc-core-ParenthesizedExpr></A>[<SMALL>60&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ParenthesizedExpr">ParenthesizedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A>? 
      ")"</CODE></TD></TR></TBODY></TABLE>
<P>Empty parentheses <CODE>()</CODE> always have the empty type. Remember that 
it is a static type error for most expressions other than <CODE>()</CODE> to 
have the empty type (see <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A> for the complete rule.)</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  () <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>empty</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  ( <EM>Expr</EM> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>Empty parentheses <CODE>()</CODE> evaluate to the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  () <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  ( <EM>Expr</EM> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=id-context-item-expression name=id-context-item-expression></A>4.1.4 
Context Item Expression</H4>
<H5><A id=N132D5 name=N132D5></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ContextItemExpr 
      name=doc-xquery-ContextItemExpr></A>[<SMALL>90&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ContextItemExpr">ContextItemExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"."</CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>A <B>context item expression</B> evaluates to the context item, which may be 
either a node or an atomic value.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A context item expression is normalized to the built-in variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A>. 
Because it can only be bound through the external context or a path expression, 
there is no need for a specific static typing rule to enforce that its value is 
a singleton item.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>.<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=id-function-calls name=id-function-calls></A>4.1.5 Function Calls</H4>
<P><B>Introduction</B></P>
<P>A function call consists of a QName followed by a parenthesized list of zero 
or more expressions. In [XPath/XQuery], the actual argument to a function is 
called an <B>argument</B> and the formal argument of a function is called a 
<B>parameter</B>. We use the same terminology here.</P>
<H5><A id=N13320 name=N13320></A>Function Calls</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-FunctionCall 
      name=doc-xquery-FunctionCall></A>[<SMALL>93&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-FunctionCall">FunctionCall</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)*)? 
      ")"</CODE></TD></TR></TBODY></TABLE>
<P>Because [XPath/XQuery] implicitly converts the values of function arguments, 
a normalization step is required.</P>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for function calls is:</P>
<H5><A id=N13345 name=N13345></A>Function Calls</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-FunctionCall 
      name=doc-core-FunctionCall></A>[<SMALL>63&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FunctionCall">FunctionCall</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      "(" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A>)*)? 
      ")"</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_function_argument>Normalization of function calls uses an auxiliary 
mapping <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
size=2>FunctionArgument(Type)</FONT></SUB></A> used to insert conversions of 
function arguments that depend only on the expected <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
of the corresponding parameters. It is defined as follows:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Type)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><FONT 
      size=6>[</FONT><FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>AtomizeAtomic(Type)</FONT></SUB></A><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>Convert(Type)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>where</P>
<UL>
  <LI>
  <P><FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
  size=2>AtomizeAtomic(Type)</FONT></SUB></A> denotes</P>
  <TABLE>
    <TBODY>
    <TR>
      <TD>If</TD>
      <TD><A 
        href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
        <A class=judgment 
        href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
        <A 
        href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR>
    <TR>
      <TD>Then</TD>
      <TD><CODE>fn:data</CODE>(<EM>Expr</EM>)</TD>
      <TD>&nbsp;&nbsp;</TD></TR>
    <TR>
      <TD>Else</TD>
      <TD><EM>Expr</EM></TD>
      <TD>&nbsp;&nbsp;</TD></TR></TBODY></TABLE>
  <P>which specifies that if the function expects atomic parameters, then 
  <CODE>fn:data</CODE> is called to obtain them.</P>
  <LI>
  <P><FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
  size=2>Convert(Type)</FONT></SUB></A> denotes</P>
  <TABLE>
    <TBODY>
    <TR>
      <TD>If</TD>
      <TD><A 
        href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
        <A class=judgment 
        href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
        <A 
        href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR>
    <TR>
      <TD>Then</TD>
      <TD><A 
        href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand"><EM>fs:</EM><CODE>convert-simple-operand</CODE></A>(<EM> 
        Expr</EM>,<EM>PrototypicalValue</EM>)</TD></TR>
    <TR>
      <TD>Else</TD>
      <TD><EM>Expr</EM></TD></TR></TBODY></TABLE>
  <P>where <EM>PrototypicalValue</EM> is a built-in atomic value used to encode 
  the expected atomic type (for instance the value <CODE>1.0</CODE> if the 
  expected type is <CODE>xs:decimal</CODE>). A value is used here since 
  [XPath/XQuery] expressions cannot operate directly on types. Which value is 
  chosen does not have any impact on the actual semantics, only its actual 
  atomic type matters.</P></LI></UL>
<P><B>Note</B></P>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand"><EM>fs:</EM><CODE>convert-simple-operand</CODE></A> 
function takes a <EM>PrototypicalValue</EM>, which is a value of the target 
type, to ensure that conversion to base types is possible even though types are 
not first class objects in [XPath/XQuery]. Also, note that in the case of 
built-in functions where the expected type is specified as numeric, the 
prototypical value is a value of type <CODE>xs:double</CODE>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Each argument expression in a function call is normalized to its 
corresponding Core expression by applying <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
size=2>FunctionArgument(Type)</FONT></SUB></A> for each argument with the 
expected <EM>SequenceType</EM> for the argument inserted.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeDerivation"><EM>AtomicTypeDerivation</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>,n) 
                  = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <FONT size=6>[</FONT><EM>QName</EM> (<EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB>, ..., <EM>Expr</EM><SUB><FONT 
      size=2>n</FONT></SUB>)<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> = <EM>QName</EM> ( <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Type1)</FONT></SUB></A>, ..., <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Typen)</FONT></SUB></A> 
)</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>QName</EM> ( <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Type1)</FONT></SUB></A>, ..., <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Typen)</FONT></SUB></A> 
)</TD></TR></TBODY></TABLE></DIV>
<P>Note that this normalization rule depends on the function signatures, which 
is used to get the types of the function parameters 
(<EM>SequenceType</EM><SUB><FONT 
size=2>1</FONT></SUB>,...,<EM>SequenceType</EM><SUB><FONT 
size=2>n</FONT></SUB>). For user-defined functions, the function signature can 
be obtained from the XQuery prolog where the function is declared. For built-in 
functions, the signature is given in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document. For overloaded built-in functions, several 
signatures may exists, however, because they all correspond to sequences of 
atomic values, they all result in the same normalization.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>Different sets of static typing rules are used to type check function calls 
depending on which of the following categories the belong to: overloaded 
internal functions, built-in functions with a specific static typing rule, and 
other built-in and user-defined functions.</P>
<P>The following two rules are common to all those categories, and are used to 
bootstrap type inference, by first looking-up the expanded QName for the 
function, then applying the appropriate set of static typing rules depending on 
the category in which the function is.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>() <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM> (<EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The following depends on the kind of function call.</P>
<OL class=enumar>
  <LI>
  <P>If the expanded QName for the function corresponds to one of the overloaded 
  internal <EM>fs:</EM> functions listed in <A 
  href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
  Mapping of Overloaded Internal Functions]</B></A>, the static typing rules in 
  <A 
  href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
  Mapping of Overloaded Internal Functions]</B></A> are applied.</P>
  <LI>
  <P>If the expanded QName for the function corresponds to one of the built-in 
  functions with a specialized static typing rule, listed in <A 
  href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
  Additional Semantics of Functions]</B></A>, the static typing rules in <A 
  href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
  Additional Semantics of Functions]</B></A> are applied.</P>
  <LI>
  <P>Otherwise, the following general static typing rules are 
applied.</P></LI></OL>
<P>The two following rules look up the function in the static environment and 
check that some signature for the function satisfies the following constraint: 
the type of each actual argument is a subtype of some type that can be promoted 
to the type of the corresponding function parameter. In this case, the function 
call is well typed and the result type is the return type specified in the 
function's signature.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>,0) 
                  = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>,n) 
                  = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>', ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>') as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The function body itself is not analyzed for each invocation: static typing 
of the function definition itself guarantees that the function body always 
returns a value of the declared return type.</P>
<P>Notice that the static context contains at most one function declaration for 
each function. This is possible since the treatment of overloaded operators is 
done through a set of specific static typing rules which do not require access 
to the environment. See <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<P><B>Notation</B></P>
<P id=jd_function_with_types>The following auxiliary judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
types</B></A> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
values</B></A> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></DIV>
<P>holds when applying the function with expanded QName <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
and no parameter yields the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
types</B></A> (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>,...,<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>n</FONT></SUB>) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
values</B></A> (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB>,...,<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>n</FONT></SUB>) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></DIV>
<P>holds when applying the function with expanded QName <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>, 
and parameters of type (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>,...,<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>n</FONT></SUB>) on the values (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB>,...,<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>n</FONT></SUB>) yields the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</P>
<P>That judgment is defined below for each kind of function (user-defined, 
built-in, external, and imported functions).</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The following rules apply to all the different kinds of functions using the 
previously defined judgment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = <EM>FunctionSig</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionSig</EM> = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>() <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = <EM>FunctionSig</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionSig</EM> = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>',...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>') <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM> ( <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>First the function name is expanded, and the expanded name is used to 
retrieve the function signature from the static environment. Then, the rule 
evaluates each function argument expression, and the resulting values are 
promoted according to the expected type for the function. The result of 
evaluating the function is obtained through the auxiliary judgment previously 
defined, and the resulting value is promoted according to the expected return 
type.</P>
<P>In case the function is a user defined function in a main module, the 
expression body is retrieved from the dynamic environment and used to compute 
the value of the function. The rule extends <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A> 
by binding each formal variable to its corresponding value, and evaluates the 
body of the function in the new environment. The resulting value is the value of 
the function call.</P>
<P>The notation <EM>AnyURI</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
size=2>module_dynEnv</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB> is used to access a module context and is defined in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  = (<EM>Expr</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD>#MAIN <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)) = (<EM>Expr</EM>, 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB>, ... , 
                  <EM>Variable</EM><SUB><FONT size=2>n</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD>#MAIN <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>( 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>; ...; <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the function body is evaluated in the dynamic environment 
containing the main module declarations.</P>
<P>The rule for evaluating an function imported from a module is similar to that 
for evaluating a user-defined function in a main module, except that the 
function call is evaluated in the dynamic context of the module in which it is 
declared, and that the appropriate additional type matching must be 
performed.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>()) 
                  = <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A><SUB><FONT 
                  size=2>1</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = <EM>FunctionSig</EM>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionSig</EM>' = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  = (<EM>Expr</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)) = 
                  <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A><SUB><FONT 
                  size=2>1</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = <EM>FunctionSig</EM>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionSig</EM>' = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>', ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>') as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>', ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>')) = (<EM>Expr</EM>, 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB>, ... , 
                  <EM>Variable</EM><SUB><FONT size=2>n</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>( 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>; ...; <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the function is a built-in function (resp. special formal semantics 
function), the value returned by the function is the one specified in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> (resp. <A 
href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
Additional Semantics of Functions]</B></A>).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>()) 
                  = <CODE>#BUILT-IN</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD>The built-in function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  (See <A 
                  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
                  and Operators]</A> or <A 
                  href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
                  Additional Semantics of Functions]</B></A>) yields the value 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)) = <CODE>#BUILT-IN</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD>The built-in function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  (See <A 
                  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
                  and Operators]</A> or <A 
                  href="REC-xquery-semantics-20070123.htm#sec_special_functions"><B>[7 
                  Additional Semantics of Functions]</B></A>) applied to values 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) yields the value <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the function is an external function, the value returned by the function 
is implementation-defined.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>()) 
                  = <CODE>#EXTERNAL</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD>The external function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  yields the value <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)) = <CODE>#EXTERNAL</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD>The external function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  applied to values (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) yields the value <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
                  types</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
                  values</B></A> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=id-path-expressions name=id-path-expressions></A>4.2 Path 
Expressions</H3>
<P><B>Introduction</B></P>
<P>Path expressions are used to locate nodes within a tree. There are two kinds 
of path expressions, absolute path expressions and relative path expressions. An 
absolute path expression is a rooted relative path expression. A relative path 
expression is composed of a sequence of steps.</P>
<H5><A id=N141E0 name=N141E0></A>Path Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PathExpr 
      name=doc-xquery-PathExpr></A>[<SMALL>68&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PathExpr">PathExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("/" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-RelativePathExpr">RelativePathExpr</A>?)<BR>| 
      ("//" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-RelativePathExpr">RelativePathExpr</A>)<BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-RelativePathExpr">RelativePathExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-RelativePathExpr 
      name=doc-xquery-RelativePathExpr></A>[<SMALL>69&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-RelativePathExpr">RelativePathExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StepExpr">StepExpr</A> 
      (("/" | "//") <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StepExpr">StepExpr</A>)*</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>PathExpr and RelativePathExpr are fully normalized, therefore they have no 
corresponding productions in the Core. The grammar for path expressions in the 
Core starts with the StepExpr production.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Absolute path expressions are path expressions starting with the 
<CODE>/</CODE> or <CODE>//</CODE> symbols, indicating that the expression must 
be applied on the root node in the current context. The root node in the current 
context is the greatest ancestor of the context node. The following two rules 
normalize absolute path expressions to relative ones. They use the 
<CODE>fn:root</CODE> function, which returns the greatest ancestor of its 
argument node. The treat expressions guarantee that the value bound to the 
context variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
is a document node.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>/<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>(<CODE>fn:root</CODE>(self::node()) treat as 
      document-node())<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>/ 
      <EM>RelativePathExpr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>((<CODE>fn:root</CODE>(self::node())) treat as 
      document-node()) / <EM>RelativePathExpr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>// 
      <EM>RelativePathExpr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>((<CODE>fn:root</CODE>(self::node())) treat as 
      document-node()) / <CODE>descendant-or-self::node()</CODE> / 
      <EM>RelativePathExpr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>RelativePathExpr</EM> // <EM>StepExpr</EM> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>RelativePathExpr</EM> / descendant-or-self::node() / 
      <EM>StepExpr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>A composite relative path expression (using <CODE>/</CODE>) is normalized 
into a <CODE>for</CODE> expression by concatenating the sequences obtained by 
mapping each node of the left-hand side in document order to the sequence it 
generates on the right-hand side. The call to the <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A> 
function ensures that the result is in document order without duplicates. The 
dynamic context is defined by binding the 
<CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE>, 
<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>, 
<CODE>$</CODE><EM>fs:</EM><CODE>position</CODE> and 
<CODE>$</CODE><EM>fs:</EM><CODE>last</CODE> variables.</P>
<P>Note that sorting by document order enforces the restriction that input and 
output sequences contains only nodes, and that the last step in a path 
expression may actually return atomic values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>RelativePathExpr</EM> / <EM>StepExpr</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
            (</TD></TR>
        <TR>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence"><EM>fs:</EM><CODE>distinct-doc-order-or-atomic-sequence</CODE></A> 
            (</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> 
            as node()* := <FONT size=6>[</FONT><EM>RelativePathExpr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := fn:count(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
          return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;for <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            at <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
            in <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
            size=6>[</FONT><EM>StepExpr</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A></TD></TR>
        <TR>
          <TD>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=id-axis-steps name=id-axis-steps></A>4.2.1 Steps</H4>
<P>Note that this section uses some auxiliary judgments which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_xpath"><B>[8.2 
Judgments for step expressions and filtering]</B></A>.</P>
<P><B>Introduction</B></P>
<H5><A id=N1437F name=N1437F></A>Steps</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-StepExpr 
      name=doc-xquery-StepExpr></A>[<SMALL>70&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-StepExpr">StepExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FilterExpr">FilterExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AxisStep">AxisStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AxisStep 
      name=doc-xquery-AxisStep></A>[<SMALL>71&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AxisStep">AxisStep</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ReverseStep">ReverseStep</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForwardStep">ForwardStep</A>) 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredicateList">PredicateList</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ForwardStep 
      name=doc-xquery-ForwardStep></A>[<SMALL>72&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ForwardStep">ForwardStep</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForwardAxis">ForwardAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NodeTest">NodeTest</A>) 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AbbrevForwardStep">AbbrevForwardStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ReverseStep 
      name=doc-xquery-ReverseStep></A>[<SMALL>75&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ReverseStep">ReverseStep</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ReverseAxis">ReverseAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NodeTest">NodeTest</A>) 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AbbrevReverseStep">AbbrevReverseStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PredicateList 
      name=doc-xquery-PredicateList></A>[<SMALL>82&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PredicateList">PredicateList</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Predicate">Predicate</A>*</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for XPath steps are:</P>
<H5><A id=N143EE name=N143EE></A>Steps</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-StepExpr 
      name=doc-core-StepExpr></A>[<SMALL>46&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StepExpr">StepExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PrimaryExpr">PrimaryExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AxisStep">AxisStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AxisStep 
      name=doc-core-AxisStep></A>[<SMALL>47&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AxisStep">AxisStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ReverseStep">ReverseStep</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForwardStep">ForwardStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ForwardStep 
      name=doc-core-ForwardStep></A>[<SMALL>48&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForwardStep">ForwardStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForwardAxis">ForwardAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NodeTest">NodeTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ReverseStep 
      name=doc-core-ReverseStep></A>[<SMALL>50&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ReverseStep">ReverseStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ReverseAxis">ReverseAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NodeTest">NodeTest</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Note</B></P>
<P>Step expressions can be followed by predicates. Normalization of predicates 
uses the following auxiliary mapping rule: <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
size=2>Predicates</FONT></SUB></A>, which is specified in <A 
href="REC-xquery-semantics-20070123.htm#id-predicates"><B>[4.2.2 
Predicates]</B></A>. Normalization for step expressions also uses the following 
auxiliary mapping rule: <FONT size=6>[</FONT><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
size=2>Axis</FONT></SUB></A>, which is specified in <A 
href="REC-xquery-semantics-20070123.htm#sec_axes"><B>[4.2.1.1 
Axes]</B></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Normalization of predicates need to distinguish between forward steps, 
reverse steps, and primary expressions.</P>
<P>As explained in the [XPath/XQuery] document, applying a step in XPath changes 
the focus (or context). The change of focus is made explicit by the 
normalization rule below, which binds the variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
to the node currently being processed, and the variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
to the position (i.e., the position within the input sequence) of that node.</P>
<P>There are two sets of normalization rules for Predicates. The first set of 
rules apply when the predicate is a numeric literal or the expression 
<CODE>last()</CODE>. The second set of rules apply to all predicate expressions 
other than numeric literals and the expression <CODE>last()</CODE>. In the first 
case, the normalization rules provides a more precise static type than if the 
general rules were applied.</P>
<P>When the predicate expression is a numeric literal or the 
<CODE>fn:last</CODE> function, the following normalization rules apply.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM> [ 
      <EM>NumericLiteral</EM> ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD><CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>,<EM> 
            NumericLiteral</EM>,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM> [ 
      <CODE>fn:last</CODE>() ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := 
            <CODE>fn:count</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
            return</TD></TR>
        <TR>
          <TD><CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>,<A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"> 
            <CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>When predicates are applied on a reverse step, the position variable is bound 
in reverse document order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM> [ 
      <EM>NumericLiteral</EM> ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := fn:count(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
          return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
            := <EM>fs:</EM><CODE>plus</CODE>(1, 
            <EM>fs:</EM><CODE>minus</CODE>(<A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>,<EM> 
            NumericLiteral</EM>)) return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;<CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE> 
            sequence</CODE>,<A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A>,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>When the step is a reverse axis, then the last item in the context sequence 
is the first in document order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM> [ 
      <CODE>fn:last</CODE>() ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;<CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE> 
            sequence</CODE>,1,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>The normalization rules above all use the function 
<CODE>fn:subsequence</CODE> to select a particular item. The static typing rules 
for this function are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_fn_subsequence"><B>[7.2.13 
The fn:subsequence function]</B></A>.</P>
<P>When predicates are applied on a forward step, the input sequence is first 
sorted in document order and duplicates are removed. The context is changed by 
binding the <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
variable to each node in document order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM> [ <EM>Expr</EM> 
      ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ForwardStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := fn:count(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
          return</TD></TR>
        <TR>
          <TD>for <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            at <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
            in <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; if (<FONT size=6>[</FONT><EM>Expr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
            size=2>Predicates</FONT></SUB></A>) then <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            else ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>When predicates are applied on a reverse step, the input sequence is first 
sorted in document order and duplicates are removed. The context is changed by 
binding the <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
variable to each node in document order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM> [ <EM>Expr</EM> 
      ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <A 
            href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<A 
            href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"> 
            <EM>fs:</EM><CODE>distinct-doc-order</CODE></A>( <FONT 
            size=6>[</FONT><EM>ReverseStep</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )) return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := fn:count(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
          return</TD></TR>
        <TR>
          <TD>for <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            at $<EM>fs:</EM>new in 
            <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
            := <EM>fs:</EM><CODE>plus</CODE>(1,<EM>fs:</EM><CODE>minus</CODE>(<A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"> 
            <CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>,$<EM>fs:</EM>new)) 
            return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;if (<FONT size=6>[</FONT><EM>Expr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
            size=2>Predicates</FONT></SUB></A>) then <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            else ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>Finally, a stand-alone forward or reverse step is normalized by the auxiliary 
normalization rule for <EM>Axis</EM>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ForwardStep</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<FONT 
      size=6> [</FONT><EM>ForwardStep</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A>)</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ReverseStep</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<FONT 
      size=6> [</FONT><EM>ReverseStep</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A>)</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics of an <EM>Axis</EM> <EM>NodeTest</EM> pair is obtained 
by retrieving the type of the context node, and applying the two filters (the 
<EM>Axis</EM>, and then the <EM>NodeTest</EM> with a <EM>PrincipalNodeKind</EM>) 
on the result.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>((<CODE>FS-URI</CODE>,"<CODE>dot</CODE>")) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <FONT size=6>[</FONT>node()<FONT size=6>]</FONT><A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
                  principal</B></A> <EM>PrincipalNodeKind</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Axis</EM> <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>Note that the second judgment in the rule requires that the context item be a 
node, guaranteeing that a type error is raised when the context item is an 
atomic value.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics of an <EM>Axis</EM> <EM>NodeTest</EM> pair is obtained 
by retrieving the context node, and applying the two filters (<EM>Axis</EM>, 
then <EM>NodeTest</EM>) on the result. The application of each filter is 
expressed through several auxiliary judgments (<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A>, 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
principal</B></A>, and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A>), 
as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <FONT size=6>[</FONT>node()<FONT size=6>]</FONT><A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
                  principal</B></A> <EM>PrincipalNodeKind</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Axis</EM> <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"> 
      <EM>Value</EM></A><SUB><FONT 
size=2>3</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>Note that the second judgment in the rule guarantees that the context item is 
bound to a node.</P>
<DIV class=div4>
<H5><A id=sec_axes name=sec_axes></A>4.2.1.1 Axes</H5>
<P><B>Introduction</B></P>
<P>The XQuery grammar for forward and reverse axis is as follows.</P>
<H5><A id=N14A10 name=N14A10></A>Axes</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ForwardAxis 
      name=doc-xquery-ForwardAxis></A>[<SMALL>73&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ForwardAxis">ForwardAxis</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("child" "::")<BR>| ("descendant" "::")<BR>| ("attribute" 
      "::")<BR>| ("self" "::")<BR>| ("descendant-or-self" "::")<BR>| 
      ("following-sibling" "::")<BR>| ("following" "::")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ReverseAxis 
      name=doc-xquery-ReverseAxis></A>[<SMALL>76&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ReverseAxis">ReverseAxis</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("parent" "::")<BR>| ("ancestor" "::")<BR>| ("preceding-sibling" 
      "::")<BR>| ("preceding" "::")<BR>| ("ancestor-or-self" 
  "::")</CODE></TD></TR></TBODY></TABLE>
<P>In the case of XPath, forward axis also contain the <CODE>namespace::</CODE> 
axis.</P>
<H5><A id=N14A3D name=N14A3D></A>Axes</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N1492C.doc-xpath-ForwardAxis 
      name=noid_N1492C.doc-xpath-ForwardAxis></A>[<SMALL>30&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-ForwardAxis">ForwardAxis</A><SUP> 
      <SMALL>XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("child" "::")<BR>| ("descendant" "::")<BR>| ("attribute" 
      "::")<BR>| ("self" "::")<BR>| ("descendant-or-self" "::")<BR>| 
      ("following-sibling" "::")<BR>| ("following" "::")<BR>| ("namespace" 
      "::")</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for XPath axis are:</P>
<H5><A id=N14A5C name=N14A5C></A>Axes</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ForwardAxis 
      name=doc-core-ForwardAxis></A>[<SMALL>49&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForwardAxis">ForwardAxis</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("child" "::")<BR>| ("descendant" "::")<BR>| ("attribute" 
      "::")<BR>| ("self" "::")<BR>| ("descendant-or-self" "::")<BR>| 
      ("namespace" "::")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ReverseAxis 
      name=doc-core-ReverseAxis></A>[<SMALL>51&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ReverseAxis">ReverseAxis</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("parent" "::")<BR>| ("ancestor" "::")<BR>| ("ancestor-or-self" 
      "::")</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>We introduce the following auxiliary grammar production to describe all 
axis.</P>
<H5><A id=N14A82 name=N14A82></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Axis 
      name=doc-fs-Axis></A>[<SMALL>90&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Axis</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForwardAxis">ForwardAxis</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ReverseAxis">ReverseAxis</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_axis>The normalization of axes uses the following auxiliary mapping 
rule: <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
size=2>Axis</FONT></SUB></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization for all axes is specified as follows.</P>
<P>The semantics of the following(-sibling) and preceding(-sibling) axes are 
expressed by mapping them to Core expressions. All other axes are part of the 
Core and therefore are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>following-sibling::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>let $e := 
      . return $e/parent::node()/child:: <EM>NodeTest</EM> [.&gt;&gt;$e]<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>following::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>ancestor-or-self::node()/following-sibling::node()/descendant-or-self::</CODE><EM> 
      NodeTest</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>All other forward axes are part of the Core [XPath/XQuery] and handled by the 
normalization rules below:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>child::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>child::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>attribute::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>attribute::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>self::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>self::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>descendant::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>descendant::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>descendant-or-self::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
      align=middle><CODE>descendant-or-self::</CODE> 
  <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>namespace::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>namespace::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<P>Reverse axes:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>preceding-sibling::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>let $e := 
      . return $e/parent::node()/child:: <EM>NodeTest</EM> [.&lt;&lt;$e]<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>preceding::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>ancestor-or-self::node()/preceding-sibling::node()/descendant-or-self::</CODE><EM> 
      NodeTest</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>All other reverse axes are part of the Core [XPath/XQuery] and handled by the 
normalization rules below:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>parent::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>parent::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>ancestor::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>ancestor::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>ancestor-or-self::</CODE> <EM>NodeTest</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>ancestor-or-self::</CODE> 
      <EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div4>
<H5><A id=node-tests name=node-tests></A>4.2.1.2 Node Tests</H5>
<P><B>Introduction</B></P>
<P>A node test is a condition applied on the nodes selected by an axis step. 
Node tests are described by the following grammar productions.</P>
<H5><A id=N14C4B name=N14C4B></A>Node Tests</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-NodeTest 
      name=doc-xquery-NodeTest></A>[<SMALL>78&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NodeTest">NodeTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-KindTest">KindTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NameTest">NameTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-NameTest 
      name=doc-xquery-NameTest></A>[<SMALL>79&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NameTest">NameTest</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Wildcard">Wildcard</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Wildcard 
      name=doc-xquery-Wildcard></A>[<SMALL>80&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Wildcard">Wildcard</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"*"<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      ":" "*")<BR>| ("*" ":" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A>)</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for node tests are:</P>
<H5><A id=N14C8E name=N14C8E></A>Node Tests</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-NodeTest 
      name=doc-core-NodeTest></A>[<SMALL>52&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NodeTest">NodeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-KindTest">KindTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NameTest">NameTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-NameTest 
      name=doc-core-NameTest></A>[<SMALL>53&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NameTest">NameTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Wildcard">Wildcard</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Wildcard 
      name=doc-core-Wildcard></A>[<SMALL>54&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Wildcard">Wildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"*"<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      ":" "*")<BR>| ("*" ":" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A>)</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>For convenience, we will use the grammar non-terminals <EM>Prefix</EM>, and 
<EM>LocalPart</EM>, both of which are <EM>NCName</EM>s, in some of the inference 
rules. They are defined by the following grammar productions.</P>
<H5><A id=N14CDA name=N14CDA></A>Prefix and LocalPart</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Prefix 
      name=doc-fs-Prefix></A>[<SMALL>18&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Prefix</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-LocalPart 
      name=doc-fs-LocalPart></A>[<SMALL>19&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>LocalPart</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A></CODE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=id-predicates name=id-predicates></A>4.2.2 Predicates</H4>
<P><B>Introduction</B></P>
<P>A predicate consists of an expression, called a <B>predicate expression</B>, 
enclosed in square brackets.</P>
<H5><A id=N14D01 name=N14D01></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Predicate 
      name=doc-xquery-Predicate></A>[<SMALL>83&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Predicate">Predicate</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"[" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "]"</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_predicates>Normalization of predicates uses the following auxiliary 
mapping rule: <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
size=2>Predicates</FONT></SUB></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Predicates in path expressions are normalized with a special mapping 
rule:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
      size=2>Predicates</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>typeswitch (<FONT size=6>[</FONT><EM>Expr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;case $v as <EM>fs:</EM><CODE>numeric</CODE> return 
            <EM>op:</EM>numeric-equal($v, <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A>)</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;default $v return 
        <CODE>fn:boolean</CODE>($v)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>Note that the semantics of predicates whose input expression returns a 
numeric value also work if that value is not an integer. In those cases the 
<CODE>op:numeric-equal</CODE> returns false when compared to a position. For 
example, the expression <CODE>//a[3.4]</CODE> always returns the empty 
sequence.</P></DIV>
<DIV class=div3>
<H4><A id=unabbrev name=unabbrev></A>4.2.3 Unabbreviated Syntax</H4>
<P>The corresponding Section in the [XPath/XQuery] document just contains 
examples.</P></DIV>
<DIV class=div3>
<H4><A id=abbrev name=abbrev></A>4.2.4 Abbreviated Syntax</H4>
<H5><A id=N14D7C name=N14D7C></A>Abbreviated Syntax</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AbbrevForwardStep 
      name=doc-xquery-AbbrevForwardStep></A>[<SMALL>74&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AbbrevForwardStep">AbbrevForwardStep</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"@"? <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NodeTest">NodeTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AbbrevReverseStep 
      name=doc-xquery-AbbrevReverseStep></A>[<SMALL>77&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AbbrevReverseStep">AbbrevReverseStep</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>".."</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Here are normalization rules for the abbreviated syntax.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>..<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle>parent::node()</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>@<EM>NodeTest</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle>attribute::<EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>NodeTest</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_axis"><SUB><FONT 
      size=2>Axis</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle>child::<EM>NodeTest</EM></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=id-sequence-expressions name=id-sequence-expressions></A>4.3 Sequence 
Expressions</H3>
<P><B>Introduction</B></P>
<P>[XPath/XQuery] supports operators to construct and combine sequences. A 
<B>sequence</B> is an ordered collection of zero or more items. An <B>item</B> 
is either an atomic value or a node.</P>
<DIV class=div3>
<H4><A id=sec_constructing_sequences name=sec_constructing_sequences></A>4.3.1 
Constructing Sequences</H4>
<H5><A id=N14DF1 name=N14DF1></A>Constructing Sequences</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N14C83.doc-xquery-Expr 
      name=noid_N14C83.doc-xquery-Expr></A>[<SMALL>31&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Expr">Expr</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-RangeExpr 
      name=doc-xquery-RangeExpr></A>[<SMALL>49&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-RangeExpr">RangeExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AdditiveExpr">AdditiveExpr</A> 
      ( "to" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AdditiveExpr">AdditiveExpr</A> 
      )?</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for sequence expressions is:</P>
<H5><A id=N14E1E name=N14E1E></A>Core Sequence Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N14C98.doc-core-Expr 
      name=noid_N14C98.doc-core-Expr></A>[<SMALL>22&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A sequence expression is normalized into a sequence of normalized single 
expressions:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> , 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>, <FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The type of the sequence expression is the sequence over the types of the 
individual expressions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> , <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>Each expression in the sequence is evaluated and the resulting values are 
concatenated into one sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>&nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The range operator is normalized to the <EM>fs:</EM><CODE>to</CODE> 
function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <CODE>to</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
      align=middle><EM>fs:</EM><CODE>to</CODE>((<FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>),(<FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics of the <EM>fs:</EM><CODE>to</CODE> function is defined 
in <A 
href="REC-xquery-semantics-20070123.htm#sec_fs_to"><B>[7.1.12 
The fs:to function]</B></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics of the <EM>fs:</EM><CODE>to</CODE> function is defined 
in <A 
href="REC-xquery-semantics-20070123.htm#sec_fs_to"><B>[7.1.12 
The fs:to function]</B></A>.</P></DIV>
<DIV class=div3>
<H4><A id=sec_filter_exprs name=sec_filter_exprs></A>4.3.2 Filter 
Expressions</H4>
<P><B>Introduction</B></P>
<H5><A id=N14FC0 name=N14FC0></A>Filter Expression</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-FilterExpr 
      name=doc-xquery-FilterExpr></A>[<SMALL>81&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-FilterExpr">FilterExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PrimaryExpr">PrimaryExpr</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredicateList">PredicateList</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>There are no Core grammar productions for filter expressions as they are 
normalized to other Core expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>When a predicate with a numeric literal or the <CODE>last()</CODE> expression 
is applied on a primary expression, it is normalized using the 
<CODE>fn:subsequence</CODE> function. This results in a more precise static type 
for those cases.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM> [ 
      <EM>NumericLiteral</EM> ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <FONT 
            size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD><CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>,<EM> 
            NumericLiteral</EM>,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM> [ fn:last() 
      ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <FONT 
            size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD><CODE>fn:subsequence</CODE>(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>,<A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"> 
            <CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>,1)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>In the general case, when a predicate is applied on a primary expression, it 
is normalized to a FLWOR expression as follows. The input sequence is processed 
in sequence order and the context item is bound to each item in the input 
sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM> [ <EM>Expr</EM> 
      ]<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> := <FONT 
            size=6>[</FONT><EM>PrimaryExpr</EM> <EM>PredicateList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD>let <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A> 
            := fn:count(<CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE>) 
          return</TD></TR>
        <TR>
          <TD>for <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            at <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A> 
            in <CODE>$</CODE><EM>fs:</EM><CODE>sequence</CODE> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; if (<FONT size=6>[</FONT><EM>Expr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_predicates"><SUB><FONT 
            size=2>Predicates</FONT></SUB></A>) then <A 
            href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>dot</CODE></A> 
            else ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no additional static typing rules for filter expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>There are no additional dynamic evaluation rules for filter 
expressions.</P></DIV>
<DIV class=div3>
<H4><A id=sec_combining_sequences name=sec_combining_sequences></A>4.3.3 
Combining Node Sequences</H4>
<P>[XPath/XQuery] provides several operators for combining sequences of 
nodes.</P>
<H5><A id=N15110 name=N15110></A>Combining Sequences</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-UnionExpr 
      name=doc-xquery-UnionExpr></A>[<SMALL>52&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-UnionExpr">UnionExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-IntersectExceptExpr">IntersectExceptExpr</A> 
      ( ("union" | "|") <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-IntersectExceptExpr">IntersectExceptExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-IntersectExceptExpr 
      name=doc-xquery-IntersectExceptExpr></A>[<SMALL>53&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-IntersectExceptExpr">IntersectExceptExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-InstanceofExpr">InstanceofExpr</A> 
      ( ("intersect" | "except") <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-InstanceofExpr">InstanceofExpr</A> 
      )*</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_sequenceop>The union, intersect, and except expressions are 
normalized into function calls to the appropriate functions. The mapping 
function <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_sequenceop"><SUB><FONT 
size=2>SequenceOp</FONT></SUB></A> is defined by the following table:</P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TD>SequenceOp</TD>
    <TD><FONT size=6>[</FONT><EM>SequenceOp</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequenceop"><SUB><FONT 
      size=2>SequenceOp</FONT></SUB></A></TD></TR>
  <TR>
    <TD>"union"</TD>
    <TD><EM>op:</EM>union</TD></TR>
  <TR>
    <TD>"|"</TD>
    <TD><EM>op:</EM>union</TD></TR>
  <TR>
    <TD>"intersect"</TD>
    <TD><EM>op:</EM>intersect</TD></TR>
  <TR>
    <TD>"except"</TD>
    <TD><EM>op:</EM>except</TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Operators for combining node sequences are normalized as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>SequenceOp</EM> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
      (<FONT size=6>[</FONT><EM>SequenceOp</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_sequenceop"><SUB><FONT 
      size=2>SequenceOp</FONT></SUB></A> ( <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>, <FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> ))</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics of the operators that combine sequences are defined in 
<A 
href="REC-xquery-semantics-20070123.htm#sec_op_union_intersect_except"><B>[7.2.14 
The op:union, op:intersect, and op:except operators]</B></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics for function calls is given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_arithmetic name=sec_arithmetic></A>4.4 Arithmetic Expressions</H3>
<P>[XPath/XQuery] provides arithmetic operators for addition, subtraction, 
multiplication, division, and modulus, in their usual binary and unary 
forms.</P>
<H5><A id=N151E8 name=N151E8></A>Arithmetic Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AdditiveExpr 
      name=doc-xquery-AdditiveExpr></A>[<SMALL>50&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AdditiveExpr">AdditiveExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-MultiplicativeExpr">MultiplicativeExpr</A> 
      ( ("+" | "-") <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-MultiplicativeExpr">MultiplicativeExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-MultiplicativeExpr 
      name=doc-xquery-MultiplicativeExpr></A>[<SMALL>51&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-MultiplicativeExpr">MultiplicativeExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-UnionExpr">UnionExpr</A> 
      ( ("*" | "div" | "idiv" | "mod") <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-UnionExpr">UnionExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-UnaryExpr 
      name=doc-xquery-UnaryExpr></A>[<SMALL>58&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-UnaryExpr">UnaryExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("-" | "+")* <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ValueExpr">ValueExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ValueExpr 
      name=doc-xquery-ValueExpr></A>[<SMALL>59&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ValueExpr">ValueExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ValidateExpr">ValidateExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PathExpr">PathExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExtensionExpr">ExtensionExpr</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for arithmetic expressions is:</P>
<H5><A id=N15238 name=N15238></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ValueExpr 
      name=doc-core-ValueExpr></A>[<SMALL>40&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValueExpr">ValueExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValidateExpr">ValidateExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StepExpr">StepExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExtensionExpr">ExtensionExpr</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_arithop>The mapping function <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_arithop"><SUB><FONT 
size=2>ArithOp</FONT></SUB></A> is defined by the following table:</P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TD><EM>ArithOp</EM></TD>
    <TD><FONT size=6>[</FONT><EM>ArithOp</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_arithop"><SUB><FONT 
      size=2>ArithOp</FONT></SUB></A></TD></TR>
  <TR>
    <TD>"+"</TD>
    <TD><EM>fs:</EM><CODE>plus</CODE></TD></TR>
  <TR>
    <TD>"-"</TD>
    <TD><EM>fs:</EM><CODE>minus</CODE></TD></TR>
  <TR>
    <TD>"*"</TD>
    <TD><EM>fs:</EM><CODE>times</CODE></TD></TR>
  <TR>
    <TD>"div"</TD>
    <TD><EM>fs:</EM><CODE>div</CODE></TD></TR>
  <TR>
    <TD>"mod"</TD>
    <TD><EM>fs:</EM><CODE>mod</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>There are no Core grammar productions for arithmetic expressions as they are 
normalized to other Core expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization rules for all the arithmetic operators except 
<CODE>idiv</CODE> first atomize each argument by applying <CODE>fn:data</CODE> 
and then apply the internal function <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A> 
to each argument. If the first argument to this function has type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
then the first argument is cast to a double, otherwise it is returned unchanged. 
The overloaded internal function corresponding to the arithmetic operator is 
then applied to the two converted arguments. The table above maps the operators 
to the corresponding internal function. The mapping from the overloaded internal 
functions to the corresponding non-overloaded function is given in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>ArithOp</EM> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>ArithOp</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_arithop"><SUB><FONT 
            size=2>ArithOp</FONT></SUB></A> (</TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>1</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), 1.0E0),</TD></TR>
        <TR>
          <TD></TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>2</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), 
  1.0E0))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>The normalization rules for the <CODE>idiv</CODE> operator are similar, but 
instead of casting arguments with type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
to <CODE>xs:double</CODE>, they are cast to <CODE>xs:integer</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <CODE>idiv</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR vAlign=baseline>
          <TD><EM>fs:</EM><CODE>idiv</CODE> (</TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>1</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), 1),</TD></TR>
        <TR>
          <TD></TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>2</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), 
1))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>The unary operators are mapped similarly.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>+</CODE> <EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
      align=middle><EM>fs:</EM><CODE>unary-plus</CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
      fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)), 1.0E0))</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><CODE>-</CODE> <EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
      align=middle><EM>fs:</EM><CODE>unary-minus</CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
      fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)), 1.0E0))</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics for function calls is given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>. The mapping from the overloaded internal functions to 
the corresponding non-overloaded function is given in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics for function calls is given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>. The mapping from the overloaded internal functions to 
the corresponding non-overloaded function is given in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P></DIV>
<DIV class=div2>
<H3><A id=sec_comparisons name=sec_comparisons></A>4.5 Comparison 
Expressions</H3>
<P><B>Introduction</B></P>
<P>Comparison expressions allow two values to be compared. [XPath/XQuery] 
provides three kinds of comparison expressions, called value comparisons, 
general comparisons, and node comparisons.</P>
<H5><A id=N15434 name=N15434></A>Comparison Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ComparisonExpr 
      name=doc-xquery-ComparisonExpr></A>[<SMALL>48&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ComparisonExpr">ComparisonExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-RangeExpr">RangeExpr</A> 
      ( (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ValueComp">ValueComp</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-GeneralComp">GeneralComp</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NodeComp">NodeComp</A>) 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-RangeExpr">RangeExpr</A> 
      )?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ValueComp 
      name=doc-xquery-ValueComp></A>[<SMALL>61&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ValueComp">ValueComp</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"eq" | "ne" | "lt" | "le" | "gt" | "ge"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-GeneralComp 
      name=doc-xquery-GeneralComp></A>[<SMALL>60&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-GeneralComp">GeneralComp</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"=" | "!=" | "&lt;" | "&lt;=" | "&gt;" | 
  "&gt;="</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-NodeComp 
      name=doc-xquery-NodeComp></A>[<SMALL>62&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NodeComp">NodeComp</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"is" | "&lt;&lt;" | "&gt;&gt;"</CODE></TD></TR></TBODY></TABLE>
<DIV class=div3>
<H4><A id=sec_value_comparisons name=sec_value_comparisons></A>4.5.1 Value 
Comparisons</H4>
<P><B>Notation</B></P>
<P id=jd_map_valuecomp>The mapping function <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_valuecomp"><SUB><FONT 
size=2>ValueComp</FONT></SUB></A> is defined by the following table:</P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TD>ValueComp</TD>
    <TD><FONT size=6>[</FONT>ValueComp<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_valuecomp"><SUB><FONT 
      size=2>ValueComp</FONT></SUB></A></TD></TR>
  <TR>
    <TD>"<CODE>eq</CODE>"</TD>
    <TD><EM>fs:</EM>eq</TD></TR>
  <TR>
    <TD>"<CODE>ne</CODE>"</TD>
    <TD><EM>fs:</EM>ne</TD></TR>
  <TR>
    <TD>"<CODE>lt</CODE>"</TD>
    <TD><EM>fs:</EM>lt</TD></TR>
  <TR>
    <TD>"<CODE>le</CODE>"</TD>
    <TD><EM>fs:</EM>le</TD></TR>
  <TR>
    <TD>"<CODE>gt</CODE>"</TD>
    <TD><EM>fs:</EM>gt</TD></TR>
  <TR>
    <TD>"<CODE>ge</CODE>"</TD>
    <TD><EM>fs:</EM>ge</TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>There are no Core grammar productions for value comparisons as they are 
normalized to other Core expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization rules for the value comparison operators first atomize each 
argument by applying <CODE>fn:data</CODE> and then apply the internal function 
<A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A> 
defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><B>[7.1.1 
The fs:convert-operand function]</B></A>. If the first argument to this function 
has type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
then the first argument is cast to a string, otherwise it is returned unchanged. 
The overloaded internal function corresponding to the value comparison operator 
is then applied to the two converted arguments. The table above maps the value 
operators to the corresponding internal function. The mapping from the 
overloaded internal functions to the corresponding non-overloaded function is 
given in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>ValueComp</EM> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>ValueComp</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_valuecomp"><SUB><FONT 
            size=2>ValueComp</FONT></SUB></A> (</TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>1</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), "string"),</TD></TR>
        <TR>
          <TD></TD>
          <TD><A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>(<CODE> 
            fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
            size=2>2</FONT></SUB><FONT size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)), "string") 
  )</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics for function calls is given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>. The comparison functions all have return type 
<CODE>xs:boolean</CODE>, as specified in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics for function calls is given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>.</P></DIV>
<DIV class=div3>
<H4><A id=sec_general_comparisons name=sec_general_comparisons></A>4.5.2 General 
Comparisons</H4>
<P><B>Introduction</B></P>
<P>General comparisons are defined by adding existential semantics to value 
comparisons. The operands of a general comparison may be sequences of any 
length. The result of a general comparison is always <CODE>true</CODE> or 
<CODE>false</CODE>.</P>
<P><B>Notation</B></P>
<P id=jd_map_generalcomp>The function <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_generalcomp"><SUB><FONT 
size=2>GeneralComp</FONT></SUB></A> is defined by the following table:</P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TD><EM>GeneralComp</EM></TD>
    <TD><FONT size=6>[</FONT><EM>GeneralComp</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_generalcomp"><SUB><FONT 
      size=2>GeneralComp</FONT></SUB></A></TD></TR>
  <TR>
    <TD>"<CODE>=</CODE>"</TD>
    <TD><EM>fs:</EM>eq</TD></TR>
  <TR>
    <TD>"<CODE>!=</CODE>"</TD>
    <TD><EM>fs:</EM>ne</TD></TR>
  <TR>
    <TD>"<CODE>&lt;</CODE>"</TD>
    <TD><EM>fs:</EM>lt</TD></TR>
  <TR>
    <TD>"<CODE>&lt;=</CODE>"</TD>
    <TD><EM>fs:</EM>le</TD></TR>
  <TR>
    <TD>"<CODE>&gt;</CODE>"</TD>
    <TD><EM>fs:</EM>gt</TD></TR>
  <TR>
    <TD>"<CODE>&gt;=</CODE>"</TD>
    <TD><EM>fs:</EM>ge</TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>There are no Core grammar productions for general comparisons as they are 
normalized to existentially quantified Core expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization rule for a general comparison expression first atomizes 
each argument by applying <CODE>fn:data</CODE> and then applies the 
existentially quantified <EM>SomeExpr</EM> expression to each sequence. The 
internal function <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A> 
is applied to each pair of atomic values. If the first argument to this function 
has type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
then the first argument is cast to type of the second argument. If the second 
argument has type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
the first argument is cast to a string. The overloaded internal function 
corresponding to the general comparison operator is then applied to the two 
converted values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>GeneralComp</EM> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>some $v1 in <CODE>fn:data</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) satisfies</TD></TR>
        <TR>
          <TD>some $v2 in <CODE>fn:data</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) satisfies</TD></TR>
        <TR>
          <TD>let $u1 := <A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>($v1, 
            $v2) return</TD></TR>
        <TR>
          <TD>let $u2 := <A 
            href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A>($v2, 
            $v1) return</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>GeneralComp</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_generalcomp"><SUB><FONT 
            size=2>GeneralComp</FONT></SUB></A> ($u1, 
  $u2)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_node-comparisons name=sec_node-comparisons></A>4.5.3 Node 
Comparisons</H4>
<P><B>Core Grammar</B></P>
<P>There are no Core grammar productions for node comparisons as they are 
normalized to other Core expressions.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization rules for node comparisons map each argument expression and 
then apply the internal function corresponding to the node comparison operator. 
The internal function are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <CODE>is</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp; <EM>fs:</EM><CODE>is-same-node</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>), (<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> &lt;&lt; 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><EM>fs:</EM><CODE>node-before</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>), (<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> &gt;&gt; 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><EM>fs:</EM><CODE>node-after</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>), (<FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics for the internal functions are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics for internal function is defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_operators"><B>[C.2 
Mapping of Overloaded Internal Functions]</B></A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=id-logical-expressions name=id-logical-expressions></A>4.6 Logical 
Expressions</H3>
<P><B>Introduction</B></P>
<P>A <B>logical expression</B> is either an <B>and-expression</B> or an 
<B>or-expression</B>. The value of a logical expression is always one of the 
boolean values: <CODE>true</CODE> or <CODE>false</CODE>.</P>
<H5><A id=N157A2 name=N157A2></A>Logical Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrExpr 
      name=doc-xquery-OrExpr></A>[<SMALL>46&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrExpr">OrExpr</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AndExpr">AndExpr</A> 
      ( "or" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AndExpr">AndExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AndExpr 
      name=doc-xquery-AndExpr></A>[<SMALL>47&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AndExpr">AndExpr</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ComparisonExpr">ComparisonExpr</A> 
      ( "and" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ComparisonExpr">ComparisonExpr</A> 
      )*</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for logical expressions are:</P>
<H5><A id=N157CF name=N157CF></A>Core Logical Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrExpr 
      name=doc-core-OrExpr></A>[<SMALL>36&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrExpr">OrExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AndExpr">AndExpr</A> 
      ( "or" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AndExpr">AndExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-AndExpr 
      name=doc-core-AndExpr></A>[<SMALL>37&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AndExpr">AndExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CastableExpr">CastableExpr</A> 
      ( "and" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CastableExpr">CastableExpr</A> 
      )*</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization rules for "<CODE>and</CODE>" and "<CODE>or</CODE>" first 
get the effective boolean value of each argument, then apply the appropriate 
Core operator.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <CODE>and</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>fn:boolean</CODE>((<FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) <CODE>and</CODE> 
      <CODE>fn:boolean</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <CODE>or</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><CODE>fn:boolean</CODE>((<FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) <CODE>or</CODE> 
      <CODE>fn:boolean</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The logical expressions require that each subexpression have type 
<CODE>xs:boolean</CODE>. The result type is also <CODE>xs:boolean</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>and</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>or</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics of logical expressions is non-deterministic. This 
non-determinism permits implementations to use short-circuit evaluation 
strategies when evaluating logical expressions. In the expression, 
<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <CODE>and</CODE> 
<EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>, if either expression raises an 
error or evaluates to false, the entire expression may raise an error or 
evaluate to false. In the expression, <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> <CODE>or</CODE> <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB>, if either expression raises an error or evaluates to 
true, the entire expression may raise an error or evaluate to true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>i</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,2 }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>and</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>and</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>i</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,2 }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>or</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <CODE>or</CODE> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_constructors name=sec_constructors></A>4.7 Constructors</H3>
<P>[XPath/XQuery] supports two forms of constructors. <B>Direct constructors</B> 
support literal XML syntax for elements, attributes, text nodes, 
processing-instructions and comments. <B>Computed constructors</B> can be used 
to construct elements, attributes, text nodes, processing-instructions, 
comments, and document nodes. All direct constructors are normalized into 
computed constructors, i.e., there are no direct-constructor expressions in the 
Core.</P>
<H5><A id=N15ADD name=N15ADD></A>Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Constructor 
      name=doc-xquery-Constructor></A>[<SMALL>94&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Constructor">Constructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirectConstructor">DirectConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ComputedConstructor">ComputedConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirectConstructor 
      name=doc-xquery-DirectConstructor></A>[<SMALL>95&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirectConstructor">DirectConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirElemConstructor">DirElemConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirCommentConstructor">DirCommentConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirPIConstructor">DirPIConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirElemConstructor 
      name=doc-xquery-DirElemConstructor></A>[<SMALL>96&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirElemConstructor">DirElemConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&lt;" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeList">DirAttributeList</A> 
      ("/&gt;" | ("&gt;" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirElemContent">DirElemContent</A>* 
      "&lt;/" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A>? 
      "&gt;"))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirElemContent 
      name=doc-xquery-DirElemContent></A>[<SMALL>101&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirElemContent">DirElemContent</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirectConstructor">DirectConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CDataSection">CDataSection</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CommonContent">CommonContent</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementContentChar">ElementContentChar</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ElementContentChar 
      name=doc-xquery-ElementContentChar></A>[<SMALL>148&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ElementContentChar">ElementContentChar</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A> 
      - [{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CommonContent 
      name=doc-xquery-CommonContent></A>[<SMALL>102&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CommonContent">CommonContent</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredefinedEntityRef">PredefinedEntityRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-CharRef">CharRef</A> 
      | "{{" | "}}" | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EnclosedExpr">EnclosedExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CDataSection 
      name=doc-xquery-CDataSection></A>[<SMALL>107&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CDataSection">CDataSection</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&lt;![CDATA[" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CDataSectionContents">CDataSectionContents</A> 
      "]]&gt;"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CDataSectionContents 
      name=doc-xquery-CDataSectionContents></A>[<SMALL>108&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CDataSectionContents">CDataSectionContents</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A>* 
      - (Char* ']]&gt;' Char*))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirAttributeList 
      name=doc-xquery-DirAttributeList></A>[<SMALL>97&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirAttributeList">DirAttributeList</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A>? 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue">DirAttributeValue</A>)?)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirAttributeValue 
      name=doc-xquery-DirAttributeValue></A>[<SMALL>98&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirAttributeValue">DirAttributeValue</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>('"' (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeQuot">EscapeQuot</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QuotAttrValueContent">QuotAttrValueContent</A>)* 
      '"')<BR>| ("'" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeApos">EscapeApos</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AposAttrValueContent">AposAttrValueContent</A>)* 
      "'")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-QuotAttrValueContent 
      name=doc-xquery-QuotAttrValueContent></A>[<SMALL>99&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-QuotAttrValueContent">QuotAttrValueContent</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QuotAttrContentChar">QuotAttrContentChar</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CommonContent">CommonContent</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AposAttrValueContent 
      name=doc-xquery-AposAttrValueContent></A>[<SMALL>100&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AposAttrValueContent">AposAttrValueContent</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AposAttrContentChar">AposAttrContentChar</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CommonContent">CommonContent</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-QuotAttrContentChar 
      name=doc-xquery-QuotAttrContentChar></A>[<SMALL>149&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-QuotAttrContentChar">QuotAttrContentChar</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A> 
      - ["{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-AposAttrContentChar 
      name=doc-xquery-AposAttrContentChar></A>[<SMALL>150&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-AposAttrContentChar">AposAttrContentChar</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A> 
      - ['{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-EscapeQuot 
      name=doc-xquery-EscapeQuot></A>[<SMALL>146&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-EscapeQuot">EscapeQuot</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>'""'</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-EscapeApos 
      name=doc-xquery-EscapeApos></A>[<SMALL>147&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-EscapeApos">EscapeApos</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"''"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-EnclosedExpr 
      name=doc-xquery-EnclosedExpr></A>[<SMALL>29&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-EnclosedExpr">EnclosedExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for constructors are:</P>
<H5><A id=N15C30 name=N15C30></A>Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Constructor 
      name=doc-core-Constructor></A>[<SMALL>64&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Constructor">Constructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ComputedConstructor">ComputedConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ComputedConstructor 
      name=doc-core-ComputedConstructor></A>[<SMALL>65&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ComputedConstructor">ComputedConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompDocConstructor">CompDocConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompElemConstructor">CompElemConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompAttrConstructor">CompAttrConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompTextConstructor">CompTextConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompCommentConstructor">CompCommentConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompPIConstructor">CompPIConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-EnclosedExpr 
      name=doc-core-EnclosedExpr></A>[<SMALL>21&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EnclosedExpr">EnclosedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P>There are no Core grammar productions for direct XML element or attribute 
constructors as they are normalized to computed constructors.</P>
<DIV class=div3>
<H4><A id=id_element_constructor name=id_element_constructor></A>4.7.1 Direct 
Element Constructors</H4>
<P><B>Introduction</B></P>
<P>The static and dynamic semantics of the direct forms of element and attribute 
constructors are specified on the equivalent computed element and attribute 
constructors.</P>
<P><B>Notation</B></P>
<P id=jd_map_element_content>The auxiliary mapping rules <FONT 
size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>ElementContent</FONT></SUB></A>, <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>ElementContentUnit</FONT></SUB></A>, <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>PartitionIntoUnits</FONT></SUB></A>, and <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>DirCharsUnits</FONT></SUB></A> are defined in this section and are used 
for the normalization of the content of direct element constructors.</P>
<P><B>Notation</B></P>
<P>An element-content unit is either a maximal contiguous sequence of literal 
characters (including character references, escaped braces, and predefined 
entity references), an enclosed expression, a direct element constructor, an XML 
comment, or an XML processing instruction. We use the following auxiliary 
grammar productions to describe element-content units.</P>
<H5><A id=N15CAE name=N15CAE></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ElementContentUnit 
      name=doc-fs-ElementContentUnit></A>[<SMALL>83&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementContentUnit</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirectConstructor">DirectConstructor</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EnclosedExpr">EnclosedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit">DirCharsUnit</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-DirCharsUnit 
      name=doc-fs-DirCharsUnit></A>[<SMALL>84&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>DirCharsUnit</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CDataSection">CDataSection</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredefinedEntityRef">PredefinedEntityRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-CharRef">CharRef</A> 
      | "{{" | "}}" | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementContentChar">ElementContentChar</A>)+</CODE></TD></TR></TBODY></TABLE>
<P>We use the auxiliary normalization rule <FONT size=6>[</FONT> 
<EM>DirElemContent</EM>* <FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>PartitionIntoUnits</FONT></SUB></A> to restructure the original element 
content, <EM>DirElemContent</EM>*, into the appropriate sequence of 
element-content units. This normalization rule is not specified formally.</P>
<P>Here are three direct element constructors, each of which contains one 
element-content unit:</P>
<DIV class=exampleInner><PRE>&lt;date&gt;{ xs:date("2003-03-18") }&lt;/date&gt;

&lt;name&gt;Dizzy Gillespie&lt;/name&gt;

&lt;comment&gt;&lt;!-- Just a comment --&gt;&lt;/comment&gt;
</PRE></DIV>
<P>The first contains one enclosed expression, the second contains one 
contiguous sequence of characters, and the third contains one XML comment.</P>
<P>After boundary whitespace is stripped, the next example contains six 
element-content units:</P>
<DIV class=exampleInner><PRE>&lt;address&gt;
  &lt;!-- Dizzy's address --&gt;
  { 123 }-0A &lt;street&gt;Roosevelt Ave.&lt;/street&gt; Flushing, NY { 11368 }
&lt;/address&gt;
</PRE></DIV>
<P>It contains an XML comment, followed by an enclosed expression that contains 
the integer 123, a contiguous sequence of characters ("-0A "), a direct XML 
element constructor, a contiguous sequence of characters (" Flushing, NY "), and 
an enclosed expression that contains the integer 11368. Evaluation of that 
constructor will result in the following element.</P>
<DIV class=exampleInner><PRE>&lt;address&gt;&lt;!-- Dizzy's address --&gt;123-0A &lt;street&gt;Roosevelt Ave.&lt;/street&gt; Flushing, NY 11368&lt;/address&gt;
</PRE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>We start by giving the rules for the two forms of direct XML element 
constructors. Note that the direct attribute constructors are normalized twice: 
the <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
size=2>NamespaceAttrs</FONT></SUB></A> normalizes the namespace-declaration 
attributes and <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
size=2>Attribute</FONT></SUB></A> normalizes all other attributes that are not 
namespace-declaration attributes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> &lt; 
      <EM>QName</EM> <EM>DirAttributeList</EM> &gt; <EM>DirElemContent</EM>* 
      &lt;/ <EM>QName</EM> S? &gt; <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <EM>QName</EM> { <FONT 
      size=6>[</FONT> <EM>DirAttributeList</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
      size=2>Attribute</FONT></SUB></A> , <FONT size=6>[</FONT> <FONT 
      size=6>[</FONT> <EM>DirElemContent</EM>* <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>PartitionIntoUnits</FONT></SUB></A> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContent</FONT></SUB></A> } { <FONT size=6>[</FONT> 
      <EM>DirAttributeList</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
      size=2>NamespaceAttrs</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> &lt; 
      <EM>QName</EM> <EM>DirAttributeList</EM> /&gt; <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <EM>QName</EM> { <FONT 
      size=6>[</FONT> <EM>DirAttributeList</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
      size=2>Attribute</FONT></SUB></A> } { <FONT size=6>[</FONT> 
      <EM>DirAttributeList</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
      size=2>NamespaceAttrs</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P>We can now give the rules for normalizing a direct element constructor's 
content. We distinguish between direct element constructors that contain only 
one element-content unit and those that contain more than one element-content 
unit.</P>
<P>Adjacent element-content units are convenient because they permit arbitrary 
interleaving of text and atomic data. During evaluation, atomic values are 
converted to text nodes containing the string representations of the atomic 
values, and then adjacent text nodes are concatenated together. In the example 
at the beginning of this section, the integer 123 is converted to a string and 
concatenated with "-0A" and the result is a single text node containing 
"123-0A".</P>
<P>Below are two examples of normalization for element constructors.</P>
<DIV class=exampleInner><PRE>&lt;date&gt;{ xs:date("2003-03-18") }&lt;/date&gt;
 =
element date { 
  fs:item-sequence-to-node-sequence(
    xs:date("2003-03-18")
  )
}

&lt;address&gt;
  &lt;!-- Dizzy's address --&gt;
  { 123 }-0A &lt;street&gt;Roosevelt Ave.&lt;/street&gt; Flushing, NY { 11368 }
&lt;/address&gt;
 =
element address {
  fs:item-sequence-to-node-sequence(
    comment { " Dizzy's address "},
    123, 
    text { "-0A "}, 
    element street {"Roosevelt Ave."},
    text { " Flushing, NY "  },
    11368
  )
}
</PRE></DIV>
<P>We normalize each unit individually and construct a sequence of the 
normalized results interleaved with empty text nodes. The empty text nodes 
guarantee that the results of evaluating consecutive element-content units can 
be distinguished. Then we apply the function <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A>. 
<A href="http://www.w3.org/TR/xquery#id-element-constructor">Section 3.7.1 
Direct Element Constructors</A><SUP><SMALL>XQ</SMALL></SUP> specifies the rules 
for converting a sequence of atomic values and nodes into a sequence of nodes 
before element construction. The Formal Semantics function <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A> 
implements these conversion rules.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContent</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A>((<FONT 
      size=6> [</FONT> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB>, ..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContent</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A>((<FONT 
      size=6> [</FONT> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A> , text { "" }, ..., text { "" 
      }, <FONT size=6>[</FONT> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit"><EM>ElementContentUnit</EM></A><SUB><FONT 
      size=2> n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<P>We must distinguish between the results of consecutive element-content units, 
because the rule for converting sequences of atomic values into strings applies 
to sequences within distinct enclosed expressions. The empty text nodes are 
eliminated during evaluation of <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A> 
when consecutive text nodes are coalesced into a single text node. The text node 
guarantees that a whitespace character will not be inserted between atomic 
values computed by distinct enclosed expressions. For example, here is an 
expression, its normalization, and the resulting XML value:</P>
<DIV class=exampleInner><PRE>&lt;example&gt;{ 1 }{ 2 }&lt;/example&gt;
 =
element example { fs:item-sequence-to-node-sequence ((1, text {""}, 2)) }
 ==&gt;
&lt;example&gt;12&lt;/example&gt;
</PRE></DIV>
<P>In the absence of the empty text node, the expression would evaluate to the 
following incorrect value:</P>
<DIV class=exampleInner><PRE>&lt;example&gt;{ 1 }{ 2 }&lt;/example&gt;
 (incorrect normalization) =
element example { fs:item-sequence-to-node-sequence ((1, 2)) }
 (incorrect value) ==&gt;
&lt;example&gt;1 2&lt;/example&gt;
</PRE></DIV>
<P>Next, we give the normalization rules for each element-content unit. The 
normalization rule for a contiguous sequence of characters assumes that the 
significant whitespace characters in element constructors have been preserved, 
as described in <A 
href="REC-xquery-semantics-20070123.htm#sec_whitespace"><B>[4.7.1.4 
Boundary Whitespace]</B></A>.</P>
<P>The following normalization rule takes the longest consecutive sequence of 
individual characters that include literal characters, escaped curly braces, 
character references, and predefined entity references and normalizes the 
character sequence as a text node containing the string of characters.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit"><EM>DirCharsUnit</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>text { <FONT size=6>[</FONT> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit"><EM>DirCharsUnit</EM></A> 
      <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>DirCharsUnits</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P>The application of <FONT size=6>[</FONT><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>DirCharsUnits</FONT></SUB></A> to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit"><EM>DirCharsUnit</EM></A> 
is defined informally. It produces a string literal corresponding to the content 
of the <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit"><EM>DirCharsUnit</EM></A>, 
in boundary whitespace is processed and non-literal characters (CharRefs, 
PredefinedEntityRefs, CDataSections, and escaped-braces) are resolved according 
to the rules in <A href="http://www.w3.org/TR/xquery#id-content">Section 3.7.1.3 
Content</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P>XML processing instructions and comments in element content are normalized by 
applying the standard normalization rules for expressions, which appear in <A 
href="REC-xquery-semantics-20070123.htm#sec_other_constructors"><B>[4.7.2 
Other Direct Constructors]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirPIConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirPIConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirCommentConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirCommentConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>A direct element constructor is normalized using the normalization rule for 
expressions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirElemConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DirElemConstructor</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>An enclosed expression in element content is normalized by normalizing each 
individual expression in its expression sequence and then constructing a 
sequence of the normalized values:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> { 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> } <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
      size=2>ElementContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> , ..., <FONT size=6>[</FONT> 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no additional static typing rules for direct XML element or 
attribute constructors.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>There are no additional dynamic evaluation rules for direct XML element or 
attribute constructors.</P>
<DIV class=div4>
<H5><A id=sec_direct_attributes name=sec_direct_attributes></A>4.7.1.1 
Attributes</H5>
<P>Like direct element constructors, direct attribute constructors are 
normalized to computed attribute constructors.</P>
<P><B>Notation</B></P>
<P id=jd_map_attr_content>The auxiliary mapping rules <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
size=2>Attribute</FONT></SUB></A>, <FONT size=6>[</FONT><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
size=2>AttributeContent</FONT></SUB></A>, and <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
size=2>AttributeContentUnit</FONT></SUB></A>, are defined in this section and 
are used for the normalization of direct attribute constructors.</P>
<P>We use the following grammar productions to represent 
<EM>AttributeContentUnit</EM>s, i.e., the expressions used to compute the 
content of an attribute.</P>
<H5><A id=N15F67 name=N15F67></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeContentUnits 
      name=doc-fs-AttributeContentUnits></A>[<SMALL>87&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeContentUnits</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContentUnit">AttributeContentUnit</A>*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeContentUnit 
      name=doc-fs-AttributeContentUnit></A>[<SMALL>88&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeContentUnit</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeQuot">EscapeQuot</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QuotAttrValueContent">QuotAttrValueContent</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P id=sec_attribute_normalization>Direct attributes may contain 
namespace-declaration attributes. The normalization rules in this section ignore 
namespace-declaration attributes -- they are handled by the normalization rules 
in <A 
href="REC-xquery-semantics-20070123.htm#sec_namespace_attrs"><B>[4.7.1.2 
Namespace Declaration Attributes]</B></A>.</P>
<P>A <EM>DirAttributeList</EM> is normalized by the following rule, which maps 
each of the individual attribute-value expressions in the attribute list and 
constructs a sequence of the normalized values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE>
        <TBODY>
        <TR>
          <TD><EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> 1</FONT></SUB></TD></TR>
        <TR>
          <TD>...</TD></TR>
        <TR>
          <TD><EM>QName</EM><SUB><FONT size=2>n</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> n</FONT></SUB></TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
      size=2>Attribute</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>(<FONT size=6>[</FONT><EM>QName</EM><SUB><FONT 
            size=2>1</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> 1</FONT></SUB> <FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
            size=2>Attribute</FONT></SUB></A></TD></TR>
        <TR>
          <TD>...,</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>QName</EM><SUB><FONT 
            size=2>n</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
            size=2>Attribute</FONT></SUB></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P id=jd_map_attribute>Namespace-declaration attributes, i.e., those attributes 
whose prefix is <CODE>xmlns</CODE> are ignored by mapping them to the empty 
sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>Prefix</EM>:<EM>LocalPart</EM> S? = S? 
            <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><FONT 
            size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
            size=2>Attribute</FONT></SUB></A></TD></TR>
        <TR>
          <TD>(<EM>Prefix</EM> = <CODE>xmlns</CODE>)</TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>()</TD></TR></TBODY></TABLE></DIV>
<P>All attributes that are not namespace-declaration attributes are mapped to 
computed attribute constructors.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>Prefix</EM>:<EM>LocalPart</EM> S? = S? 
            " <EM>AttributeContentUnits</EM> "<FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_attribute"><SUB><FONT 
            size=2>Attribute</FONT></SUB></A></TD></TR>
        <TR>
          <TD><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>Prefix</EM> 
            = <CODE>xmlns</CODE>)</TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute 
      <EM>Prefix</EM>:<EM>LocalPart</EM> { <FONT 
      size=6>[</FONT><EM>AttributeContentUnits</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContent</FONT></SUB></A>}</TD></TR></TBODY></TABLE></DIV>
<P>As with literal XML elements, we need to distinguish between direct attribute 
constructors that contain one attribute-content unit and those that contain 
multiple attribute-content units, because the rule for converting sequences of 
atomic values into strings is applied to sequences within distinct enclosed 
expressions. If the direct attribute constructor contains exactly one 
attribute-content unit, we simply normalize that unit by applying the 
normalization rule for attribute content units:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>AttributeContentUnit</EM><SUB><FONT size=2>1</FONT></SUB> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContent</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>AttributeContentUnit</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContentUnit</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>If the direct attribute constructor contains more than one attribute-content 
unit, we normalize each unit individually and construct a sequence of the 
normalized results interleaved with empty text nodes. The empty text nodes 
guarantee that the results of evaluating consecutive attribute-content units can 
be distinguished. Then we apply the function <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>, 
which applies the appropriate conversion rules to the normalized attribute 
content:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>AttributeContentUnit</EM><SUB><FONT size=2>1</FONT></SUB> ... 
      <EM>AttributeContentUnit</EM><SUB><FONT size=2>n</FONT></SUB> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContent</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>((<FONT 
      size=6> [</FONT> <EM>AttributeContentUnit</EM><SUB><FONT 
      size=2>1</FONT></SUB> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContentUnit</FONT></SUB></A> , text { "" }, ..., text 
      {""}, <FONT size=6>[</FONT> <EM>AttributeContentUnit</EM><SUB><FONT 
      size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContentUnit</FONT></SUB></A>))</TD></TR></TBODY></TABLE></DIV>
<P>Literal characters, escaped curly braces, character references, and 
predefined entity references in attribute content are treated as in element 
content. In addition, the normalization rule for characters in attributes 
assumes:</P>
<OL class=enumar>
  <LI>
  <P>that an escaped single or double quote is converted to an individual single 
  or double quote.</P></LI></OL>
<P>The following normalization rules take the longest consecutive sequence of 
individual characters that include literal characters, escaped curly braces, 
escaped quotes, character references, predefined entity references, and escaped 
single and double quotes and normalizes the character sequence as a string.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>( 
      <EM>Char</EM> | <EM>CharRef</EM> | <EM>EscapeQuot</EM> | 
      <EM>EscapeApos</EM> | <EM>PredefinedEntityRef</EM> ) +<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
      align=middle><CODE>fn:codepoints-to-string</CODE>(( <EM>Char</EM> | 
      <EM>CharRef</EM> | <EM>EscapeQuot</EM> | <EM>EscapeApos</EM> | 
      <EM>PredefinedEntityRef</EM> )+)</TD></TR></TBODY></TABLE></DIV>
<P>We normalize an enclosed expression by normalizing each individual expression 
in its expression sequence and then constructing a sequence of the normalized 
values:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> { 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> } <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_attr_content"><SUB><FONT 
      size=2>AttributeContentUnit</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(<FONT size=6>[</FONT> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> , ..., <FONT size=6>[</FONT> 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_namespace_attrs name=sec_namespace_attrs></A>4.7.1.2 Namespace 
Declaration Attributes</H5>
<P><B>Notation</B></P>
<P id=jd_map_namespace_attr>The auxiliary mapping rules <FONT 
size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
size=2>NamespaceAttr</FONT></SUB></A>, and <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
size=2>NamespaceAttrs</FONT></SUB></A> are defined in this section and are used 
for the normalization of namespace declaration attributes.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Some direct attributes may be namespace-declaration attributes. The 
normalization rules for namespace-declaration attributes ignore all 
non-namespace attributes -- they are handled by the normalization rules in <A 
href="REC-xquery-semantics-20070123.htm#sec_direct_attributes"><B>[4.7.1.1 
Attributes]</B></A>.</P>
<P>A <EM>DirAttributeList</EM> containing namespace-declaration attributes is 
normalized by the following rule, which maps each of the individual 
namespace-declaration attributes in the attribute list and constructs a sequence 
of the normalized namespace attribute values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE>
        <TBODY>
        <TR>
          <TD><EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> 1</FONT></SUB></TD></TR>
        <TR>
          <TD>...</TD></TR>
        <TR>
          <TD><EM>QName</EM><SUB><FONT size=2>n</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> n</FONT></SUB></TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
      size=2>NamespaceAttrs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>(<FONT size=6>[</FONT><EM>QName</EM><SUB><FONT 
            size=2>1</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> 1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
            size=2>NamespaceAttr</FONT></SUB></A></TD></TR>
        <TR>
          <TD>...,</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>QName</EM><SUB><FONT 
            size=2>n</FONT></SUB> S? = S? <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><SUB><FONT 
            size=2> n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
            size=2>NamespaceAttr</FONT></SUB></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>Attributes whose prefix is not <CODE>xmlns</CODE> are ignored by mapping them 
to the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>Prefix</EM>:<EM>LocalPart</EM> S? = S? 
            <A 
            href="REC-xquery-semantics-20070123.htm#doc-xquery-DirAttributeValue"><EM>DirAttributeValue</EM></A><FONT 
            size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
            size=2>NamespaceAttr</FONT></SUB></A></TD></TR>
        <TR>
          <TD><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>Prefix</EM> 
            = <CODE>xmlns</CODE>)</TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>()</TD></TR></TBODY></TABLE></DIV>
<P>Namespace-declaration attributes are normalized to local namespace 
declarations (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A>). 
The content of such attributes must be defined with a URI literal.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD><FONT size=6>[</FONT><EM>Prefix</EM>:<EM>LocalPart</EM> S? = S? 
            " <EM>URILiteral</EM> "<FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_namespace_attr"><SUB><FONT 
            size=2>NamespaceAttr</FONT></SUB></A></TD></TR>
        <TR>
          <TD>(<EM>Prefix</EM> = <CODE>xmlns</CODE>)</TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>namespace <EM>LocalPart</EM> { 
      <EM>URILiteral</EM> }</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_content name=sec_content></A>4.7.1.3 Content</H5>
<P>The rules for normalizing element content are given above in <A 
href="REC-xquery-semantics-20070123.htm#id_element_constructor"><B>[4.7.1 
Direct Element Constructors]</B></A>.</P></DIV>
<DIV class=div4>
<H5><A id=sec_whitespace name=sec_whitespace></A>4.7.1.4 Boundary 
Whitespace</H5>
<P><A href="http://www.w3.org/TR/xquery#id-whitespace">Section 3.7.1.4 Boundary 
Whitespace</A><SUP><SMALL>XQ</SMALL></SUP> describes how whitespace is processed 
in element constructors depending on the value of the 
<CODE>boundary-space</CODE> declaration in the query prolog. The Formal 
Semantics assumes that the rules for handling whitespace are applied by the 
(informally defined) auxiliary rule <FONT size=6>[</FONT><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_element_content"><SUB><FONT 
size=2>DirCharsUnits</FONT></SUB></A>.</P></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_other_constructors name=sec_other_constructors></A>4.7.2 Other 
Direct Constructors</H4>
<H5><A id=N162B8 name=N162B8></A>Other Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirPIConstructor 
      name=doc-xquery-DirPIConstructor></A>[<SMALL>105&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirPIConstructor">DirPIConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&lt;?" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-PITarget">PITarget</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirPIContents">DirPIContents</A>)? 
      "?&gt;"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirPIContents 
      name=doc-xquery-DirPIContents></A>[<SMALL>106&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirPIContents">DirPIContents</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A>* 
      - (Char* '?&gt;' Char*))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirCommentConstructor 
      name=doc-xquery-DirCommentConstructor></A>[<SMALL>103&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirCommentConstructor">DirCommentConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&lt;!--" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirCommentContents">DirCommentContents</A> 
      "--&gt;"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DirCommentContents 
      name=doc-xquery-DirCommentContents></A>[<SMALL>104&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DirCommentContents">DirCommentContents</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>((<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A> 
      - '-') | ('-' (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A> 
      - '-')))*</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_characters>The auxiliary mapping rule <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
size=2>Characters</FONT></SUB></A> is defined in this section and used for the 
normalization of direct PI and comment constructors.</P>
<P><FONT size=6>[</FONT><EM>Char</EM>*<FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
size=2>Characters</FONT></SUB></A> takes the character content of a PI or 
comment constructor and yields a corresponding <EM>StringLiteral</EM>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A literal XML processing instruction is normalized into a computed 
processing-instruction constructor; its character content is converted to a 
string using the auxiliary mapping rule <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
size=2>Characters</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>&lt;? 
      <EM>NCName</EM> <EM>DirPIContents</EM> ?&gt;<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction <EM>NCName</EM> { <FONT 
      size=6>[</FONT><EM>DirPIContents</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
      size=2>Characters</FONT></SUB></A> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>A literal XML comment is normalized into a computed comment constructor; its 
character content is converted to a string using the auxiliary mapping rule 
<FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
size=2>Characters</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>&lt;!-- 
      <EM>DirCommentContents</EM> --&gt;<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>comment { 
      <FONT size=6>[</FONT><EM>DirCommentContents</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_characters"><SUB><FONT 
      size=2>Characters</FONT></SUB></A> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no additional static typing rules for direct processing-instruction 
or comment constructors.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>There are no additional dynamic evaluation rules for direct 
processing-instruction or comment constructors.</P></DIV>
<DIV class=div3>
<H4><A id=sec_computedConstructors name=sec_computedConstructors></A>4.7.3 
Computed Constructors</H4>
<H5><A id=N1639E name=N1639E></A>Computed Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ComputedConstructor 
      name=doc-xquery-ComputedConstructor></A>[<SMALL>109&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ComputedConstructor">ComputedConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompDocConstructor">CompDocConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompElemConstructor">CompElemConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompAttrConstructor">CompAttrConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompTextConstructor">CompTextConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompCommentConstructor">CompCommentConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CompPIConstructor">CompPIConstructor</A></CODE></TD></TR></TBODY></TABLE>
<DIV class=div4>
<H5><A id=sec_comp_elem_constructor name=sec_comp_elem_constructor></A>4.7.3.1 
Computed Element Constructors</H5>
<P><B>Introduction</B></P>
<P>This section describes the semantics of computed element constructors. 
Remember that direct element constructors are normalized into computed element 
constructors. This document does not formally specify how namespaces are copied. 
The semantics of namespaces copying in element constructors can be found in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>.</P>
<H5><A id=N163DA name=N163DA></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompElemConstructor 
      name=doc-xquery-CompElemConstructor></A>[<SMALL>111&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompElemConstructor">CompElemConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ContentExpr">ContentExpr</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ContentExpr 
      name=doc-xquery-ContentExpr></A>[<SMALL>112&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ContentExpr">ContentExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for computed element constructors are:</P>
<H5><A id=N16407 name=N16407></A>Computed Element Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompElemConstructor 
      name=doc-core-CompElemConstructor></A>[<SMALL>67&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompElemConstructor">CompElemConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ContentExpr">ContentExpr</A> 
      "}" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NamespaceBinding">NamespaceBinding</A>* 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ContentExpr 
      name=doc-core-ContentExpr></A>[<SMALL>69&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ContentExpr">ContentExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-NamespaceBinding 
      name=doc-core-NamespaceBinding></A>[<SMALL>68&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NamespaceBinding">NamespaceBinding</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>If the content expression is missing, the computed element constructor is 
normalized as if its content expression was the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element 
      <EM>QName</EM> { }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element 
      <EM>QName</EM> { () }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Computed element constructors are normalized using the <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A> 
function over their content expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element 
      <EM>QName</EM> { <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <EM>QName</EM> { <A 
      href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<P>When the name of the element is also computed, the normalization rule applies 
atomization to the name expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>element { 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element { 
      <CODE>fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }{ <A 
      href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P id=jd_add_namespace_bindings>The following auxiliary judgment adds a sequence 
of namespace bindings to the static context.</P>
<DIV align=center><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
namespace bindings</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>This judgment is defined as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> = namespace 
                  <EM>LocalPart</EM><SUB><FONT size=2>1</FONT></SUB> { 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> = namespace 
                  <EM>LocalPart</EM><SUB><FONT size=2>n</FONT></SUB> { 
                  <EM>URILiteral</EM><SUB><FONT size=2>n</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
                  = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>LocalPart</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; (passive, 
                  <EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB>))</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB>.<A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
                  = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n-1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>LocalPart</EM><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; (passive, 
                  <EM>AnyURI</EM><SUB><FONT 
            size=2>n</FONT></SUB>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> ... <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The normalization rules of direct element and attribute constructors leave us 
with only the computed forms of constructors. The static semantics for 
constructors is defined on all the computed forms. The computed element 
constructor itself has two forms: one in which the element name is a literal 
<EM>QName</EM>, and the other in which the element name is a computed 
expression.</P>
<P>A computed element constructor creates a new element with either the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
(in strip construction mode), or with the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <CODE>xs:anyType</CODE> (in preserve 
construction mode). The content expression must return a sequence of nodes with 
all the attribute nodes before any element, processing-instructions or comment 
nodes. Note that the type allows text nodes interleaved with attribute nodes in 
the beginning. Although this results in a looser type checking, this accounts 
for the possible presence of empty text nodes resulting from normalization of 
direct element constructors (See <A 
href="REC-xquery-semantics-20070123.htm#id_element_constructor"><B>[4.7.1 
Direct Element Constructors]</B></A>).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = preserve</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (attribute*, (element | comment | processing-instruction)*) 
                  &amp; text*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> element <EM>QName</EM> { 
      <EM>Expr</EM> } { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      element <EM>QName</EM> of type 
<CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = strip</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (attribute*, (element | comment | processing-instruction)*) 
                  &amp; text*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> element <EM>QName</EM> { 
      <EM>Expr</EM> } { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      element <EM>QName</EM> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case the element name is computed as well, the name expression must be of 
type <CODE>xs:QName</CODE>, <CODE>xs:string</CODE>, or <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = preserve</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (<CODE>xs:QName</CODE> | <CODE>xs:string</CODE> | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (attribute*, (element | comment | processing-instruction)*) 
                  &amp; text*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> element { 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> } { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      element of type <CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = strip</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>add 
                  namespace bindings</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>to</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_add_namespace_bindings"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (<CODE>xs:QName</CODE> | <CODE>xs:string</CODE> | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (attribute*, (element | comment | processing-instruction)*) 
                  &amp; text*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> element { 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> } { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      element of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The following rules take a computed element constructor expression and 
construct an element node. The dynamic semantics for computed element 
constructors is the most complex of all expressions in XQuery. Here is how to 
read the rule below.</P>
<P>First, the element's content expression is partitioned into the local 
namespace declarations and all other expressions, and the local namespace 
declarations are evaluated, yielding a sequence of namespace bindings. The 
static environment is extended to include the new namespace bindings, which are 
all <A 
href="REC-xquery-semantics-20070123.htm#term_active">active</A>. 
In <A href="http://www.w3.org/TR/xquery#id-namespaces">Section 3.7.1.2 Namespace 
Declaration Attributes</A><SUP><SMALL>XQ</SMALL></SUP>, it is 
implementation-defined whether undeclaration of namespace prefixes (by setting 
the namespace prefix to the zero-length string) in an element constructor is 
supported. In the dynamic semantics below, we assume all local namespace 
declarations declare a binding of a prefix to a URI.</P>
<P>Second, the expression is evaluated, and the resulting value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>0</FONT></SUB> must match zero-or-more attributes followed by 
zero-or-more element, text, processing-instruction or comment nodes.</P>
<P>Third, the namespace bindings are concatenated with the list of active 
namespaces in the namespace environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A> 
and the namespaces corresponding to the element's name and all attributes names. 
The resulting sequence is the sequence of namespace bindings for the 
element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Expr</EM> = <EM>Expr</EM><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB>; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>0</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  (attribute*, (element | text | processing-instruction | 
                  comment)*)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
      <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <EM>QName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      element <EM>QName</EM> of type <CODE>xs:anyType</CODE> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> } { }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Expr</EM> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB>, <EM>Expr</EM><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> = namespace <EM>NCName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> { <EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> = namespace <EM>NCName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> { <EM>AnyURI</EM><SUB><FONT 
                  size=2>n</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; (active, <EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB>))</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n-1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; (active, <EM>AnyURI</EM><SUB><FONT 
                  size=2>n</FONT></SUB>))</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB>; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>0</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  (attribute*, (element | text | processing-instruction | 
                  comment)*)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding"><EM>NamespaceBinding</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#fs_activeNS">fs:<CODE>active_ns</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>), 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#fs_ns_from_items">fs:<CODE>get_static_ns_from_items</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
      <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <EM>QName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      element <EM>QName</EM> of type <CODE>xs:anyType</CODE> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> } { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings"><EM>NamespaceBindings</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The dynamic evaluation of an element constructor with a computed name is 
similar. There is one additional rule that checks that the value of the 
element's name expression matches <CODE>xs:QName</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B><EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <CODE>xs:QName</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>QName</EM> = <CODE>fn:prefix-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>)<CODE>:</CODE><CODE>fn:local-name-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"> 
                  <EM>Value</EM></A><SUB><FONT size=2>0</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  element <EM>QName</EM> { <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> } <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      element { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_attribute_constructor name=sec_attribute_constructor></A>4.7.3.2 
Computed Attribute Constructors</H5>
<H5><A id=N16CBE name=N16CBE></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompAttrConstructor 
      name=doc-xquery-CompAttrConstructor></A>[<SMALL>113&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompAttrConstructor">CompAttrConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for computed attribute constructors is:</P>
<H5><A id=N16CDF name=N16CDF></A>Computed Attribute Constructors</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompAttrConstructor 
      name=doc-core-CompAttrConstructor></A>[<SMALL>70&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompAttrConstructor">CompAttrConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Computed attribute constructors are normalized by mapping their name and 
content expression in a similar way as computed element constructors. The 
normalization rule uses the <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>attribute 
      <EM>QName</EM> { }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>attribute 
      <EM>QName</EM> { () }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>attribute 
      <EM>QName</EM> { <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute <EM>QName</EM> { <A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>attribute 
      { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> }<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute { 
      <CODE>fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) } { <A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The normalization rules for direct attribute constructors leave us with only 
the computed form of the attribute constructors. Like in a computed element 
constructor, a computed attribute constructor has two forms: one in which the 
attribute name is a literal <EM>QName</EM>, and the other in which the attribute 
name is a computed expression.</P>
<P>In the case of attribute constructors, the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> is always <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <EM>QName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      attribute <EM>QName</EM> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (<CODE>xs:QName</CODE> | <CODE>xs:string</CODE> | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      attribute of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The following rules take a computed attribute constructor expression and 
construct an attribute node. The rules are similar to those rules for element 
constructors. First, the attribute's name is expanded into a qualified name. 
Second, the function <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
is applied to the content expression and this function call is evaluated in the 
dynamic environment. Recall from <A 
href="REC-xquery-semantics-20070123.htm#sec_attribute_constructor"><B>[4.7.3.2 
Computed Attribute Constructors]</B></A> that during normalization, we do not 
convert the content of direct attribute constructors that contain one 
attribute-content unit. This guarantees that useful type information is 
preserved for static analysis. Since the conversion function <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
was not applied to all attribute constructors during normalization, we have to 
apply it at evaluation time. (As before, it is possible to elide the application 
of <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
injected during normalization and the application injected during 
evaluation.)</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>(<EM> 
                  Expr</EM>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <EM>QName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      attribute <EM>QName</EM> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <CODE>xs:QName</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> = 
                  <CODE>fn:prefix-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)<CODE>:</CODE><CODE>fn:local-name-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"> 
                  <EM>Value</EM></A><SUB><FONT size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A>(<EM> 
                  Expr</EM><SUB><FONT size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_documentConstructors name=sec_documentConstructors></A>4.7.3.3 
Document Node Constructors</H5>
<H5><A id=N16FFF name=N16FFF></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompDocConstructor 
      name=doc-xquery-CompDocConstructor></A>[<SMALL>110&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompDocConstructor">CompDocConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for a computed document constructor is:</P>
<H5><A id=N17014 name=N17014></A>Core computed document constructor</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompDocConstructor 
      name=doc-core-CompDocConstructor></A>[<SMALL>66&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompDocConstructor">CompDocConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A document node constructor contains an expression, which must evaluate to a 
sequence of element, text, comment, or processing-instruction nodes. <A 
href="http://www.w3.org/TR/xquery#id-documentConstructors">Section 3.7.3.3 
Document Node Constructors</A><SUP><SMALL>XQ</SMALL></SUP> specifies the rules 
for converting a sequence of atomic values and nodes into a sequence of nodes 
before document construction. The built-in function <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes_doc"><B>[7.1.6 
The fs:item-sequence-to-node-sequence-doc function]</B></A> implements this 
conversion.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>document { 
      <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>document { <A 
      href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence-doc</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rule does not need to check that the type of the argument 
expression is a sequence of element, text, processing-instruction, and comment 
nodes, as it is already checked by the <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence-doc</CODE></A> 
introduced during normalization. The type of the entire expression is the most 
general <CODE>document</CODE> type, because the document constructor erases all 
<A href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> on its content nodes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      document { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic semantics checks that the argument expression evaluates to a 
value that is a sequence of element, text, processing-instruction, or comment 
nodes. The entire expression evaluates to a new document node value. If the 
construction mode is set to <CODE>strip</CODE>, the <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> for all the nodes in content of a 
document node are erased.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = preserve</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  (element | text | processing-instruction | 
              comment)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      document { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A> 
                  = strip</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  (element | text | processing-instruction | 
              comment)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      document { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_textConstructors name=sec_textConstructors></A>4.7.3.4 Text Node 
Constructors</H5>
<H5><A id=N171BB name=N171BB></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompTextConstructor 
      name=doc-xquery-CompTextConstructor></A>[<SMALL>114&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompTextConstructor">CompTextConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for a computed text constructor is:</P>
<H5><A id=N171D0 name=N171D0></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompTextConstructor 
      name=doc-core-CompTextConstructor></A>[<SMALL>71&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompTextConstructor">CompTextConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A text node constructor contains an expression, which must evaluate to an 
<CODE>xs:string</CODE> value. <A 
href="http://www.w3.org/TR/xquery#id-textConstructors">Section 3.7.3.4 Text Node 
Constructors</A><SUP><SMALL>XQ</SMALL></SUP> specifies the rules for converting 
a sequence of atomic values into a string prior to construction of a text node. 
Each node is replaced by its string value. For each adjacent sequence of one or 
more atomic values returned by an enclosed expression, a untyped atomic value is 
constructed, containing the canonical lexical representation of all the atomic 
values, with a single blank character inserted between adjacent values. As 
formal specification of these conversion rules is not instructive, <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><B>[7.1.7 
The fs:item-sequence-to-untypedAtomic function]</B></A> implements this 
conversion.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>text { 
      <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>text { (<A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_text"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-text</CODE></A>(<CODE> 
      fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)))) cast as <CODE>xs:string</CODE>? 
  }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics checks that the argument expression has type 
<CODE>xs:string</CODE> or <CODE>empty</CODE>. The type of the entire expression 
is an optional text node type, as the text node constructor returns the empty 
sequence if its argument is the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:string</CODE>?</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      text { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      text?</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the argument expression returns the empty sequence, the text node 
constructor returns the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <CODE>()</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      text { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <CODE>()</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the argument expression returns a value of type <CODE>xs:string</CODE>, 
the text node constructor returns a text node with that string as content.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <CODE>xs:string</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      text { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      text { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_computed-pis name=sec_computed-pis></A>4.7.3.5 Computed Processing 
Instruction Constructors</H5>
<H5><A id=N17308 name=N17308></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompPIConstructor 
      name=doc-xquery-CompPIConstructor></A>[<SMALL>116&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompPIConstructor">CompPIConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for computed processing-instruction constructors 
is:</P>
<H5><A id=N17329 name=N17329></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompPIConstructor 
      name=doc-core-CompPIConstructor></A>[<SMALL>73&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompPIConstructor">CompPIConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Computed processing-instruction constructors are normalized by mapping their 
name and content expression in the same way that computed element and attribute 
constructors are normalized.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction <EM>NCName</EM> { }<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction <EM>NCName</EM> { () }<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction <EM>NCName</EM> { <EM>Expr</EM> 
      }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>processing-instruction 
      <EM>NCName</EM> { <A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-PI</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>processing-instruction { <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB> } { <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> 
      }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>processing-instruction { 
      <CODE>fn:data</CODE>((<FONT size=6>[</FONT><EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) } { <A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-PI</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>)) }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rules for processing-instruction constructors are 
straightforward.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      processing-instruction <EM>NCName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      processing-instruction</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      (<CODE>xs:NCName</CODE> | <CODE>xs:string</CODE> | <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>) 
      &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      processing-instruction { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      processing-instruction</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic evaluation rules for computed processing-instructions are 
straightforward.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      processing-instruction <EM>NCName</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      processing-instruction <EM>NCName</EM> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  (<CODE>xs:NCName</CODE> | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  | <CODE>xs:string</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>xs:NCName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = <EM>NCName</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      processing-instruction { <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> } { 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      processing-instruction <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB> { 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_computed-comments name=sec_computed-comments></A>4.7.3.6 Computed 
Comment Constructors</H5>
<H5><A id=N175BF name=N175BF></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CompCommentConstructor 
      name=doc-xquery-CompCommentConstructor></A>[<SMALL>115&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CompCommentConstructor">CompCommentConstructor</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for computed comment constructors is:</P>
<H5><A id=N175D4 name=N175D4></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CompCommentConstructor 
      name=doc-core-CompCommentConstructor></A>[<SMALL>72&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompCommentConstructor">CompCommentConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Computed comment constructors are normalized by mapping their content 
expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>comment { 
      <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>comment { (<A 
      href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_comment"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-comment</CODE></A>((<FONT 
      size=6> [</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A>))) cast as <CODE>xs:string</CODE> 
  }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rule for computed comment constructors is 
straightforward.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:string</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      comment { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      comment</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The dynamic evaluation rule for computed comment constructors is 
straightforward.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <CODE>xs:string</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      comment { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      comment { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div3>
<H4><A id=id-ns-nodes-on-elements name=id-ns-nodes-on-elements></A>4.7.4 
In-scope Namespaces of a Constructed Element</H4>
<P>The effect of in-scope namespaces on constructed elements is specified in <A 
href="REC-xquery-semantics-20070123.htm#id_element_constructor"><B>[4.7.1 
Direct Element Constructors]</B></A> and <A 
href="REC-xquery-semantics-20070123.htm#sec_comp_elem_constructor"><B>[4.7.3.1 
Computed Element Constructors]</B></A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_for-expressions name=sec_for-expressions></A>4.8 [For/FLWOR] 
Expressions</H3>
<P><B>Introduction</B></P>
<P>[XPath/XQuery] provides [For/FLWOR] expressions for iteration, for binding 
variables to intermediate results, and filtering bound variables according to a 
predicate.</P>
<P>A <EM>FLWORExpr</EM> in XQuery 1.0 consists of a sequence of 
<EM>ForClause</EM>s and <EM>LetClause</EM>s, followed by an optional 
<EM>WhereClause</EM>, followed by an optional <EM>OrderByClause</EM>, as 
described by the following grammar productions. Each variable binding is 
preceded by an optional type declaration which specify the type expected for the 
variable.</P>
<P>The dynamic semantics of the ordering mode in FLWOR expressions is not 
specified formally, as it would require the introduction of tuples, which are 
not supported in the [XPath/XQuery] data model.</P>
<H5><A id=N176DC name=N176DC></A>[For/FLWOR] Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-FLWORExpr 
      name=doc-xquery-FLWORExpr></A>[<SMALL>33&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-FLWORExpr">FLWORExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-LetClause">LetClause</A>)+ 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-WhereClause">WhereClause</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderByClause">OrderByClause</A>? 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ForClause 
      name=doc-xquery-ForClause></A>[<SMALL>34&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ForClause">ForClause</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"for" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PositionalVar">PositionalVar</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PositionalVar">PositionalVar</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-LetClause 
      name=doc-xquery-LetClause></A>[<SMALL>36&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-LetClause">LetClause</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"let" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      ":=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      ":=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-TypeDeclaration 
      name=doc-xquery-TypeDeclaration></A>[<SMALL>118&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-TypeDeclaration">TypeDeclaration</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PositionalVar 
      name=doc-xquery-PositionalVar></A>[<SMALL>35&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PositionalVar">PositionalVar</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"at" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-WhereClause 
      name=doc-xquery-WhereClause></A>[<SMALL>37&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-WhereClause">WhereClause</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"where" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderByClause 
      name=doc-xquery-OrderByClause></A>[<SMALL>38&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderByClause">OrderByClause</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("order" "by") | ("stable" "order" "by")) <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderSpecList">OrderSpecList</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderSpecList 
      name=doc-xquery-OrderSpecList></A>[<SMALL>39&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderSpecList">OrderSpecList</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderSpec">OrderSpec</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderSpec">OrderSpec</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderSpec 
      name=doc-xquery-OrderSpec></A>[<SMALL>40&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderSpec">OrderSpec</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderModifier">OrderModifier</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderModifier 
      name=doc-xquery-OrderModifier></A>[<SMALL>41&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderModifier">OrderModifier</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("ascending" | "descending")? ("empty" ("greatest" | "least"))? 
      ("collation" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xpath-ForExpr 
      name=doc-xpath-ForExpr></A>[<SMALL>4&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-ForExpr">ForExpr</A><SUP><SMALL> 
      XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xpath-SimpleForClause">SimpleForClause</A> 
      "return" ExprSingle</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xpath-SimpleForClause 
      name=doc-xpath-SimpleForClause></A>[<SMALL>5&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-SimpleForClause">SimpleForClause</A><SUP> 
      <SMALL>XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"for" "$" VarName "in" ExprSingle ("," "$" VarName "in" 
      ExprSingle)*</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for FLWOR expressions are:</P>
<H5><A id=N177FC name=N177FC></A>For Expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-FLWORExpr 
      name=doc-core-FLWORExpr></A>[<SMALL>24&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FLWORExpr">FLWORExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-LetClause">LetClause</A>) 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ForClause 
      name=doc-core-ForClause></A>[<SMALL>25&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForClause">ForClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"for" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PositionalVar">PositionalVar</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-LetClause 
      name=doc-core-LetClause></A>[<SMALL>27&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-LetClause">LetClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"let" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>? 
      ":=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-PositionalVar 
      name=doc-core-PositionalVar></A>[<SMALL>26&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PositionalVar">PositionalVar</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"at" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-TypeDeclaration 
      name=doc-core-TypeDeclaration></A>[<SMALL>75&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderByClause 
      name=doc-core-OrderByClause></A>[<SMALL>28&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderByClause">OrderByClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("order" "by") | ("stable" "order" "by")) <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderSpecList">OrderSpecList</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderSpecList 
      name=doc-core-OrderSpecList></A>[<SMALL>29&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderSpecList">OrderSpecList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderSpec">OrderSpec</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderSpec">OrderSpec</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderSpec 
      name=doc-core-OrderSpec></A>[<SMALL>30&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderSpec">OrderSpec</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderModifier">OrderModifier</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderModifier 
      name=doc-core-OrderModifier></A>[<SMALL>31&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderModifier">OrderModifier</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("ascending" | "descending")? ("empty" ("greatest" | "least"))? 
      ("collation" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A>)?</CODE></TD></TR></TBODY></TABLE>
<DIV class=div3>
<H4><A id=sec_flwor-expressions name=sec_flwor-expressions></A>4.8.1 FLWOR 
expressions</H4>
<P><B>Notation</B></P>
<P>For convenience, we introduce the following auxiliary grammar productions to 
represent optional type declarations and positional variables in For and Let 
clauses.</P>
<H5><A id=N178AC name=N178AC></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptTypeDeclaration 
      name=doc-fs-OptTypeDeclaration></A>[<SMALL>79&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptTypeDeclaration</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptPositionalVar 
      name=doc-fs-OptPositionalVar></A>[<SMALL>80&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptPositionalVar</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PositionalVar">PositionalVar</A>?</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>To facilitate the specification of normalization, we also introduce the 
following auxiliary grammar productions as an alternative grammar for FLWOR 
expressions.</P>
<H5><A id=N178CD name=N178CD></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalFLWORClause 
      name=doc-fs-FormalFLWORClause></A>[<SMALL>65&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalFLWORClause</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-LetClause">LetClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-WhereClause">WhereClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderByClause">OrderByClause</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalReturnClause 
      name=doc-fs-FormalReturnClause></A>[<SMALL>66&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalReturnClause</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalFLWORExpr">FormalFLWORExpr</A> 
      | ("return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalFLWORExpr 
      name=doc-fs-FormalFLWORExpr></A>[<SMALL>67&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalFLWORExpr</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalFLWORClause">FormalFLWORClause</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalReturnClause">FormalReturnClause</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Full FLWOR expressions are normalized to nested Core FLWOR expressions with a 
single for or let clause. Note that some of the normalization rules below accept 
ungrammatical FLWOR expressions such as "where <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>". 
This does not matter, as normalization is always applied on parsed 
[XPath/XQuery] expressions, and such ungrammatical FLWOR expressions would be 
rejected by the parser beforehand.</P>
<P>Normalized FLWOR expressions restrict a For and Let clause to bind only one 
variable. Otherwise, the Core FLWOR expression is the same as the XQuery FLWOR 
expression. The first normalization rule is applied on a full [For/FLWOR] 
expression, splitting it at the clause level, then applying further 
normalization on each separate clause.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE>
        <TBODY>
        <TR>
          <TD>for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptPositionalVar</EM><SUB><FONT size=2>1</FONT></SUB> in 
            <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>,</TD></TR>
        <TR>
          <TD>···,</TD></TR>
        <TR>
          <TD>$<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>n</FONT></SUB> 
            <EM>OptPositionalVar</EM><SUB><FONT size=2>n</FONT></SUB> in 
            <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD><EM>FormalReturnClause</EM></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptPositionalVar</EM><SUB><FONT size=2>1</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;···</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; for $<EM>VarName</EM><SUB><FONT 
            size=2>n</FONT></SUB> <EM>OptTypeDeclaration</EM><SUB><FONT 
            size=2>n</FONT></SUB> <EM>OptPositionalVar</EM><SUB><FONT 
            size=2>n</FONT></SUB> in <FONT size=6>[</FONT> 
            <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>FormalReturnClause</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>Likewise, a <EM>LetClause</EM> clause is normalized to nested let 
expressions, each of which binds one variable:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>1</FONT></SUB> := 
            <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>,</TD></TR>
        <TR>
          <TD>···,</TD></TR>
        <TR>
          <TD>$<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>n</FONT></SUB> := 
            <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD><EM>FormalReturnClause</EM></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
            <EM>OptTypeDeclaration</EM><SUB><FONT size=2>1</FONT></SUB> := <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;···</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;let $<EM>VarName</EM><SUB><FONT 
            size=2>n</FONT></SUB> <EM>OptTypeDeclaration</EM><SUB><FONT 
            size=2>n</FONT></SUB> := <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>FormalReturnClause</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P>A <EM>WhereClause</EM> is normalized to an <EM>IfExpr</EM>, with the 
else-branch returning the empty sequence:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> where 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>FormalReturnClause</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>if ( <FONT 
      size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> ) then <FONT 
      size=6>[</FONT><EM>FormalReturnClause</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> else ()</TD></TR></TBODY></TABLE></DIV>
<P>The order by clause is normalized using the auxiliary mapping rule <FONT 
size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
size=2>OrderSpecList</FONT></SUB></A> which is defined in <A 
href="REC-xquery-semantics-20070123.htm#id_orderby_clause"><B>[4.8.4 
Order By and Return Clauses]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> stable? 
      order by <EM>OrderSpecList</EM> <EM>FormalReturnClause</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OrderSpecList</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A> return <FONT 
      size=6>[</FONT><EM>FormalReturnClause</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Finally, a stand-alone return clause is normalized into the corresponding 
expression. Recall that <CODE>return</CODE> keywords are introduced in the 
previous rule after the normalization of each clause.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> return 
      <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B>Example</B></P>
<P>The following simple example illustrates how a <EM>FLWORExpr</EM> is 
normalized. The <CODE>for</CODE> expression in the example below is used to 
iterate over two collections, binding variables <CODE>$i</CODE> and 
<CODE>$j</CODE> to items in these collections. It uses a <CODE>let</CODE> clause 
to bind the local variable <CODE>$k</CODE> to the sum of both numbers, and a 
<CODE>where</CODE> clause to select only those numbers that have a sum equal to 
or greater than the integer <CODE>5</CODE>.</P>
<DIV class=exampleInner><PRE>  for $i as xs:integer in (1, 2),
      $j in (3, 4)
  let $k := $i + $j
  where $k &gt;= 5
  return
    &lt;tuple&gt;
       &lt;i&gt; { $i } &lt;/i&gt;
       &lt;j&gt; { $j } &lt;/j&gt;
    &lt;/tuple&gt;
</PRE></DIV>
<P>By the first set of rules, this is normalized to (except for the operators 
and element constructor which are not treated here):</P>
<DIV class=exampleInner><PRE>  for $i as xs:integer in (1, 2) return
    for $j in (3, 4) return
      let $k := $i + $j return
        if ($k &gt;= 5) then 
          &lt;tuple&gt;
            &lt;i&gt; { $i } &lt;/i&gt;
            &lt;j&gt; { $j } &lt;/j&gt;
          &lt;/tuple&gt;
        else
          ()
</PRE></DIV>
<P>For each binding of <CODE>$i</CODE> to an item in the sequence <CODE>(1 , 
2)</CODE> the inner <CODE>for</CODE> expression iterates over the sequence 
<CODE>(3 , 4)</CODE> to produce tuples ordered by the ordering of the outer 
sequence and then by the ordering of the inner sequence. This Core expression 
eventually results in the following document fragment:</P>
<DIV class=exampleInner><PRE>  (&lt;tuple&gt;
      &lt;i&gt;1&lt;/i&gt;
      &lt;j&gt;4&lt;/j&gt;
   &lt;/tuple&gt;,
   &lt;tuple&gt;
      &lt;i&gt;2&lt;/i&gt;
      &lt;j&gt;3&lt;/j&gt;
   &lt;/tuple&gt;,
   &lt;tuple&gt;
      &lt;i&gt;2&lt;/i&gt;
      &lt;j&gt;4&lt;/j&gt;
   &lt;/tuple&gt;)
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=id-for-expression name=id-for-expression></A>4.8.2 For expression</H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>A single <CODE>for</CODE> expression is typed as follows: First <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> of the iteration expression <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> is inferred. Then the <A title="prime type" 
href="REC-xquery-semantics-20070123.htm#term-prime-type">prime 
type</A> of <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>), is computed. This is a union over all item types in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> (See <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>). With the 
variable component of the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
extended with $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as type <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>), the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> of <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> is 
inferred. Because the <CODE>for</CODE> expression iterates over the result of 
<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, the final type of the iteration 
is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> multiplied with the possible number of items in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> (one, <CODE>?</CODE>, <CODE>*</CODE>, or <CODE>+</CODE>). 
This number is determined by the auxiliary type-function <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>). Operations between quantifiers and types, such as <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>), used in the following rule, are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> return 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>When a positional variable <EM>Variable</EM><SUB><FONT 
size=2>pos</FONT></SUB> is present, the static environment is also extended with 
the positional variable typed as an <CODE>xs:integer</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>);<EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; <CODE>xs:integer</CODE>) 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> at 
      $<EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> return 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>When a type declaration is present, the static semantics also checks that the 
type of the input expression is a subtype of the declared type and extends the 
static environment by typing $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
with type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB>. This semantics is specified by the following static 
typing rule.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>The last rule handles For expressions that contain a type declaration and a 
positional variable. When the positional variable is present, the static 
environment is also extended with the positional variable typed as an 
integer.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>; <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; <CODE>xs:integer</CODE>) 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> at $<EM>VarName</EM><SUB><FONT 
      size=2>pos</FONT></SUB> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Example</B></P>
<P>For example, if <CODE>$example</CODE> is bound to the sequence <CODE>10.0, 
1.0E1, 10</CODE> of type <CODE>xs:decimal, xs:float, xs:integer</CODE>, then the 
query</P>
<DIV class=exampleInner><PRE>  for $s in $example
  return $s * 2
</PRE></DIV>
<P>is typed as follows:</P>
<DIV class=exampleInner><PRE>  (1) prime(xs:decimal, xs:float, xs:integer) =
      xs:decimal | xs:float | xs:integer
  (2) quantifier(xs:decimal, xs:float, xs:integer) = +
  (3) $s : xs:decimal | xs:float | xs:integer
  (4) $s * 2 : 
      xs:decimal | xs:float | xs:integer
  (5) result-type :
      ( xs:decimal | xs:float | xs:integer ) +
</PRE></DIV>
<P>This result-type is not the most specific type possible. It does not take 
into account the order of elements in the input type, and it ignores the 
individual and overall number of elements in the input type. The most specific 
type possible is: <CODE>xs:decimal, xs:float, xs:integer</CODE>. However, 
inferring such a specific type for arbitrary input types and arbitrary return 
clauses requires significantly more complex static typing rules. In addition, if 
put into the context of an element, the specific type violates the "unique 
particle attribution" restriction of XML schema, which requires that an element 
must have a unique content model within a particular context.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The evaluation of a <CODE>for</CODE> expression distinguishes two cases: If 
the iteration expression <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> evaluates 
to the empty sequence, then the entire expression evaluates to the empty 
sequence:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      ()</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>OptTypeDeclaration</EM> <EM>OptPositionalVar</EM> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> return 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, the iteration expression <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> is evaluated to produce the sequence <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, ..., <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
size=2>n</FONT></SUB>. For each item <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
size=2>i</FONT></SUB> in this sequence, the body of the <CODE>for</CODE> 
expression <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> is evaluated in the 
dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
extended with $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> bound to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
size=2>i</FONT></SUB>. This produces values <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>i</FONT></SUB>, ..., <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>n</FONT></SUB> which are concatenated to produce the result sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ,..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>n</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The following rule is the same as the rule above, but includes the optional 
positional variable $<EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB>. If 
present, $<EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB> is bound to the 
position of the item in the input sequence, i.e., the value <EM>i</EM>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>; <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; 1) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>; <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; n) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM> at $<EM>VarName</EM><SUB><FONT 
      size=2>pos</FONT></SUB> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ,..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>n</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>When a type declaration is present, the dynamic semantics also checks that 
each item in the result of evaluating <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> matches the declared type. This semantics is specified by 
the following dynamic evaluation rule.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM> as <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB> return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ,..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>n</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The last rule covers a <CODE>for</CODE> expression that contains a type 
declaration and a positional variable.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>; <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; 1) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>; <EM>Variable</EM><SUB><FONT 
                  size=2>pos</FONT></SUB> =&gt; n) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      for $<EM>VarName</EM> as <EM>SequenceType</EM> at 
      $<EM>VarName</EM><SUB><FONT size=2>pos</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> return 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ,..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>n</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that this definition allows <EM>non-deterministic</EM> evaluation of the 
resulting sequence, since the preconditions in the above rule can be evaluated 
in any order.</P>
<P><B>Example</B></P>
<P>Note that if the expression in the <CODE>return</CODE> clause results in a 
sequence, sequences are never nested in the [XPath/XQuery] data model. For 
instance, in the following for expression:</P>
<DIV class=exampleInner><PRE>  
  for $i in (1,2)
    return (&lt;i&gt; {$i} &lt;/i&gt;, &lt;negi&gt; {-$i} &lt;/negi&gt;)
</PRE></DIV>
<P>each iteration in the <CODE>for</CODE> results in a sequence of two elements, 
which are then concatenated and flattened in the resulting sequence:</P>
<DIV class=exampleInner><PRE>  
  (&lt;i&gt;1&lt;/i&gt;,
   &lt;negi&gt;-1&lt;/negi&gt;,
   &lt;i&gt;2&lt;/i&gt;,
   &lt;negi&gt;-2&lt;/negi&gt;)
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_lets name=sec_lets></A>4.8.3 Let Expression</H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>A <CODE>let</CODE> expression extends the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
with <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> of type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> inferred from <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB>, and infers the type of <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB> in the extended environment to produce the result type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      let $<EM>VarName</EM> := <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>When a type declaration is present, the static semantics also checks that the 
type of the input expression is a subtype of the declared type and extends the 
static environment by typing <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> 
with type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB>. This semantics is specified by the following static 
typing rule.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> ) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      let $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> := <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>A <CODE>let</CODE> expression extends the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
with <EM>Variable</EM> bound to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> returned by <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, 
and evaluates <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> in the extended 
environment to produce <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      let $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> := 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> return 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>When a type declaration is present, the dynamic semantics also checks that 
the result of evaluating <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> matches 
the declared type. This semantics is specified as the following dynamic 
evaluation rule.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      let $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> := <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      return <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Example</B></P>
<P>Note the use of the environments to define the scope of each variable. For 
instance, in the following nested <CODE>let</CODE> expression:</P>
<DIV class=exampleInner><PRE>  let $k := 5 return
    let $k := $k + 1 return
      $k+1
</PRE></DIV>
<P>the outermost <CODE>let</CODE> expression binds variable <CODE>$k</CODE> to 
the integer <CODE>5</CODE> in the environment, then the expression 
<CODE>$k+1</CODE> is computed, yielding value <CODE>6</CODE>, to which the 
second variable <CODE>$k</CODE> is bound. The expression then results in the 
final integer <CODE>7</CODE>.</P></DIV>
<DIV class=div3>
<H4><A id=id_orderby_clause name=id_orderby_clause></A>4.8.4 Order By and Return 
Clauses</H4>
<P><B>Introduction</B></P>
<P>The dynamic semantics of the <EM>OrderByClause</EM> is not specified 
formally, as doing so would require the introduction of tuples, which are not 
supported in the [XPath/XQuery] data model. The dynamic semantics of the 
order-by clause can be found in <A 
href="http://www.w3.org/TR/xquery#id-orderby-return">Section 3.8.3 Order By and 
Return Clauses</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P>Although an <EM>OrderByClause</EM> does not affect the type of a 
<EM>FLWORExpr</EM> expression, it must still undergo static analysis, in case 
this raises a static error. The static semantics of a <EM>FLWORExpr</EM> 
expression with an <EM>OrderByClause</EM> is equivalent to the static semantics 
of an equivalent <EM>FLWORExpr</EM> in which the <EM>OrderByClause</EM> is 
replaced by a call to the <CODE>gt</CODE> comparison over the corresponding 
<EM>OrderSpec</EM> expression(s).</P>
<P><B>Notation</B></P>
<P id=jd_map_orderspeclist>To define normalization of OrderBy, the following 
auxiliary mapping rule is used.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OrderSpecList</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>LetClause</EM> ... 
      <EM>LetClause</EM></TD></TR></TBODY></TABLE></DIV>
<P>This rules specifies that <EM>OrderSpecList</EM> is mapped to a sequence of 
<EM>LetClause</EM>s.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Proper static typing for FLWOR expressions with an <EM>OrderByClause</EM> is 
obtained by normalizing the <EM>OrderByClause</EM> to a Let clause, nested For 
expressions, and atomization, then by applying the standard static typing rules 
for those expressions. Note that if evaluated dynamically, the normalization of 
<EM>OrderByClause</EM> given here does not express the required sorting 
semantics. Notably, the normalization rule introduces the <CODE>gt</CODE> 
operation which is used implicitely in the semantics of order by.</P>
<P>Each <EM>OrderSpec</EM> is normalized by the following rules.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OrderSpec</EM><SUB><FONT size=2>1</FONT></SUB> ... 
      <EM>OrderSpec</EM><SUB><FONT size=2>n</FONT></SUB><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OrderSpec</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A>, ... <FONT 
      size=6>[</FONT><EM>OrderSpec</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> <EM>OrderModifier</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
      size=2>OrderSpecList</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>let $<EM>fs:</EM>new<SUB><FONT size=2>0</FONT></SUB> :=</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; let $<EM>fs:</EM>new<SUB><FONT 
            size=2>1</FONT></SUB> := <FONT size=6>[</FONT><EM>Expr</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; for $<EM>fs:</EM>new<SUB><FONT 
            size=2>2</FONT></SUB> in $<EM>fs:</EM>new<SUB><FONT 
            size=2>1</FONT></SUB> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; for $<EM>fs:</EM>new<SUB><FONT 
            size=2>3</FONT></SUB> in $<EM>fs:</EM>new<SUB><FONT 
            size=2>1</FONT></SUB> return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; <FONT 
            size=6>[</FONT>$<EM>fs:</EM>new<SUB><FONT size=2>2</FONT></SUB> gt 
            $<EM>fs:</EM>new<SUB><FONT size=2>3</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A></TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>OrderSpecList</EM><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_orderspeclist"><SUB><FONT 
            size=2>OrderSpecList</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_unordered-expressions name=sec_unordered-expressions></A>4.9 
Ordered and Unordered Expressions</H3>
<P><B>Introduction</B></P>
<P>The purpose of <CODE>ordered</CODE> and <CODE>unordered</CODE> expressions is 
to set the ordering mode in the static context to <CODE>ordered</CODE> or 
<CODE>unordered</CODE> for a certain region in a query. The specified ordering 
mode applies to the expression nested inside the curly braces.</P>
<H5><A id=N18A90 name=N18A90></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderedExpr 
      name=doc-xquery-OrderedExpr></A>[<SMALL>91&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderedExpr">OrderedExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"ordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-UnorderedExpr 
      name=doc-xquery-UnorderedExpr></A>[<SMALL>92&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-UnorderedExpr">UnorderedExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"unordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for ordered/unordered expressions are:</P>
<H5><A id=N18AB3 name=N18AB3></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderedExpr 
      name=doc-core-OrderedExpr></A>[<SMALL>61&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderedExpr">OrderedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"ordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-UnorderedExpr 
      name=doc-core-UnorderedExpr></A>[<SMALL>62&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-UnorderedExpr">UnorderedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"unordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P><EM>OrderedExpr</EM> (resp. <EM>UnorderedExpr</EM>) expressions are 
normalized to <EM>OrderedExpr</EM> (resp. <EM>UnorderedExpr</EM>) expressions in 
the [XPath/XQuery] Core.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>ordered { 
      <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>ordered { <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>unordered 
      { <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>unordered { <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P><EM>OrderedExpr</EM> and <EM>UnorderedExpr</EM> expressions set the ordering 
mode in the static context to <CODE>ordered</CODE> or 
<CODE>unordered</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A>(<CODE>ordered</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      ordered { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A>(<CODE>unordered</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      unordered { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P><EM>OrderedExpr</EM> and <EM>UnorderedExpr</EM> expressions only have an 
effect on the static context. The effect on the evaluation of its 
subexpression(s) is captured using the <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
function, which introduced during normalization of axis steps, 
<CODE>union</CODE>, <CODE>intersect</CODE>, and <CODE>except</CODE> expressions, 
and FLWOR expressions that have no <CODE>order by</CODE> clause.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      ordered { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      unordered { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_conditionals name=sec_conditionals></A>4.10 Conditional 
Expressions</H3>
<P><B>Introduction</B></P>
<P>A conditional expression supports conditional evaluation of one of two 
expressions.</P>
<H5><A id=N18CAD name=N18CAD></A>Conditional Expression</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-IfExpr 
      name=doc-xquery-IfExpr></A>[<SMALL>45&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-IfExpr">IfExpr</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"if" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      ")" "then" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      "else" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for the conditional expression is:</P>
<H5><A id=N18CCF name=N18CCF></A>Core Conditional Expression</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-IfExpr 
      name=doc-core-IfExpr></A>[<SMALL>35&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-IfExpr">IfExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"if" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      ")" "then" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      "else" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Conditional expressions are normalized as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>if 
      (<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>) then 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> else <EM>Expr</EM><SUB><FONT 
      size=2>3</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;if (<CODE>fn:boolean</CODE>((<FONT size=6>[</FONT> 
            <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))) then <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> else <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <CODE>if</CODE> (<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>) 
      <CODE>then</CODE> <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> 
      <CODE>else</CODE> <EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the conditional's boolean expression <EM>Expr</EM><SUB><FONT 
size=2>1</FONT></SUB> evaluates to true, <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB> is evaluated and its value is produced. If the 
conditional's boolean expression evaluates to false, <EM>Expr</EM><SUB><FONT 
size=2>3</FONT></SUB> is evaluated and its value is produced. Note that the 
existence of two separate dynamic evaluation rules ensures that only one branch 
of the conditional is evaluated.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      if (<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>) then 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> else <EM>Expr</EM><SUB><FONT 
      size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM><SUB><FONT size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      if (<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>) then 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> else <EM>Expr</EM><SUB><FONT 
      size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=id-quantified-expressions name=id-quantified-expressions></A>4.11 
Quantified Expressions</H3>
<P><B>Introduction</B></P>
<P>[XPath/XQuery] defines two quantification expressions:</P>
<H5><A id=N18EB9 name=N18EB9></A>Quantified Expression</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-QuantifiedExpr 
      name=doc-xquery-QuantifiedExpr></A>[<SMALL>42&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-QuantifiedExpr">QuantifiedExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("some" | "every") "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A> 
      ("," "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>)* 
      "satisfies" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N189CB.doc-xpath-QuantifiedExpr 
      name=noid_N189CB.doc-xpath-QuantifiedExpr></A>[<SMALL>6&nbsp;(XPath)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xpath20/#prod-xpath-QuantifiedExpr">QuantifiedExpr</A><SUP> 
      <SMALL>XP</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("some" | "every") "$" VarName "in" ExprSingle ("," "$" VarName 
      "in" ExprSingle)* "satisfies" ExprSingle</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for quantified expressions is:</P>
<H5><A id=N18F17 name=N18F17></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-QuantifiedExpr 
      name=doc-core-QuantifiedExpr></A>[<SMALL>32&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QuantifiedExpr">QuantifiedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("some" | "every") "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A> 
      ("," "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A>)* 
      "satisfies" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The quantified expressions are normalized into nested Core quantified 
expressions, each of which binds one variable.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>some 
      $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
      $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> satisfies <EM>Expr</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; some $<EM>VarName</EM><SUB><FONT 
            size=2>2</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;...</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; some $<EM>VarName</EM><SUB><FONT 
            size=2>n</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; <CODE>fn:boolean</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>every 
      $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
      $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> satisfies <EM>Expr</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp; every $<EM>VarName</EM><SUB><FONT 
            size=2>2</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;...</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; every $<EM>VarName</EM><SUB><FONT 
            size=2>n</FONT></SUB> in <FONT 
            size=6>[</FONT><EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> satisfies</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp; <CODE>fn:boolean</CODE>((<FONT 
            size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics of the quantified expressions uses the notion of <A 
title="prime type" 
href="REC-xquery-semantics-20070123.htm#term-prime-type">prime 
type</A>. These rules are similar to those for <CODE>for</CODE> expressions in 
<A 
href="REC-xquery-semantics-20070123.htm#id-for-expression"><B>[4.8.2 
For expression]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>SomeExpr</EM> with the optional type 
declaration.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>EveryExpr</EM> without the optional type 
declaration.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>EveryExpr</EM> with the optional type 
declaration.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If its input expression returns the empty sequence, the <EM>SomeExpr</EM> 
expression returns false.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>OptTypeDeclaration</EM> in <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB> satisfies <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false</TD></TR></TBODY></TABLE><BR></DIV>
<P>The <EM>SomeExpr</EM> expression yields true if any evaluation of the 
satisfies expression yields true. The <EM>SomeExpr</EM> expression yields false 
if every evaluation of the satisfies expression is false. A quantified 
expression may raise an error if any evaluation of the satisfies expression 
raises an error. The dynamic semantics of quantified expressions is 
non-deterministic. This non-determinism permits implementations to use 
short-circuit evaluation strategies when evaluating quantified expressions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,...,n }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>SomeExpr</EM> with the optional type declaration, in 
which some evaluation of the satisfies expression yields true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,...,n }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>SomeExpr</EM> without the optional type declaration, 
in which all evaluations of the satisfies expression yield false.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>SomeExpr</EM> with the optional type declaration, in 
which all evaluations of the satisfies expression yield false.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      some $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false</TD></TR></TBODY></TABLE><BR></DIV>
<P>If its input expression returns the empty sequence, the <EM>EveryExpr</EM> 
expression returns true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> 
      <EM>OptTypeDeclaration</EM> in <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB> satisfies <EM>Expr</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true</TD></TR></TBODY></TABLE><BR></DIV>
<P>The <EM>EveryExpr</EM> expression yields false if any evaluation of the 
satisfies expression yields false. The <EM>EveryExpr</EM> expression yields true 
if every evaluation of the satisfies expression is true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,...,n }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>EveryExpr</EM> with the optional type declaration, 
in which some evaluation of the satisfies expression yields false.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>i</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR>
              <TR vAlign=center align=middle>
                <TD>i <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { 1,...,n }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      false</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>EveryExpr</EM> in which all evaluations of the 
satisfies expression yield true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> in 
      <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> satisfies 
      <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true</TD></TR></TBODY></TABLE><BR></DIV>
<P>The next rule is for <EM>EveryExpr</EM> with the optional type declaration in 
which all evaluations of the satisfies expression yield true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> = <FONT size=6>[</FONT> 
                  <EM>SequenceType</EM> <FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      every $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM> in <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> 
      satisfies <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      true</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_sequencetype-matching name=sec_sequencetype-matching></A>4.12 
Expressions on SequenceTypes</H3>
<P><B>Introduction</B></P>
<P>Some of the expressions relying on the SequenceTypes syntax are called 
expressions on SequenceTypes. The syntax of SequenceTypes is described in <A 
href="REC-xquery-semantics-20070123.htm#id-sequencetype"><B>[3.5.3 
SequenceType Syntax]</B></A>.</P>
<DIV class=div3>
<H4><A id=sec_instance-of name=sec_instance-of></A>4.12.1 Instance Of</H4>
<H5><A id=N19BF2 name=N19BF2></A>SequenceType expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-InstanceofExpr 
      name=doc-xquery-InstanceofExpr></A>[<SMALL>54&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-InstanceofExpr">InstanceofExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TreatExpr">TreatExpr</A> 
      ( "instance" "of" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A> 
      )?</CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>The SequenceType expression "<EM>Expr</EM> instance of <EM>SequenceType</EM>" 
is true if and only if the result of evaluating expression <EM>Expr</EM> is an 
instance of the type referred to by <EM>SequenceType</EM>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>An <EM>InstanceofExpr</EM> expression is normalized into a 
<EM>TypeswitchExpr</EM> expression. Note that the following normalization rule 
uses a variable $<EM>fs:</EM>new, which is a newly created variable which must 
not conflict with any variables already in scope. This variable is necessary to 
comply with the syntax of typeswitch expressions in the Core [XPath/XQuery], but 
is never used.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> instance of <EM>SequenceType</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>typeswitch (<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;case $<EM>fs:</EM>new as <EM>SequenceType</EM> 
            return <CODE>fn:true</CODE>()</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;default $<EM>fs:</EM>new return 
            <CODE>fn:false</CODE>()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_typeswitch name=sec_typeswitch></A>4.12.2 Typeswitch</H4>
<H5><A id=N19C71 name=N19C71></A>SequenceType expressions</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-TypeswitchExpr 
      name=doc-xquery-TypeswitchExpr></A>[<SMALL>43&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-TypeswitchExpr">TypeswitchExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"typeswitch" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      ")" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CaseClause">CaseClause</A>+ 
      "default" ("$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A>)? 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CaseClause 
      name=doc-xquery-CaseClause></A>[<SMALL>44&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CaseClause">CaseClause</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"case" ("$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarName">VarName</A> 
      "as")? <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>The <B>typeswitch</B> expression chooses one of several expressions to 
evaluate based on the dynamic type of an input value.</P>
<P>Each branch of a typeswitch expression may have an optional 
$<EM>VarName</EM>, which is bound to the value of the input expression. One 
reason for using a variable on one of the branches is that it is assigned a type 
specific for that branch. This variable is optional in [XPath/XQuery] but made 
mandatory in the [XPath/XQuery] Core.</P>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for <CODE>typeswitch</CODE> are:</P>
<H5><A id=N19CC1 name=N19CC1></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-TypeswitchExpr 
      name=doc-core-TypeswitchExpr></A>[<SMALL>33&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeswitchExpr">TypeswitchExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"typeswitch" "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      ")" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CaseClause">CaseClause</A>+ 
      "default" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CaseClause 
      name=doc-core-CaseClause></A>[<SMALL>34&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CaseClause">CaseClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"case" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>For convenience, we introduce the following auxiliary grammar production.</P>
<H5><A id=N19D00 name=N19D00></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptVarName 
      name=doc-fs-OptVarName></A>[<SMALL>81&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptVarName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A>)?</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_case>To define normalization of case clauses to the [XPath/XQuery] 
Core, the following auxiliary mapping rules are used.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>CaseClause</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
      size=2>Case</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>CaseClause</EM></TD></TR></TBODY></TABLE></DIV>
<P>specifies that <EM>CaseClause</EM> is mapped to <EM>CaseClause</EM>, in the 
[XPath/XQuery] Core.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Normalization of a typeswitch expression guarantees that every branch has an 
associated $<EM>VarName</EM>. The following normalization rules add newly 
created variables that must not conflict with any variables already in 
scope.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      &nbsp;&nbsp;case <EM>SequenceType</EM> return <EM>Expr</EM> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
      size=2>Case</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>&nbsp;&nbsp;case 
      $<EM>fs:</EM>new<SUB><FONT size=2>1</FONT></SUB> as <EM>SequenceType</EM> 
      return <FONT size=6>[</FONT> <EM>Expr</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      &nbsp;&nbsp;case $<EM>VarName</EM> as <EM>SequenceType</EM> return 
      <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
      size=2>Case</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>&nbsp;&nbsp;case 
      $<EM>VarName</EM> as <EM>SequenceType</EM> return <FONT size=6>[</FONT> 
      <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> default 
      return <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
      size=2>Case</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>default 
      $<EM>fs:</EM>new<SUB><FONT size=2>1</FONT></SUB> return <FONT 
      size=6>[</FONT> <EM>Expr</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> default 
      $<EM>VarName</EM> return <EM>Expr</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
      size=2>Case</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>default $<EM>VarName</EM> 
      return <FONT size=6>[</FONT> <EM>Expr</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE>
        <TBODY>
        <TR>
          <TD>typeswitch ( <EM>Expr</EM><SUB><FONT size=2>0</FONT></SUB> 
        )</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;<EM>CaseClause</EM><SUB><FONT 
          size=2>1</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;···</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;<EM>CaseClause</EM><SUB><FONT 
          size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;default <EM>OptVarName</EM> return 
            <EM>Expr</EM><SUB><FONT 
      size=2>n+1</FONT></SUB></TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>typeswitch ( <FONT size=6>[</FONT> <EM>Expr</EM><SUB><FONT 
            size=2>0</FONT></SUB> <FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A> )</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>CaseClause</EM><SUB><FONT 
            size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
            size=2>Case</FONT></SUB></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;···</TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT><EM>CaseClause</EM><SUB><FONT 
            size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
            size=2>Case</FONT></SUB></A></TD></TR>
        <TR>
          <TD><FONT size=6>[</FONT>&nbsp;&nbsp;default <EM>OptVarName</EM> 
            return <EM>Expr</EM><SUB><FONT size=2>n+1</FONT></SUB> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_case"><SUB><FONT 
            size=2>Case</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>For convenience, we use the following auxiliary grammar productions to denote 
case clauses in a typeswitch.</P>
<H5><A id=N19E92 name=N19E92></A>FormalCaseClauses</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalCaseClauses 
      name=doc-fs-FormalCaseClauses></A>[<SMALL>68&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalCaseClauses</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalCaseClause">FormalCaseClause</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalCaseClauses">FormalCaseClauses</A>) 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalDefaultCaseClause">FormalDefaultCaseClause</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalCaseClause 
      name=doc-fs-FormalCaseClause></A>[<SMALL>69&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalCaseClause</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"case" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FormalDefaultCaseClause 
      name=doc-fs-FormalDefaultCaseClause></A>[<SMALL>70&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FormalDefaultCaseClause</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"default" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY></TABLE>
<P id=jd_type_case>The following judgments</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
<EM>FormalCaseClause</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
<EM>FormalDefaultCaseClause</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>is used in the static semantics of typeswitch. It indicates that under the 
static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
and with the input type of the typeswitch being <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, the given case clause yields the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<P id=jd_against>The following judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
<EM>FormalCaseClauses</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>is used in the dynamic semantics of typeswitch. It indicates that under the 
dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>, 
with the input value of the typeswitch being <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, the given case clauses yield the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rules for the typeswitch expression are simple. Each case 
clause and the default clause of the typeswitch is typed independently. The type 
of the entire typeswitch expression is the union of the types of all the 
clauses.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>0</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
                  case $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
                  <EM>SequenceType</EM><SUB><FONT size=2>1</FONT></SUB> return 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>&nbsp;&nbsp;&nbsp;&nbsp;···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
                  case $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> as 
                  <EM>SequenceType</EM><SUB><FONT size=2>n</FONT></SUB> return 
                  <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
                  default $<EM>VarName</EM><SUB><FONT size=2>n+1</FONT></SUB> 
                  return <EM>Expr</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n+1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 

      <TABLE>
        <TBODY>
        <TR>
          <TD>
            <TABLE>
              <TBODY>
              <TR>
                <TD>(typeswitch (<EM>Expr</EM><SUB><FONT 
                size=2>0</FONT></SUB>)</TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;case $<EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
                  size=2>1</FONT></SUB> return <EM>Expr</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;&nbsp;&nbsp;···</TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;case $<EM>VarName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
                  size=2>n</FONT></SUB> return <EM>Expr</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;default $<EM>VarName</EM><SUB><FONT 
                  size=2>n+1</FONT></SUB> return <EM>Expr</EM><SUB><FONT 
                  size=2>n+1</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> | ... | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n+1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>To type one case clause, the case variable is assigned the type of the case 
clause <EM>Case</EM><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
and the body of the clause is typed in the extended environment. Thus, the type 
of a case clause is independent of the type of the input expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT> <EM>SequenceType</EM> <FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM> 
                  =&gt; <EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
      case $<EM>VarName</EM> as <EM>SequenceType</EM> return <EM>Expr</EM> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>To type the default clause, the variable is assigned the type of the input 
expression and the body of the default clause is typed in the extended 
environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> ) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
      default $<EM>VarName</EM> return <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The evaluation of a typeswitch proceeds as follows. First, the input 
expression is evaluated, yielding an input value. The <B>effective case</B> is 
the first <CODE>case</CODE> clause such that the input value matches the 
SequenceType in the <CODE>case</CODE> clause. The <CODE>return</CODE> clause of 
the effective case is evaluated and the value of the <CODE>return</CODE> 
expression is the value of the typeswitch expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
                  <EM>FormalCaseClauses</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      typeswitch (<EM>Expr</EM>) <EM>FormalCaseClauses</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the value matches the sequence type, the following rule applies: It 
extends the dynamic environment by binding the variable <EM>Variable</EM> to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>0</FONT></SUB> and evaluates the body of the <CODE>return</CODE> 
clause.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT> <EM>SequenceType</EM> <FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
      case $<EM>VarName</EM> as <EM>SequenceType</EM> return <EM>Expr</EM> 
      <EM>FormalCaseClauses</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the value does not match the sequence type, the current case is not 
evaluated, and the remaining case clauses are evaluated in order by applying the 
inference rule recursively.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT> <EM>SequenceType</EM> <FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> &nbsp;&nbsp;&nbsp;&nbsp; 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <EM>Case</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
                  <EM>FormalCaseClauses</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
      case $<EM>VarName</EM> as <EM>SequenceType</EM> return <EM>Expr</EM> 
      <EM>FormalCaseClauses</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The last rule states that the <CODE>default</CODE> branch of a typeswitch 
expression always evaluates to the value of its <CODE>return</CODE> clause.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<EM>Variable</EM> 
                  =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
      default $<EM>VarName</EM> return <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_cast name=sec_cast></A>4.12.3 Cast</H4>
<P><B>Introduction</B></P>
<P>The <CODE>cast</CODE> expression can be used to convert a value to a specific 
datatype. It changes both the type and value of the result of an expression, and 
can only be applied to an atomic value.</P>
<H5><A id=N1A480 name=N1A480></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CastExpr 
      name=doc-xquery-CastExpr></A>[<SMALL>57&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CastExpr">CastExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-UnaryExpr">UnaryExpr</A> 
      ( "cast" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SingleType 
      name=doc-xquery-SingleType></A>[<SMALL>117&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SingleType">SingleType</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-AtomicType">AtomicType</A> 
      "?"?</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for <CODE>cast</CODE> expressions are:</P>
<H5><A id=N1A4A9 name=N1A4A9></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CastExpr 
      name=doc-core-CastExpr></A>[<SMALL>39&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CastExpr">CastExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValueExpr">ValueExpr</A> 
      ( "cast" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SingleType 
      name=doc-core-SingleType></A>[<SMALL>74&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SingleType">SingleType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType">AtomicType</A> 
      "?"?</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization of cast applies atomization to its argument. The type 
declaration asserts that the result is a single atomic value. The second 
normalization rule applies when the target type is optional.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> cast as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
      <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $v as <A 
            href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
            := <CODE>fn:data</CODE>((<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;$v cast as <A 
            href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> cast as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A>? 
      <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $v as <A 
            href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>? 
            := <CODE>fn:data</CODE>((<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) return</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;typeswitch ($v)</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;case $<EM>fs:</EM>new as 
            empty-sequence() return ()</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;default $<EM>fs:</EM>new return $v cast 
            as <A 
            href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rule of <CODE>cast</CODE> expression is as follows. The 
type of a Core <CODE>cast</CODE> expression is always the target type. Note that 
a <CODE>cast</CODE> expression can fail at run-time if the given value cannot be 
cast to the target type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> cast as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P>The dynamic semantics of <CODE>cast</CODE> expressions is defined in <A 
href="http://www.w3.org/TR/xpath-functions/#casting">Section 17 
Casting</A><SUP><SMALL>FO</SMALL></SUP>. The semantics of cast expressions 
depends on the type of the input value and on the target type. For any source 
and target primitive types, the <EM>casting table</EM> in <A 
href="http://www.w3.org/TR/xpath-functions/#casting">Section 17 
Casting</A><SUP><SMALL>FO</SMALL></SUP> indicates whether the cast from the 
source type to the target type is permitted. When a cast is permitted, the 
detailed dynamic evaluation rules for cast in <A 
href="http://www.w3.org/TR/xpath-functions/#casting">Section 17 
Casting</A><SUP><SMALL>FO</SMALL></SUP> are applied. We refer to those rules 
using an auxiliary judgment defined as follows.</P>
<P id=jd_cast_value_to>The judgment</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>cast 
value to type</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
size=2>1</FONT></SUB> can be cast to type <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A>, 
resulting in the new value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
size=2>2</FONT></SUB> according to the rules in <A 
href="http://www.w3.org/TR/xpath-functions/#casting">Section 17 
Casting</A><SUP><SMALL>FO</SMALL></SUP>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>cast 
                  value to type</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> cast as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_castable name=sec_castable></A>4.12.4 Castable</H4>
<H5><A id=N1A668 name=N1A668></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CastableExpr 
      name=doc-xquery-CastableExpr></A>[<SMALL>56&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CastableExpr">CastableExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CastExpr">CastExpr</A> 
      ( "castable" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY></TABLE>
<P>Castable expressions check whether a value can be cast to a given type.</P>
<P><B>Core Grammar</B></P>
<P>The Core grammar production for castable is:</P>
<H5><A id=N1A684 name=N1A684></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CastableExpr 
      name=doc-core-CastableExpr></A>[<SMALL>38&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CastableExpr">CastableExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CastExpr">CastExpr</A> 
      ( "castable" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The normalization of castable simply maps its expression argument.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> castable as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $v as <A 
            href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
            := <CODE>fn:data</CODE>((<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) return</TD></TR>
        <TR>
          <TD>$v castable as <A 
            href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> castable as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A>?<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>let $v as <A 
            href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>? 
            := <CODE>fn:data</CODE>((<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)) return</TD></TR>
        <TR>
          <TD>$v castable as <A 
            href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A>?</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The type of a Core <CODE>castable</CODE> expression is always a boolean.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Expr</EM> castable as <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If casting succeeds, then the <CODE>castable</CODE> expression evaluates to 
true.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> cast as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> castable as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, 'castable as' evaluates to false.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>Expr</EM> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> castable as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  false</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_constructor-functions name=sec_constructor-functions></A>4.12.5 
Constructor Functions</H4>
<P>Constructor functions provide an alternative syntax for casting.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Constructor functions for atomic types are normalized to explicit <CODE>cast 
as</CODE> expressions. Note that the following normalization rule requires to 
resolve the name of the function call and checks whether than name stands for an 
atomic type in the static context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeDerivation"><EM>AtomicTypeDerivation</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <FONT size=6>[</FONT><EM>QName</EM>(<EM>ExprSingle</EM><SUB><FONT 
      size=2>1</FONT></SUB>)<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> = <FONT 
      size=6>[</FONT><EM>ExprSingle</EM><SUB><FONT size=2>1</FONT></SUB> cast as 
      <EM>QName</EM>?<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_treat name=sec_treat></A>4.12.6 Treat</H4>
<H5><A id=N1A872 name=N1A872></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-TreatExpr 
      name=doc-xquery-TreatExpr></A>[<SMALL>55&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-TreatExpr">TreatExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CastableExpr">CastableExpr</A> 
      ( "treat" "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A> 
      )?</CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>The expression "<EM>Expr</EM> treat as <EM>SequenceType</EM>", can be used to 
change the static type of the result of an expression without changing its 
value. The treat-as expression raises a dynamic error if the dynamic type of the 
input value does not match the specified type.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Treat as expressions are normalized to typeswitch expressions. Note that the 
following normalization rule uses a variable $<EM>fs:</EM>new, which is a newly 
created variable that does not conflict with any variables already in scope.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Expr</EM> treat as <EM>SequenceType</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>typeswitch (<FONT size=6>[</FONT> <EM>Expr</EM> <FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
            size=2>Expr</FONT></SUB></A>)</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;case $<EM>fs:</EM>new as <EM>SequenceType</EM> 
            return $<EM>fs:</EM>new</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;default $<EM>fs:</EM>new return 
            <CODE>fn:error</CODE>()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_validate_expr name=sec_validate_expr></A>4.13 Validate 
Expressions</H3>
<H5><A id=N1A8E4 name=N1A8E4></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ValidateExpr 
      name=doc-xquery-ValidateExpr></A>[<SMALL>63&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ValidateExpr">ValidateExpr</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"validate" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ValidationMode">ValidationMode</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ValidationMode 
      name=doc-xquery-ValidationMode></A>[<SMALL>64&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ValidationMode">ValidationMode</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"lax" | "strict"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for validate are:</P>
<H5><A id=N1A906 name=N1A906></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ValidateExpr 
      name=doc-core-ValidateExpr></A>[<SMALL>41&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValidateExpr">ValidateExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"validate" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValidationMode">ValidationMode</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ValidationMode 
      name=doc-core-ValidationMode></A>[<SMALL>42&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValidationMode">ValidationMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"lax" | "strict"</CODE></TD></TR></TBODY></TABLE>
<P>A <CODE>validate</CODE> expression validates its argument with respect to the 
<B>in-scope schema definitions</B>, using the schema validation process 
described in <A 
href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
Part 1]</A>. The argument to a validate expression must be either an element or 
a document node. Validation replaces all nodes with new nodes that have their 
own identity, the <A href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP>, and default values created during 
the validation process.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>A validate expression with no validation mode is normalized into a validate 
expression with the validation mode set to strict.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>validate { 
      <EM>Expr</EM> }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>validate strict { <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>validate 
      <EM>ValidationMode</EM> { <EM>Expr</EM> }<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>validate 
      <EM>ValidationMode</EM> { <FONT size=6>[</FONT><EM>Expr</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>Static typing of the validate operation is defined by the following rule. 
Note the use of a subtyping check to ensure that the type of the expression to 
validate is either an element or a well-formed document node (i.e., with only 
one root element and no text nodes). The type of the expression to validate may 
be a union of more than one element type. We apply the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
mode</B></A> judgment to each element type to determine the meaning of that 
element type with the given validation mode, which yields a new element type. 
The result type is the union over all new element types.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (element | document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  })</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> | ... | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>n</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
                  mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
                  mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> | ... | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      validate <EM>ValidationMode</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV class=div3>
<H4><A id=sec_validating_element name=sec_validating_element></A>4.13.1 
Validating an Element Node</H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The normative dynamic semantics of validation is specified in <A 
href="http://www.w3.org/TR/xquery#id-validate">Section 3.13 Validate 
Expressions</A><SUP><SMALL>XQ</SMALL></SUP>. The effect of validation of a data 
model value is equivalent to:</P>
<UL>
  <LI>
  <P>serialization of the data model, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A>, followed by</P>
  <LI>
  <P>validation of the serialized value into a Post-Schema Validated Infoset, as 
  described in <A 
  href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
  Part 1]</A>, followed by</P>
  <LI>
  <P>construction of a new data model value, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>.</P></LI></UL>
<P>The above steps are expressed formally by the "erasure" and "annotation" 
judgments. Formally, validation removes existing type annotations from nodes 
("erasure"), and it re-validates the corresponding data model instance, possibly 
adding new type annotations to nodes ("annotation"). Both erasure and annotation 
are described formally in <A 
href="REC-xquery-semantics-20070123.htm#sec_validation_judgments"><B>[F 
Auxiliary Judgments for Validation]</B></A>. Indeed, the conjunction of erasure 
and annotation provides a formal model for a large part of actual schema 
validation. The semantics of the <CODE>validate</CODE> expression is specified 
as follows.</P>
<P>In the first premise below, the expression to validate is evaluated. The 
resulting value must be an element or document node. The second premise 
constructs a new value in which all existing type annotations have been erased. 
The third premise determines the element type that corresponds to the element 
node's name in the given validation mode. The last premise validates erased 
element node with the type against which it is validated, using the <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
as</B></A> judgment, yielding the final validated element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
                  mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      validate <EM>ValidationMode</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_validating_document name=sec_validating_document></A>4.13.2 
Validating a Document Node</H4>
<P>The rule for validating a document node is similar to that for validating an 
element node.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD>document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> } <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
                  mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> } (document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> }) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  document { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> 
    }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      validate <EM>ValidationMode</EM> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A><SUB><FONT 
      size=2>3</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=id-extension-expressions name=id-extension-expressions></A>4.14 
Extension Expressions</H3>
<P><B>Introduction</B></P>
<P>An extension expression is an expression whose semantics are 
implementation-defined. An extension expression consists of one or more pragmas, 
followed by an expression enclosed in curly braces.</P>
<H5><A id=N1ACEC name=N1ACEC></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ExtensionExpr 
      name=doc-xquery-ExtensionExpr></A>[<SMALL>65&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ExtensionExpr">ExtensionExpr</A><SUP><SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Pragma">Pragma</A>+ 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Pragma 
      name=doc-xquery-Pragma></A>[<SMALL>66&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Pragma">Pragma</A><SUP><SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(#" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-S">S</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PragmaContents">PragmaContents</A>)? 
      "#)"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PragmaContents 
      name=doc-xquery-PragmaContents></A>[<SMALL>67&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PragmaContents">PragmaContents</A><SUP><SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-Char">Char</A>* 
      - (Char* '#)' Char*))</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for ExtensionExpr are:</P>
<H5><A id=N1AD33 name=N1AD33></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ExtensionExpr 
      name=doc-core-ExtensionExpr></A>[<SMALL>43&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExtensionExpr">ExtensionExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Pragma">Pragma</A>+ 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Pragma 
      name=doc-core-Pragma></A>[<SMALL>44&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="REC-xquery-semantics-20070123.htm#prod-core-Pragma">Pragma</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(#" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-S">S</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-S">S</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PragmaContents">PragmaContents</A>)? 
      "#)"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-PragmaContents 
      name=doc-core-PragmaContents></A>[<SMALL>45&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A class=xquery 
      href="REC-xquery-semantics-20070123.htm#prod-core-PragmaContents">PragmaContents</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Char">Char</A>* 
      - (Char* '#)' Char*))</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Extension expressions are normalized as extension expressions in the 
[XPath/XQuery] Core.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Pragma</EM>+ { <EM>Expr</EM> }<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>Pragma</EM>+ { <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P>If the extension expression does not contain any expression, this is 
normalized into an extension expression with a call to the <CODE>fn:error</CODE> 
function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Pragma</EM>+ { }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>Pragma</EM>+ { 
      <CODE>fn:error</CODE>() }</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>If at least one of the pragmas is recognized, the static semantics are 
implementation-defined.</P>
<P>If none of the pragmas is recognized, the static semantics are the same as 
for the input expression. In both cases, the static typing must be applied on 
the input expression, possibly raising the corresponding type errors.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  A <EM>Pragma</EM> is recognized, yielding the 
                  implementation-defined static type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Pragma</EM>+ { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  No <EM>Pragma</EM> is 
        recognized.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Pragma</EM>+ { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>The QName of a pragma must resolve to a namespace URI and local name, using 
the statically known namespaces. If at least one of the pragmas is recognized, 
the dynamic semantics is implementation-defined.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  Some <EM>Pragma</EM> are recognized, yielding the 
                  implementation-defined value <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Pragma</EM>+ { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If none of the pragmas is recognized, the dynamic semantics of an 
<EM>ExtensionExpr</EM> are the same as evaluating the given expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD>No <EM>Pragma</EM> is recognized. &nbsp;&nbsp;&nbsp;&nbsp; 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>Pragma</EM>+ { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=id-query-prolog name=id-query-prolog></A>5 Modules and Prologs</H2>
<P>The organization of this section parallels the organization of <A 
href="http://www.w3.org/TR/xquery#id-query-prolog">Section 4 Modules and 
Prologs</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P><B>Introduction</B></P>
<P>XQuery supports modules as defined in <A 
href="http://www.w3.org/TR/xquery#id-query-prolog">Section 4 Modules and 
Prologs</A><SUP><SMALL>XQ</SMALL></SUP>. A <A 
href="http://www.w3.org/TR/xquery#dt-main-module">main 
module</A><SUP><SMALL>XQ</SMALL></SUP> contains a <A 
href="http://www.w3.org/TR/xquery#dt-prolog">Prolog</A><SUP><SMALL>XQ</SMALL></SUP> 
followed by a <A href="http://www.w3.org/TR/xquery#dt-queryBody">query 
body</A><SUP><SMALL>XQ</SMALL></SUP>. A query has exactly one main module. In a 
main module, the <A href="http://www.w3.org/TR/xquery#dt-queryBody">query 
body</A><SUP><SMALL>XQ</SMALL></SUP> can be evaluated, and its value is the 
result of the query. A <A 
href="http://www.w3.org/TR/xquery#dt-library-module">library 
module</A><SUP><SMALL>XQ</SMALL></SUP> contains a module declaration followed by 
a <A 
href="http://www.w3.org/TR/xquery#dt-prolog">Prolog</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P>The Prolog is a sequence of declarations that affect query processing. The 
Prolog can be used, for example, to declare namespace prefixes, import types 
from XML Schemas, and declare functions and variables. Namespace declarations 
and schema imports always precede function and variable declarations, as 
specified by the following grammar productions.</P>
<H5><A id=N1AF51 name=N1AF51></A>Query Module</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Module 
      name=doc-xquery-Module></A>[<SMALL>1&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Module">Module</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VersionDecl">VersionDecl</A>? 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-LibraryModule">LibraryModule</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-MainModule">MainModule</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-MainModule 
      name=doc-xquery-MainModule></A>[<SMALL>3&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-MainModule">MainModule</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Prolog">Prolog</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QueryBody">QueryBody</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-LibraryModule 
      name=doc-xquery-LibraryModule></A>[<SMALL>4&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-LibraryModule">LibraryModule</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ModuleDecl">ModuleDecl</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Prolog">Prolog</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Prolog 
      name=doc-xquery-Prolog></A>[<SMALL>6&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Prolog">Prolog</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>((<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultNamespaceDecl">DefaultNamespaceDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Setter">Setter</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NamespaceDecl">NamespaceDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Import">Import</A>) 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Separator">Separator</A>)* 
      ((<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarDecl">VarDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FunctionDecl">FunctionDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OptionDecl">OptionDecl</A>) 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Separator">Separator</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Setter 
      name=doc-xquery-Setter></A>[<SMALL>7&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Setter">Setter</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-BoundarySpaceDecl">BoundarySpaceDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultCollationDecl">DefaultCollationDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-BaseURIDecl">BaseURIDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ConstructionDecl">ConstructionDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderingModeDecl">OrderingModeDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EmptyOrderDecl">EmptyOrderDecl</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CopyNamespacesDecl">CopyNamespacesDecl</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Import 
      name=doc-xquery-Import></A>[<SMALL>8&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Import">Import</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaImport">SchemaImport</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ModuleImport">ModuleImport</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Separator 
      name=doc-xquery-Separator></A>[<SMALL>9&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Separator">Separator</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>";"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-QueryBody 
      name=doc-xquery-QueryBody></A>[<SMALL>30&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-QueryBody">QueryBody</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY></TABLE>
<P>Function declarations are globally scoped, that is, the use of a function 
name in a function call may precede declaration of the function. Variable 
declarations are lexically scoped, i.e., variable declarations must precede 
variable uses.</P>
<P><B>Core Grammar</B></P>
<P>The module declarations and prolog are processed as part of the static and 
dynamic context processing. In addition, normalization of prolog declarations is 
performed into a simplified formal grammar given below. As a result, the XQuery 
core does not need to include the prolog and module declarations. The entry 
point for the core grammar is the <EM>Expr</EM> non-terminal, as given in <A 
href="REC-xquery-semantics-20070123.htm#id-expressions"><B>[4 
Expressions]</B></A>.</P>
<P><B>Notation</B></P>
<P>Modules are identified and can be imported using a target namespace (a URI). 
In [XPath/XQuery], the process by which a module is obtained from a given target 
namespace is implementation defined. In this specification, we use the following 
auxiliary judgment to model that implementation defined process.</P>
<P id=jd_is_target_namespace_of_modules>The judgment:</P>
<DIV align=center><EM>AnyURI</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_is_target_namespace_of_modules"><B>is 
target namespace of modules</B></A> <EM>Module</EM><SUB><FONT 
size=2>1</FONT></SUB> ... <EM>Module</EM><SUB><FONT size=2>n</FONT></SUB></DIV>
<P>holds if <EM>Module</EM><SUB><FONT size=2>1</FONT></SUB> ... 
<EM>Module</EM><SUB><FONT size=2>n</FONT></SUB> are the modules associated to 
the target namespace <EM>AnyURI</EM>, and such as <EM>Module</EM><SUB><FONT 
size=2>i</FONT></SUB> does not depend directly, or transitively on any module 
after it. (See <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> for the formal definition of whether a module 
directly depends on another)</P>
<P><B>Notation</B></P>
<P>The XQuery Prolog requires that declarations appear in a particular order. In 
the Formal Semantics, it is simpler to assume the declarations can appear in any 
order, as it does not change their semantics -- we simply assume that an XQuery 
parser has enforced the required order.</P>
<P>The Prolog contains a variety of declarations that specify the initial static 
and dynamic context of the query. The following formal grammar productions 
represent any Prolog declaration.</P>
<H5><A id=N1B073 name=N1B073></A>Prolog Declarations</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-PrologDeclList 
      name=doc-fs-PrologDeclList></A>[<SMALL>71&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>PrologDeclList</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrologDecl">PrologDecl</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Separator">Separator</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrologDeclList">PrologDeclList</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-PrologDecl 
      name=doc-fs-PrologDecl></A>[<SMALL>72&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>PrologDecl</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultCollationDecl">DefaultCollationDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-BaseURIDecl">BaseURIDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ConstructionDecl">ConstructionDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderingModeDecl">OrderingModeDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EmptyOrderDecl">EmptyOrderDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CopyNamespacesDecl">CopyNamespacesDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaImport">SchemaImport</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ModuleImport">ModuleImport</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NamespaceDecl">NamespaceDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultNamespaceDecl">DefaultNamespaceDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarDecl">VarDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FunctionDecl">FunctionDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OptionDecl">OptionDecl</A></CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_prolog>The function <FONT size=6>[</FONT><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
size=2>PrologDecl</FONT></SUB></A> takes a prolog declaration and maps it into 
its equivalent declaration in the Core grammar.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>PrologDecl</EM><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></DIV>
<P id=jd_yields_context>The following auxiliary judgments are applied when 
statically processing the declarations in the prolog. The effect of the judgment 
is to process each prolog declaration in order, constructing a new static 
environment from the static environment constructed from previous prolog 
declarations.</P>
<P>The judgment:</P>
<DIV align=center><EM>AnyURI</EM> ; <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDeclList</EM> <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
size=2>stat</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
<EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB></DIV>
<P>holds if for the given module with namespace <EM>AnyURI</EM>, and under the 
static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB>, the sequence of prolog declarations 
<EM>PrologDeclList</EM> yields the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB> and the normalized sequence of prolog declarations in the 
Core grammar.</P>
<P>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDecl</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
size=2>stat</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if under the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB>, the single prolog declaration <EM>PrologDecl</EM> yields 
the new static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Notation</B></P>
<P>Because functions can be mutually referential, function signatures must be 
defined in the static environment before static type analysis is applied to the 
function bodies. The following judgment is used to extend the static environment 
with the appropriate function signatures. That judgment is used when computing 
the static context for a given module before applying static context 
processing.</P>
<P id=jd_yields_sigs>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDeclList</EM> <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
size=2>sigs</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if extending the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB> with the function signatures declared in 
<EM>PrologDeclList</EM> yields the new static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P>This judgment is defined as follows. In case there is no declaration, the 
static environment is returned unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
      size=2>sigs</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the case of a namespace declaration, the static context is extended with 
the corresponding namespace binding.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>PrologDecl</EM> = <EM>NamespaceDecl</EM> or 
                  <EM>PrologDecl</EM> = <EM>DefaultNamespaceDecl</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
                  size=2>sigs</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
      size=2>sigs</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the case of a function declaration, the static context is extended with 
the corresponding signature.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>PrologDecl</EM> = <EM>FunctionDecl</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
                  size=2>sigs</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
                  size=2>sigs</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
      size=2>sigs</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionDecl</EM> = declare function <EM>QName</EM> ( 
                  $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
                  <EM>SequenceType</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
                  $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> as 
                  <EM>SequenceType</EM><SUB><FONT size=2>n</FONT></SUB>) as 
                  <EM>SequenceType</EM><SUB><FONT size=2>r</FONT></SUB> 
                  (<EM>EnclosedExpr</EM> | external)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>SequenceType</EM><SUB><FONT 
                  size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>SequenceType</EM><SUB><FONT 
                  size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>SequenceType</EM><SUB><FONT 
                  size=2>r</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>FunctionSig</EM> = declare function <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) as <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  =&gt; 
      <EM>FunctionSig</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>FunctionDecl</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
      size=2>sigs</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>For all other kinds of declarations, the static context is left 
unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>PrologDecl</EM> 
                  = <EM>FunctionDecl</EM>) and <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>PrologDecl</EM> 
                  = <EM>NamespaceDecl</EM>) and <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>PrologDecl</EM> 
                  = 
        <EM>DefaultNamespaceDecl</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
      size=2>sigs</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a function declaration, the static context is extended with the 
corresponding function signature.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>Prolog declarations are processed in the order they are encountered. The 
normalization of a prolog declaration <EM>PrologDecl</EM> depends on the static 
context processing of all previous prolog declarations. In turn, static context 
processing of <EM>PrologDecl</EM> depends on the normalization of the 
<EM>PrologDecl</EM>. For example, because variables are lexically scoped, the 
normalization and static context processing of a variable declaration depends on 
the normalization and static context processing of all previous variable 
declarations. Therefore, the normalization phase and static context processing 
are interleaved, with normalization preceding static context processing for each 
prolog declaration.</P>
<P>The following inference rules express this dependency. The first rule 
specifies that for an empty sequence of prolog declarations, the initial static 
environment is left unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>AnyURI</EM> ; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
      size=2>stat</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The next two rules interleaves normalization and static context processing. 
The result of static context processing and normalization is a static context 
and the normalized prolog declarations. In case the declaration is a module 
import, the URI for the current module is passed to the static context 
processing rule. This allows to avoid self-import, which is handled globally 
(See rules for building the context for module declarations in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A>).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>PrologDecl</EM> 
                  = <EM>ModuleImport</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>PrologDecl</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
                  size=2>PrologDecl</FONT></SUB></A> == 
                  <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
                  <EM>PrologDeclList</EM><SUB><FONT 
              size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>AnyURI</EM> ; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
      size=2>stat</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
      <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB> ; 
      <EM>PrologDeclList</EM><SUB><FONT 
size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>PrologDecl</EM> = <EM>ModuleImport</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>PrologDecl</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
                  size=2>PrologDecl</FONT></SUB></A> == 
                  <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
                  <EM>PrologDeclList</EM><SUB><FONT 
              size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>AnyURI</EM> ; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
      size=2>stat</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
      <EM>PrologDecl</EM><SUB><FONT size=2>1</FONT></SUB> ; 
      <EM>PrologDeclList</EM><SUB><FONT 
size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>Static typing of a main module follows context processing and normalization. 
Context processing and normalization of a main module applies the rules above to 
the prolog, then using the resulting static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
the query body is normalized into a Core expression, and the static typing rules 
are applied to this Core expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_stat_env">statEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <FONT size=6>[</FONT><EM>QueryBody</EM><FONT size=6>]</FONT><A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
                  size=2>Expr</FONT></SUB></A> == <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>PrologDeclList</EM> <EM>QueryBody</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P id=jd_yields_dyn_context>Similarly, the judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDeclList</EM> <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
size=2>dyn</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if under the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB>, the sequence of prolog declarations 
<EM>PrologDeclList</EM> yields the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<EM>PrologDecl</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
size=2>dyn</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB></DIV>
<P>holds if under the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>, 
the single prolog declaration <EM>PrologDecl</EM> yields the new dynamic 
environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The rules for initializing the dynamic context are as follows. The first rule 
specifies that for an empty sequence of prolog declarations, the dynamic 
environment is left unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
      size=2>dyn</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The second rule simply computes the dynamic environment by processing the 
prolog declarations in order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>PrologDecl</EM> ; <EM>PrologDeclList</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
      size=2>dyn</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>Dynamic evaluation of a main module applies the rules for dynamic-context 
processing to the prolog declarations, then using the resulting dynamic 
environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>, 
the dynamic evaluation rules are applied to the normalized query body.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_stat_env">statEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <FONT size=6>[</FONT><EM>QueryBody</EM><FONT size=6>]</FONT><A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
                  size=2>Expr</FONT></SUB></A> == <EM>Expr</EM><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>PrologDeclList</EM> <EM>QueryBody</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P id=jd_module_statEnv>We define a new judgment that maps a module's target 
namespace (or a main module) to the corresponding module's static 
environment:</P>
<DIV align=center>(<EM>AnyURI</EM> | #MAIN) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
size=2>module_statEnv</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></DIV>
<P id=jd_module_dynEnv>We also define a new judgment that maps a module's target 
namespace (or a main module) to the corresponding module's dynamic 
environment:</P>
<DIV align=center>(<EM>AnyURI</EM> | #MAIN) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
size=2>module_dynEnv</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></DIV>
<P>For a main module, those judgments are defined as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_stat_env">statEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD>#MAIN <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD>#MAIN <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>For a library module, those judgments are defined in <A 
href="REC-xquery-semantics-20070123.htm#id-module-imports"><B>[5.11 
Module Import]</B></A>.</P>
<DIV class=div2>
<H3><A id=sec_version-declaration name=sec_version-declaration></A>5.1 Version 
Declaration</H3>
<H5><A id=N1B8FD name=N1B8FD></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-VersionDecl 
      name=doc-xquery-VersionDecl></A>[<SMALL>2&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-VersionDecl">VersionDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"xquery" "version" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A> 
      ("encoding" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A>)? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Separator">Separator</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>A version declaration specifies the applicable XQuery syntax and semantics 
for a module. An XQuery implementation must raise a static error when processing 
a query labeled with a version that the implementation does not support. This 
document applies to XQuery 1.0 only and does not specify this static error 
formally. Verifying whether the proper version declaration is used is not 
formally specified.</P></DIV>
<DIV class=div2>
<H3><A id=id-module-declaration name=id-module-declaration></A>5.2 Module 
Declaration</H3>
<P><B>Introduction</B></P>
<H5><A id=N1B924 name=N1B924></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ModuleDecl 
      name=doc-xquery-ModuleDecl></A>[<SMALL>5&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ModuleDecl">ModuleDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"module" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Separator">Separator</A></CODE></TD></TR></TBODY></TABLE>
<P>We assume that the static-context processing and dynamic-context processing 
described in <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A> are applied to all library modules <EM>before</EM> 
the normalization, static context processing, and dynamic context processing of 
the main module. That is, at the time an "import module" declaration is 
processed, we assume that the static and dynamic context of the imported module 
is already available. This assumption does not require or assume separate 
compilation of modules. An implementation might process all or some imported 
modules statically (i.e., before the importing module is identified) or 
dynamically (i.e., when the importing module is identified and processed).</P>
<P><B>Core Grammar</B></P>
<P>The core grammar production for module declarations is:</P>
<H5><A id=N1B94E name=N1B94E></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ModuleDecl 
      name=doc-core-ModuleDecl></A>[<SMALL>1&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ModuleDecl">ModuleDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"module" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Separator">Separator</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Separator 
      name=doc-core-Separator></A>[<SMALL>2&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Separator">Separator</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>";"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Module declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ModuleDecl</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>ModuleDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The effect of a module declaration is to apply the static context processing 
rules defined in <A 
href="REC-xquery-semantics-20070123.htm#id-query-prolog"><B>[5 
Modules and Prologs]</B></A> to the module's prolog. The resulting static 
context is then available to any importing module.</P>
<P>The module declaration extends the prolog with a namespace declaration that 
binds the module's prefix to its target namespace (a URI), then computes the 
static context for the complete module.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_is_target_namespace_of_modules"><B>is 
                  target namespace of modules</B></A> <EM>Module</EM><SUB><FONT 
                  size=2>1</FONT></SUB> ... <EM>Module</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Module</EM><SUB><FONT size=2>1</FONT></SUB> = module 
                  namespace <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB> = 
                  <EM>URILiteral</EM>; <EM>PrologDeclList</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Module</EM><SUB><FONT size=2>1</FONT></SUB> = module 
                  namespace <EM>NCName</EM><SUB><FONT size=2>1</FONT></SUB> = 
                  <EM>URILiteral</EM>; <EM>PrologDeclList</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_stat_env">statEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB> ... 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_sigs"><B>=&gt;</B><SUB><FONT 
                  size=2>sigs</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>0</FONT></SUB><B>&nbsp;|-&nbsp;</B> declare namespace 
                  <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
                  <EM>PrologDeclList</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n-1</FONT></SUB><B>&nbsp;|-&nbsp;</B> declare namespace 
                  <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
                  <EM>PrologDeclList</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the rule above and the rules for static context processing of an 
"import module" declaration in <A 
href="REC-xquery-semantics-20070123.htm#id-module-imports"><B>[5.11 
Module Import]</B></A> are mutually recursive.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The dynamic context processing of a module declaration is similar to that of 
static processing. The module declaration extends the prolog with a namespace 
declaration that binds the module's prefix to its target namespace (a URI), then 
computes the dynamic context for the complete module.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_is_target_namespace_of_modules"><B>is 
                  target namespace of modules</B></A> <EM>Module</EM><SUB><FONT 
                  size=2>1</FONT></SUB> ... <EM>Module</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Module</EM><SUB><FONT size=2>1</FONT></SUB> = module 
                  namespace <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Module</EM><SUB><FONT size=2>n</FONT></SUB> = module 
                  namespace <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A><B>&nbsp;|-&nbsp;</B> 
                  declare namespace <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n-1</FONT></SUB><B>&nbsp;|-&nbsp;</B> declare namespace 
                  <EM>NCName</EM> = <EM>URILiteral</EM>; 
                  <EM>PrologDeclList</EM><SUB><FONT size=2>n</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the rule above and the rules for dynamic context processing of an 
"import module" declaration in <A 
href="REC-xquery-semantics-20070123.htm#id-module-imports"><B>[5.11 
Module Import]</B></A> are mutually recursive.</P></DIV>
<DIV class=div2>
<H3><A id=sec_boundary-space-decls name=sec_boundary-space-decls></A>5.3 
Boundary-space Declaration</H3>
<H5><A id=N1BBAF name=N1BBAF></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-BoundarySpaceDecl 
      name=doc-xquery-BoundarySpaceDecl></A>[<SMALL>11&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-BoundarySpaceDecl">BoundarySpaceDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "boundary-space" ("preserve" | 
  "strip")</CODE></TD></TR></TBODY></TABLE>
<P>The semantics of a boundary-space declaration is not specified 
formally.</P></DIV>
<DIV class=div2>
<H3><A id=sec_default-collation-declaration 
name=sec_default-collation-declaration></A>5.4 Default Collation 
Declaration</H3>
<H5><A id=N1BBBF name=N1BBBF></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DefaultCollationDecl 
      name=doc-xquery-DefaultCollationDecl></A>[<SMALL>19&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DefaultCollationDecl">DefaultCollationDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "collation" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for default collation declarations is:</P>
<H5><A id=N1BBD3 name=N1BBD3></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-DefaultCollationDecl 
      name=doc-core-DefaultCollationDecl></A>[<SMALL>11&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DefaultCollationDecl">DefaultCollationDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "collation" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Default collation declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DefaultCollationDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>DefaultCollationDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The default collation declaration updates the collations environment 
component within the static environment. The collations environment component is 
used by several functions in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>, but is not used in the Formal Semantics.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_collations_env">collations</A>(<EM>AnyURI</EM>) 
                  = <EM>Collation</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_collation_env">defaultCollation</A>(<EM>Collation</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default collation <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The default collation declaration does not affect the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default collation <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_base-uri-decl name=sec_base-uri-decl></A>5.5 Base URI 
Declaration</H3>
<H5><A id=N1BCBE name=N1BCBE></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-BaseURIDecl 
      name=doc-xquery-BaseURIDecl></A>[<SMALL>20&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-BaseURIDecl">BaseURIDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "base-uri" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for base uri declarations is:</P>
<H5><A id=N1BCD2 name=N1BCD2></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-BaseURIDecl 
      name=doc-core-BaseURIDecl></A>[<SMALL>12&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-BaseURIDecl">BaseURIDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "base-uri" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Base URI declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>BaseURIDecl</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>BaseURIDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>A base URI declaration specifies the base URI property of the static context, 
which is used when resolving relative URIs within a module.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_base_uri_env">baseURI</A>(<EM>AnyURI</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare base-uri <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The base URI declaration does not affect the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare base-uri <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_validation_decl name=sec_validation_decl></A>5.6 Construction 
Declaration</H3>
<H5><A id=N1BD9D name=N1BD9D></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ConstructionDecl 
      name=doc-xquery-ConstructionDecl></A>[<SMALL>25&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ConstructionDecl">ConstructionDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "construction" ("strip" | 
  "preserve")</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for construction declarations is:</P>
<H5><A id=N1BDAC name=N1BDAC></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ConstructionDecl 
      name=doc-core-ConstructionDecl></A>[<SMALL>17&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ConstructionDecl">ConstructionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "construction" ("strip" | 
  "preserve")</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P>For convenience, we introduce the following auxiliary grammar production.</P>
<H5><A id=N1BDBC name=N1BDBC></A>Constr Mode</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ConstructionMode 
      name=doc-fs-ConstructionMode></A>[<SMALL>89&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ConstructionMode</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"preserve" | "strip"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Construction declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ConstructionDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>ConstructionDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The construction declaration modifies the construction mode in the static 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB> = <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      + <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_construction_mode_env">constructionMode</A>( 
      <EM>ConstructionMode</EM>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare construction <EM>ConstructionMode</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The construction declaration does not have any effect on the dynamic 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare construction <EM>ConstructionMode</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=id-default-ordering-decl name=id-default-ordering-decl></A>5.7 
Ordering Mode Declaration</H3>
<H5><A id=N1BE6B name=N1BE6B></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OrderingModeDecl 
      name=doc-xquery-OrderingModeDecl></A>[<SMALL>14&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OrderingModeDecl">OrderingModeDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "ordering" ("ordered" | 
  "unordered")</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for ordering mode declarations is:</P>
<H5><A id=N1BE7A name=N1BE7A></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OrderingModeDecl 
      name=doc-core-OrderingModeDecl></A>[<SMALL>6&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderingModeDecl">OrderingModeDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "ordering" ("ordered" | 
  "unordered")</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Ordering mode declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OrderingModeDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>OrderingModeDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The ordering mode declaration does not have any effect on the static 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>OrderingModeDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The ordering mode declaration does not have any effect on the dynamic 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>OrderingModeDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=id-empty-order-decl name=id-empty-order-decl></A>5.8 Empty Order 
Declaration</H3>
<H5><A id=N1BF03 name=N1BF03></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-EmptyOrderDecl 
      name=doc-xquery-EmptyOrderDecl></A>[<SMALL>15&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-EmptyOrderDecl">EmptyOrderDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "order" "empty" ("greatest" | 
    "least")</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for empty order declarations is:</P>
<H5><A id=N1BF12 name=N1BF12></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-EmptyOrderDecl 
      name=doc-core-EmptyOrderDecl></A>[<SMALL>7&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EmptyOrderDecl">EmptyOrderDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "order" "empty" ("greatest" | 
    "least")</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Empty order declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>EmptyOrderDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>EmptyOrderDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The empty order declaration does not have any effect on the static 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>EmptyOrderDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The empty order declaration does not have any effect on the dynamic 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>EmptyOrderDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=id-copy-namespaces-decl name=id-copy-namespaces-decl></A>5.9 
Copy-Namespaces Declaration</H3>
<H5><A id=N1BF9B name=N1BF9B></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-CopyNamespacesDecl 
      name=doc-xquery-CopyNamespacesDecl></A>[<SMALL>16&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-CopyNamespacesDecl">CopyNamespacesDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "copy-namespaces" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PreserveMode">PreserveMode</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-InheritMode">InheritMode</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-PreserveMode 
      name=doc-xquery-PreserveMode></A>[<SMALL>17&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-PreserveMode">PreserveMode</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"preserve" | "no-preserve"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-InheritMode 
      name=doc-xquery-InheritMode></A>[<SMALL>18&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-InheritMode">InheritMode</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"inherit" | "no-inherit"</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar productions for copy-namespaces declarations are:</P>
<H5><A id=N1BFC3 name=N1BFC3></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-CopyNamespacesDecl 
      name=doc-core-CopyNamespacesDecl></A>[<SMALL>8&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CopyNamespacesDecl">CopyNamespacesDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "copy-namespaces" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PreserveMode">PreserveMode</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-InheritMode">InheritMode</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-PreserveMode 
      name=doc-core-PreserveMode></A>[<SMALL>9&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PreserveMode">PreserveMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"preserve" | "no-preserve"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-InheritMode 
      name=doc-core-InheritMode></A>[<SMALL>10&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-InheritMode">InheritMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"inherit" | "no-inherit"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Copy-namespace declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>CopyNamespacesDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>CopyNamespacesDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The copy-namespace declaration does not have any effect on the static 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>CopyNamespacesDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The copy-namespace declaration does not have any effect on the dynamic 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>CopyNamespacesDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_schema_imports name=sec_schema_imports></A>5.10 Schema Import</H3>
<H5><A id=N1C065 name=N1C065></A>Schema Imports</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SchemaImport 
      name=doc-xquery-SchemaImport></A>[<SMALL>21&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SchemaImport">SchemaImport</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "schema" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaPrefix">SchemaPrefix</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-SchemaPrefix 
      name=doc-xquery-SchemaPrefix></A>[<SMALL>22&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-SchemaPrefix">SchemaPrefix</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      "=") | ("default" "element" "namespace")</CODE></TD></TR></TBODY></TABLE>
<P>The semantics of Schema Import is described in terms of the [XPath/XQuery] 
type system. The process of converting an XML Schema into a sequence of type 
declarations is described in Section <A 
href="REC-xquery-semantics-20070123.htm#sec_importing_schema"><B>[D 
Importing Schemas]</B></A>. This section describes how the resulting sequence of 
type declarations is added into the static context when the Prolog is 
processed.</P>
<P><B>Core Grammar</B></P>
<P>The Core grammar productions for schema imports are:</P>
<H5><A id=N1C09F name=N1C09F></A>Schema Imports</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SchemaImport 
      name=doc-core-SchemaImport></A>[<SMALL>13&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaImport">SchemaImport</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "schema" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaPrefix">SchemaPrefix</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-SchemaPrefix 
      name=doc-core-SchemaPrefix></A>[<SMALL>14&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaPrefix">SchemaPrefix</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=") | ("default" "element" "namespace")</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Schema imports are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SchemaImport</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>SchemaImport</EM></TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>For convenience, we introduce the following auxiliary grammar 
productions.</P>
<H5><A id=N1C0F5 name=N1C0F5></A>Location Hints</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-LocationHints 
      name=doc-fs-LocationHints></A>[<SMALL>16&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>LocationHints</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptLocationHints 
      name=doc-fs-OptLocationHints></A>[<SMALL>82&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptLocationHints</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-LocationHints">LocationHints</A>?</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_yields_type_context>The following auxiliary judgments are used when 
processing schema imports.</P>
<P>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Definitions</EM> <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
size=2>type</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if under the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB>, the sequence of type definitions <EM>Definitions</EM> 
yields the new static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
size=2>type</FONT></SUB></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if under the static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB>, the single definition <A 
href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A> 
yields the new static environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>A schema imported into a query is first mapped into the [XPath/XQuery] type 
system, which yields a sequence of XQuery type definitions. The rules for 
mapping the imported schema begin in <A 
href="REC-xquery-semantics-20070123.htm#sec_schema_as_a_whole"><B>[D.2 
Schemas as a whole]</B></A>. Each type definition in an imported schema is then 
added to the static environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Definitions</EM> = <FONT size=6>[</FONT>schema 
                  <EM>URILiteral</EM> <EM>OptLocationHints</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
                  size=2>Schema</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Definitions</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import schema <EM>URILiteral</EM> <EM>OptLocationHints</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The schema import declaration may also assign an element/type namespace 
prefix to the URI of the imported schema, or assign the default element 
namespace to the URI of the imported schema.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Definitions</EM> = <FONT size=6>[</FONT>schema 
                  <EM>URILiteral</EM> <EM>OptLocationHints</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
                  size=2>Schema</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Definitions</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, 
        <EM>AnyURI</EM>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import schema namespace <EM>NCName</EM> = <EM>URILiteral</EM> 
                  <EM>OptLocationHints</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Definitions</EM> = <FONT size=6>[</FONT>schema 
                  <EM>URILiteral</EM> <EM>OptLocationHints</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
                  size=2>Schema</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Definitions</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A>( 
                  <EM>AnyURI</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import schema default element namespace <EM>URILiteral</EM> 
                  <EM>OptLocationHints</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>An empty sequence of type definitions yields the input environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Each type definition is added into the static environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Definitions</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <EM>Definitions</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Each type, element, or attribute declaration is added respectively to the 
type, element and attribute declarations components of the static 
environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  =&gt; define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A> 
                  )</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  =&gt; define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  =&gt; define attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  define attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
                  size=2>type</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that it is a static error to import two schemas that both define the 
same name in the same symbol space and in the same scope. That is multiple 
top-level definitions of the same type, element, or attribute name raises a 
static error. For instance, a query may not import two schemas that include 
top-level element declarations for two elements with the same expanded name.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The schema import declarations do not affect the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>SchemaImport</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=id-module-imports name=id-module-imports></A>5.11 Module Import</H3>
<H5><A id=N1C5BC name=N1C5BC></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ModuleImport 
      name=doc-xquery-ModuleImport></A>[<SMALL>23&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ModuleImport">ModuleImport</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "module" ("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      "=")? <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY></TABLE>
<P><B>Introduction</B></P>
<P>The effect of an "import module" declaration is to extend the importing 
module's dynamic (and static) context with the global variables (and their 
types) and the functions (and their signatures) of the imported module. Module 
import is not transitive, only the global variables and functions declared 
explicitly in the imported module are available in the importing module. Also, 
module import does not import schemas, therefore the importing module must 
explicitly import any schemas on which the imported global variables or 
functions depend.</P>
<P><B>Core Grammar</B></P>
<P>The core grammar production for module imports is:</P>
<H5><A id=N1C5E8 name=N1C5E8></A>Module Import</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ModuleImport 
      name=doc-core-ModuleImport></A>[<SMALL>15&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ModuleImport">ModuleImport</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "module" ("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=")? <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Module imports are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>ModuleImport</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>ModuleImport</EM></TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>The rules below depend on the following auxiliary functions which are used to 
import the proper fragment of the static context.</P>
<P id=fs_local_variables>The function <A 
href="REC-xquery-semantics-20070123.htm#fs_local_variables"><EM>fs:</EM><CODE>local-variables</CODE></A>(<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
<EM>AnyURI</EM>) returns all the (<A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>, 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
pairs in <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A> 
such that the URI part of the variable's expanded-QName equals the given URI, 
that is, the variables that are declared locally in the module with the given 
namespace URI.</P>
<P id=fs_local_functions>The function <A 
href="REC-xquery-semantics-20070123.htm#fs_local_functions"><EM>fs:</EM><CODE>local-functions</CODE></A>(<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>, 
<EM>AnyURI</EM>) returns all the function signatures in <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A> 
such that the URI part of the function's expanded-QName equals the given URI, 
that is, the function signatures that are declared locally in the module with 
the given namespace URI.</P>
<P><B>Notation</B></P>
<P>The following auxiliary judgments is used to extend a given static 
environment with the static environment from an imported module.</P>
<P id=jd_extended_with_static_environment>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>extended 
with static environment</B></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>yields</B></A> 
<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>3</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>for 
uri</B></A> <EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB></DIV>
<P>holds if extending the environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>1</FONT></SUB> with the environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>2</FONT></SUB> yields the environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
size=2>3</FONT></SUB> under the given namespace uri <EM>AnyURI</EM>.</P>
<P>This judgment is defined as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#fs_local_variables"><EM>fs:</EM><CODE>local-variables</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB>, <EM>AnyURI</EM>) = 
                  (<EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) ... (<EM>Variable</EM><SUB><FONT 
                  size=2>m</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>(<EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ... ; <EM>Variable</EM><SUB><FONT 
                  size=2>m</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#fs_local_functions"><EM>fs:</EM><CODE>local-functions</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB>, <EM>AnyURI</EM>) = (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<EM>FunctionSig</EM><SUB><FONT 
                  size=2>1</FONT></SUB>) ... (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>,<EM>FunctionSig</EM><SUB><FONT 
                  size=2>n</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>4</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; <EM>FunctionSig</EM><SUB><FONT 
                  size=2>1</FONT></SUB>; ... ;<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; <EM>FunctionSig</EM><SUB><FONT 
                  size=2>n</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>extended 
                  with static environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>4</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>for 
                  uri</B></A> <EM>AnyURI</EM><SUB><FONT 
              size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P>The rules below depend on the following auxiliary judgments.</P>
<P id=jd_import_variables>The following rules add each variable explicitly 
declared in the imported module to the importing module's dynamic variable 
environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
                  size=2>import_variables</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> =&gt; 
                  <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>))</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>), ···, (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
                  size=2>import_variables</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>), ···, (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
                  size=2>import_variables</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P id=jd_import_functions>The following rules add each function explicitly 
declared in the imported module to the importing module's dynamic function 
environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_functions"><B>=&gt;</B><SUB><FONT 
                  size=2>import_functions</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>((<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1,1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1,n</FONT></SUB>)) =&gt; 
                  <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>))</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2,1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2,n</FONT></SUB>)), ···, (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>k</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>k,1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>k,n</FONT></SUB>)) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_functions"><B>=&gt;</B><SUB><FONT 
                  size=2>import_functions</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1,1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1,n</FONT></SUB>)), ···, (<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>k</FONT></SUB>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>k,1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>k,n</FONT></SUB>)) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_functions"><B>=&gt;</B><SUB><FONT 
                  size=2>import_functions</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P>The following auxiliary judgments is used to extend a given dynamic 
environment with the dynamic environment from an imported module.</P>
<P id=jd_extended_with_dynamic_environment>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>extended 
with dynamic environment</B></A> <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>yields</B></A> 
<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>3</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>for 
uri</B></A> <EM>AnyURI</EM></DIV>
<P>holds if extending the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>1</FONT></SUB> with the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>2</FONT></SUB> yields the dynamic environment <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
size=2>3</FONT></SUB> under the given namespace uri <EM>AnyURI</EM>.</P>
<P>This judgment is defined as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#fs_local_variables"><EM>fs:</EM><CODE>local-variables</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB>, <EM>AnyURI</EM>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
                  size=2>import_variables</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#fs_local_variables"><EM>fs:</EM><CODE>local-variables</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB>, <EM>AnyURI</EM>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
                  size=2>import_variables</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#fs_local_functions"><EM>fs:</EM><CODE>local-functions</CODE></A>(<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB>, <EM>AnyURI</EM>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_import_functions"><B>=&gt;</B><SUB><FONT 
                  size=2>import_functions</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>extended 
                  with dynamic environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>4</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>for 
                  uri</B></A> 
      <EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>The first set of premises below "look up" the static contexts of all the 
imported modules, as defined in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A>. The second set of premises extend the input static 
context with the global variables and function signatures declared in the 
imported static contexts.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB> = <EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>extended 
                  with static environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>for 
                  uri</B></A> <EM>AnyURI</EM><SUB><FONT 
              size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import module <EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> 
                  <EM>LocationHints</EM>? <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> = 
                  <EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> ; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import module <EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> 
                  <EM>LocationHints</EM>? <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB> = <EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_statEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>extended 
                  with static environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>for 
                  uri</B></A> <EM>AnyURI</EM><SUB><FONT 
              size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, 
        <EM>AnyURI</EM>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import module namespace <EM>NCName</EM> = 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> 
                  <EM>LocationHints</EM>? <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM><SUB><FONT size=2>1</FONT></SUB> = 
                  <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, 
        <EM>AnyURI</EM>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  import module namespace <EM>NCName</EM> = 
                  <EM>URILiteral</EM><SUB><FONT size=2>1</FONT></SUB> 
                  <EM>LocationHints</EM>? <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the rules above and the rules for processing a library module in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A> above are mutually recursive. It is possible to 
define the semantics in that way, since XQuery forbids the use of recursive 
modules.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>During dynamic context processing, each variable and function name is mapped 
to the special value <CODE>#IMPORTED</CODE>(<EM>AnyURI</EM>) to indicate that 
the variable or function is defined in the imported module with the given 
URI.</P>
<P>The first set of premises below "look up" the dynamic contexts of all the 
imported modules, as defined in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A>. The second set of premises extend the input dynamic 
context with the global variables and functions declared in the imported dynamic 
contexts.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>AnyURI</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
                  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>extended 
                  with dynamic environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>for 
                  uri</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n-1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>extended 
                  with dynamic environment</B></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>yields</B></A> 
                  <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>for 
                  uri</B></A> 
      <EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> import module 
                  (namespace <EM>NCName</EM> =)? <EM>URILiteral</EM> 
                  <EM>LocationHints</EM>? <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the rule above and the rules for processing a library module in <A 
href="REC-xquery-semantics-20070123.htm#id-module-declaration"><B>[5.2 
Module Declaration]</B></A> above are mutually recursive. It is possible to 
define the semantics in that way, since XQuery forbids the use of recursive 
modules.</P></DIV>
<DIV class=div2>
<H3><A id=sec_namespace_decls name=sec_namespace_decls></A>5.12 Namespace 
Declaration</H3>
<H5><A id=N1CE52 name=N1CE52></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-NamespaceDecl 
      name=doc-xquery-NamespaceDecl></A>[<SMALL>10&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-NamespaceDecl">NamespaceDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for namespace declarations is:</P>
<H5><A id=N1CE6C name=N1CE6C></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-NamespaceDecl 
      name=doc-core-NamespaceDecl></A>[<SMALL>3&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NamespaceDecl">NamespaceDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Namespace declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>NamespaceDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>NamespaceDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>A namespace declaration adds a new (prefix,uri) binding in the namespace 
component of the static environment. All namespace declarations in the prolog 
are <B>passive</B> declarations. Namespace declaration attributes of element 
constructors are <B>active</B> declarations.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, 
        <EM>AnyURI</EM>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare namespace <EM>NCName</EM> = <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case the <EM>URILiteral</EM> part of a namespace declaration is a 
zero-length string, the namespace prefix is marked as #UNDECLARED in the static 
context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>NCName</EM> 
                  =&gt; (passive, 
      #UNDECLARED))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare namespace <EM>NCName</EM> = "" <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>The namespace declaration does not affect the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare namespace <EM>NCName</EM> = <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_default_namespace_decls name=sec_default_namespace_decls></A>5.13 
Default Namespace Declaration</H3>
<H5><A id=N1CFA6 name=N1CFA6></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-DefaultNamespaceDecl 
      name=doc-xquery-DefaultNamespaceDecl></A>[<SMALL>12&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-DefaultNamespaceDecl">DefaultNamespaceDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" ("element" | "function") "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for default namespace declarations is:</P>
<H5><A id=N1CFBA name=N1CFBA></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-DefaultNamespaceDecl 
      name=doc-core-DefaultNamespaceDecl></A>[<SMALL>4&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DefaultNamespaceDecl">DefaultNamespaceDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" ("element" | "function") "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Default namespace declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>DefaultNamespaceDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>DefaultNamespaceDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>A default element namespace declaration changes the default element namespace 
component of the static environment. If the URI literal is the zero-length 
string, the default element namespace is set to the null namespace.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB> = <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      + <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A>(#NULL-NAMESPACE)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default element namespace "" <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>URILiteral</EM> 
                  = "")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_elem_ns_env">default_elem_namespace</A>( 
                  <EM>AnyURI</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default element namespace <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>A default function namespace declaration changes the default function 
namespace component of the static environment. If the URI literal is the 
zero-length string, the default function namespace is set to the null 
namespace.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB> = <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      + <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A>(#NULL-NAMESPACE)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default function namespace "" <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>URILiteral</EM> 
                  = "")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>URILiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_default_fn_ns_env">default_function_namespace</A>( 
                  <EM>AnyURI</EM>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare default function namespace <EM>URILiteral</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that multiple declarations of the same namespace prefix in the Prolog 
result in a static error. However, a declaration of a namespace in the Prolog 
can override a prefix that has been predeclared in the static context.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>Default namespace declarations do not affect the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>DefaultNamespaceDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_variable-declarations name=sec_variable-declarations></A>5.14 
Variable Declaration</H3>
<H5><A id=N1D1A4 name=N1D1A4></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-VarDecl 
      name=doc-xquery-VarDecl></A>[<SMALL>24&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-VarDecl">VarDecl</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "variable" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>? 
      ((":=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ExprSingle">ExprSingle</A>) 
      | "external")</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for variable declarations is:</P>
<H5><A id=N1D1C5 name=N1D1C5></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-VarDecl 
      name=doc-core-VarDecl></A>[<SMALL>16&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarDecl">VarDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "variable" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>? 
      ((":=" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A>) 
      | "external")</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Normalization of a variable declaration normalizes its initializing 
expression, if it is present.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> declare 
      variable $<EM>VarName</EM> as <EM>SequenceType</EM> := <EM>Expr</EM> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>declare variable 
      $<EM>VarName</EM> as <EM>SequenceType</EM> := <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> declare 
      variable $<EM>VarName</EM> := <EM>Expr</EM> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>declare variable 
      $<EM>VarName</EM> := <FONT size=6>[</FONT><EM>Expr</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_expr"><SUB><FONT 
      size=2>Expr</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>If an external variable declaration does not have a type declaration it is 
treated as if the type declaration was <CODE>item()*</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> declare 
      variable $<EM>VarName</EM> external <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>declare variable 
      $<EM>VarName</EM> as item()* external</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> declare 
      variable $<EM>VarName</EM> as <EM>SequenceType</EM> external <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>declare variable 
      $<EM>VarName</EM> as <EM>SequenceType</EM> 
external</TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>A variable declaration updates the variable component of the static context 
by associating the given variable with a static type.</P>
<P>If a variable declaration has an associated expression but does not have a 
type declaration, the static type of the variable is the static type of the 
expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>( 
                  <EM>Variable</EM> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> := <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the variable declaration has an associated expression and has a type 
declaration, the static type of the variable is the specified type. The type of 
the expression must be a subtype of the declared type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT><EM>SequenceType</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>( 
                  <EM>Variable</EM> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> as <EM>SequenceType</EM> := 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the variable declaration is external and has a type declaration, the 
static type of the variable is the specified type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT><EM>SequenceType</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>( 
                  <EM>Variable</EM> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> as <EM>SequenceType</EM> 
                  external <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>To evaluate a variable declaration, its associated expression is evaluated, 
and the dynamic context is updated with the variable bound to the resulting 
value.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>( 
                  <EM>Variable</EM> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> := <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT> <EM>SequenceType</EM> <FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>( 
                  <EM>Variable</EM> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> as <EM>SequenceType</EM> := 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Dynamic evaluation does not apply to externally defined variables. The 
dynamic environment must provide the values of external variables in the initial 
dynamic context (<A class=env 
href="REC-xquery-semantics-20070123.htm#xq_default_dyn_env">dynEnvDefault</A>).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  declare variable $<EM>VarName</EM> as <EM>SequenceType</EM> 
                  external <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_FunctionDeclns name=sec_FunctionDeclns></A>5.15 Function 
Declaration</H3>
<P><B>Introduction</B></P>
<P>User-defined functions specify the name of the function, the names and types 
of the parameters, and the type of the result. The <B>function body</B> defines 
how the result of the function is computed from its parameters.</P>
<H5><A id=N1D600 name=N1D600></A>Function declarations</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-FunctionDecl 
      name=doc-xquery-FunctionDecl></A>[<SMALL>26&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-FunctionDecl">FunctionDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "function" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ParamList">ParamList</A>? 
      ")" ("as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A>)? 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EnclosedExpr">EnclosedExpr</A> 
      | "external")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-ParamList 
      name=doc-xquery-ParamList></A>[<SMALL>27&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-ParamList">ParamList</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Param">Param</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Param">Param</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-Param 
      name=doc-xquery-Param></A>[<SMALL>28&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-Param">Param</A><SUP><SMALL> 
      XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-TypeDeclaration">TypeDeclaration</A>?</CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar productions for function declarations are:</P>
<H5><A id=N1D64E name=N1D64E></A>Function declarations</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-FunctionDecl 
      name=doc-core-FunctionDecl></A>[<SMALL>18&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FunctionDecl">FunctionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "function" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      "(" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ParamList">ParamList</A>? 
      ")" ("as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A>)? 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-EnclosedExpr">EnclosedExpr</A> 
      | "external")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-ParamList 
      name=doc-core-ParamList></A>[<SMALL>19&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ParamList">ParamList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Param">Param</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Param">Param</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-Param 
      name=doc-core-Param></A>[<SMALL>20&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Param">Param</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A>?</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_map_param>The following auxiliary mapping rule is used for the 
normalization of parameters in function declarations: <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
size=2>Param</FONT></SUB></A>.</P>
<P>Parameters without a declared type are given the item()* sequence type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>$<EM>VarName</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>$<EM>VarName</EM> as 
  item()*</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>$<EM>VarName</EM> as <EM>SequenceType</EM> <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>$<EM>VarName</EM> as 
      <EM>SequenceType</EM></TD></TR></TBODY></TABLE></DIV>
<P>An empty parameter list is left unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle></TD></TR></TBODY></TABLE></DIV>
<P>A parameter list is normalized by applying the normalization rule to each 
parameter.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>Param</EM><SUB><FONT size=2>1</FONT></SUB>, ..., 
      <EM>Param</EM><SUB><FONT size=2>n</FONT></SUB> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <EM>Param</EM><SUB><FONT size=2>1</FONT></SUB> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A>, ..., <FONT size=6>[</FONT> 
      <EM>Param</EM><SUB><FONT size=2>n</FONT></SUB> <FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>The parameter list and body of a user-defined function are all normalized 
into Core expressions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <FONT size=6>[</FONT><EM>SequenceType</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <FONT size=6>[</FONT> declare function <EM>QName</EM> ( 
      <EM>ParamList</EM>? ) as <EM>SequenceType</EM> { <EM>Expr</EM> } <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A> = declare function <EM>QName</EM> ( 
      <FONT size=6>[</FONT><EM>ParamList</EM>?<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A> ) as <EM>SequenceType</EM> { <FONT 
      size=6>[</FONT><EM>Expr</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_function_argument"><SUB><FONT 
      size=2>FunctionArgument(Type)</FONT></SUB></A> 
}</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the return type of the function is not provided, it is given the 
<CODE>item()*</CODE> sequence type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>declare 
      function <EM>QName</EM> ( <EM>ParamList</EM>? ) { <EM>Expr</EM> }<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>declare 
      function <EM>QName</EM> ( <EM>ParamList</EM>? ) as item()* { <EM>Expr</EM> 
      }<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Externally defined functions are normalized similarly.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> declare 
      function <EM>QName</EM> ( <EM>ParamList</EM>? ) as <EM>SequenceType</EM> 
      external<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>declare function 
      <EM>QName</EM>( <FONT size=6>[</FONT><EM>ParamList</EM>?<FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_param"><SUB><FONT 
      size=2>Param</FONT></SUB></A> ) as <EM>SequenceType</EM> 
  external</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>declare 
      function <EM>QName</EM> ( <EM>ParamList</EM>? ) external <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>declare 
      function <EM>QName</EM> ( <EM>ParamList</EM>? ) as item()* external <FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>We use the following auxiliary judgment during static context processing and 
static type analysis of function declarations.</P>
<P id=jd_function_declaration>The judgment:</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
declaration</B></A> <EM>FunctionDecl</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
signature</B></A> <EM>FunctionSig</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds if the function declaration <EM>FunctionDecl</EM> with the signature 
<EM>FunctionSig</EM> has the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>Static context processing accesses the function signature from the static 
context, and checks that the function declaration corresponds to the declared 
type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_functy_env">funcType</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>,n) 
                  = <EM>FunctionSig</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
                  declaration</B></A> <EM>FunctionDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
                  signature</B></A> <EM>FunctionSig</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>FunctionDecl</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
      size=2>stat</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that the static context processing is performing type checking of the 
function, as defined below. Note also that the type checking is done in the new 
environment in which the function declaration has been added which ensures that 
recursive calls are type-checked properly.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rules for function bodies follow normalization and 
processing of the static context. The static typing rules below construct a new 
environment in which each parameter has the given expected type, then the static 
type of the function's body is computed under the new environment. The function 
body's type must be a subtype of the expected return type. If static typing 
fails, a static type error is raised. Otherwise, static typing of the function 
has no other effect, as function signatures are already inside the static 
environment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
      declaration</B></A> declare function <EM>QName</EM> () as 
      <EM>SequenceType</EM><SUB><FONT size=2>r</FONT></SUB> { <EM>Expr</EM> } <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
      signature</B></A> declare function <A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
      as <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>( 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ;...; <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB> =&gt; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> ) <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
      declaration</B></A> declare function <EM>QName</EM> 
      ($<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM><SUB><FONT size=2>1</FONT></SUB>, ···, 
      $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> as 
      <EM>SequenceType</EM><SUB><FONT size=2>n</FONT></SUB>) as 
      <EM>SequenceType</EM><SUB><FONT size=2>r</FONT></SUB> { <EM>Expr</EM> } <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
      signature</B></A> declare function <A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, ..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>) as <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The bodies of external functions are not available and therefore cannot by 
type checked. To ensure type soundness, the implementation must guarantee that 
the value returned by the external function matches the expected return 
type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
      declaration</B></A> declare function <EM>QName</EM> () as 
      <EM>SequenceType</EM><SUB><FONT size=2>r</FONT></SUB> external <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
      signature</B></A> declare function <A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
      as <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
      declaration</B></A> declare function <EM>QName</EM> ( 
      $<EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> as 
      <EM>SequenceType</EM><SUB><FONT size=2>1</FONT></SUB>, ···, 
      $<EM>VarName</EM><SUB><FONT size=2>n</FONT></SUB> as 
      <EM>SequenceType</EM><SUB><FONT size=2>n</FONT></SUB> ) as 
      <EM>SequenceType</EM><SUB><FONT size=2>r</FONT></SUB> external <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
      signature</B></A> declare function <A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, ..., <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>) as <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>r</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>A function declaration updates the dynamic context. The function name with 
arity N is associated with the given function body. The number of arguments is 
required, because XQuery permits overloading of function names as long as each 
function signature has a different number of arguments.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>() 
                  =&gt; 
    (<EM>Expr</EM>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      declare function <EM>QName</EM> () as <EM>SequenceType</EM><SUB><FONT 
      size=2>r</FONT></SUB> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
      size=2>dyn</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>VarName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>···</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>VarName</EM><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
                  var expands to</B></A> <EM>Variable</EM><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>SequenceType</EM><SUB><FONT 
                  size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>SequenceType</EM><SUB><FONT 
                  size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
                  + <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_func_env">funcDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) =&gt; ( <EM>Expr</EM> , 
                  <EM>Variable</EM><SUB><FONT size=2>1</FONT></SUB> , ···, 
                  <EM>Variable</EM><SUB><FONT 
              size=2>n</FONT></SUB>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      declare function <EM>QName</EM> ( $<EM>VarName</EM><SUB><FONT 
      size=2>1</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
      size=2>1</FONT></SUB>, ···, $<EM>VarName</EM><SUB><FONT 
      size=2>n</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
      size=2>n</FONT></SUB> ) as <EM>SequenceType</EM><SUB><FONT 
      size=2>r</FONT></SUB> { <EM>Expr</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
      size=2>dyn</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>An external function declaration does not affect the dynamic environment. The 
implementation must support the declared external functions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      declare function <EM>QName</EM> ( $<EM>VarName</EM><SUB><FONT 
      size=2>1</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
      size=2>1</FONT></SUB>, ···, $<EM>VarName</EM><SUB><FONT 
      size=2>n</FONT></SUB> as <EM>SequenceType</EM><SUB><FONT 
      size=2>n</FONT></SUB> ) as <EM>SequenceType</EM><SUB><FONT 
      size=2>r</FONT></SUB> external <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
      size=2>dyn</FONT></SUB></A> <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The dynamic semantics of a function body are applied when the function is 
called, as described in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>.</P></DIV>
<DIV class=div2>
<H3><A id=id-option-declaration name=id-option-declaration></A>5.16 Option 
Declaration</H3>
<H5><A id=N1DD6D name=N1DD6D></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-xquery-OptionDecl 
      name=doc-xquery-OptionDecl></A>[<SMALL>13&nbsp;(XQuery)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/xquery/#prod-xquery-OptionDecl">OptionDecl</A><SUP> 
      <SMALL>XQ</SMALL></SUP></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "option" <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B>Core Grammar</B></P>
<P>The core grammar production for option declarations is:</P>
<H5><A id=N1DD87 name=N1DD87></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-core-OptionDecl 
      name=doc-core-OptionDecl></A>[<SMALL>5&nbsp;(Core)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OptionDecl">OptionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "option" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_normalization">Normalization</A></B></P>
<P>Option declarations are left unchanged through normalization.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>OptionDecl</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_prolog"><SUB><FONT 
      size=2>PrologDecl</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>OptionDecl</EM></TD></TR></TBODY></TABLE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_context">Static 
Context Processing</A></B></P>
<P>An option declaration does not have any effect on the static context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>OptionDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
                  size=2>stat</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#dyn_processing_context">Dynamic 
Context Processing</A></B></P>
<P>An option declaration does not have any effect on the dynamic context.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>OptionDecl</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
                  size=2>dyn</FONT></SUB></A> <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=id-xquery-conformance name=id-xquery-conformance></A>6 
Conformance</H2>
<P>The XQuery Formal Semantics is intended primarily as a component that can be 
used by <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A>, or a host language of <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>. Therefore, the XQuery Formal Semantics relies on 
specifications that use it (such as [XPath 2.0], [XSLT 2.0], and [XQuery]) to 
specify conformance criteria in their respective environments. Specifications 
that set conformance criteria for their use of the formal semantics must not 
relax the constraints expressed in this specification.</P>
<DIV class=div2>
<H3><A id=id-static-typing-feature name=id-static-typing-feature></A>6.1 Static 
Typing Feature</H3>
<P>This specification normatively defines the static typing feature which can be 
used in <A 
href="REC-xquery-semantics-20070123.htm#xquery">[XQuery 
1.0: An XML Query Language]</A> or a host language of <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>. The static typing feature is specified using the 
static typing judgment introduced in <A 
href="REC-xquery-semantics-20070123.htm#sec_static"><B>[3.2.3 
Static typing judgment]</B></A>.</P>
<DIV class=div3>
<H4><A id=id-static-extensions name=id-static-extensions></A>6.1.1 Static Typing 
Extensions</H4>
<P>In some cases, the static typing rules are not very precise (see, for 
example, the type inference rules for the ancestor axes—parent, ancestor, and 
ancestor-or-self—and for the function <CODE>fn:root</CODE>). If an 
implementation supports a static typing extension, it must always provide a more 
precise type than the one defined in this specification.</P>
<P id=jd_has_type_extension>This constraint is formally expressed as follows. A 
static typing extension <EM>Expr</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_type_extension"><B>:</B><SUB><FONT 
size=2>ext</FONT></SUB></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
must be such that for every expression <EM>Expr</EM> the following holds.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>' 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type_extension"><B>:</B><SUB><FONT 
                  size=2>ext</FONT></SUB></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV class=note>
<P class=prefix><B>Note:</B></P>
<P>It is not recommended for a static typing extension to change the static 
typing behavior of expressions that specify a type explicitly (<CODE>treat 
as</CODE>, <CODE>cast as</CODE>, <CODE>typeswitch</CODE>, function parameters, 
and type declarations in variable bindings), since the purpose of those 
expressions is to impose a specific type.</P></DIV></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_special_functions name=sec_special_functions></A>7 Additional 
Semantics of Functions</H2>
<P>This section defines the auxiliary functions required to define the formal 
semantics of [XPath/XQuery], and gives special normalization and static typing 
rules for some functions in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>.</P>
<P>Remember from <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A> that the following rules operate after namespace 
resolution for the function name, and directly over the input type of the 
parameters. In the rest of the section, we will use the following shortcuts 
notations for specific relevant URIs:</P>
<UL>
  <LI>
  <P><CODE>FN-URI</CODE> for functions from the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
  and Operators]</A> document.</P>
  <LI>
  <P><CODE>OP-URI</CODE> for operators from the <A 
  href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
  and Operators]</A> document.</P>
  <LI>
  <P><CODE>FS-URI</CODE> for formal semantics functions.</P></LI></UL>
<DIV class=div2>
<H3><A id=sec_special_fs_functions name=sec_special_fs_functions></A>7.1 Formal 
Semantics Functions</H3>
<P><B>Introduction</B></P>
<P>This section gives the definition and semantics of functions that are used in 
the formal semantics but are not in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>. Their dynamic semantics are defined in the same informal 
style as in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document. The static semantics of some formal-semantics 
functions require custom static typing rules.</P>
<DIV class=div3>
<H4><A id=sec_convert_operand name=sec_convert_operand></A>7.1.1 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE class=function>fs:convert-operand</CODE>(<CODE 
class=arg>$actual</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>xs:anyAtomicType?</CODE>, <CODE class=arg>$expected</CODE><CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE class=type>xs:anyAtomicType</CODE>)<CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE class=return-type>xs:anyAtomicType 
?</CODE></DIV></DIV>
<P>The formal-semantics function <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_operand"><EM>fs:</EM><CODE>convert-operand</CODE></A> 
converts the operands of arithmetic and comparison operators as follows:</P>
<OL class=enumar>
  <LI>
  <P>If <CODE>$actual</CODE> is the empty sequence, returns the empty 
  sequence.</P>
  <LI>
  <P>If <CODE>$actual</CODE> is an instance of type <A 
  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
  then</P>
  <OL class=enumla>
    <LI>
    <P>if <CODE>$expected</CODE> is an instance of type <A 
    href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
    or <CODE>xs:string</CODE>, returns <CODE>$actual</CODE> cast to 
    <CODE>xs:string</CODE>;</P>
    <LI>
    <P>if <CODE>$expected</CODE> is of numeric type, returns 
    <CODE>$actual</CODE> cast to <CODE>xs:double</CODE></P>
    <LI>
    <P>otherwise returns <CODE>$actual</CODE> cast to the type of 
    <CODE>$expected</CODE>.</P></LI></OL>
  <LI>
  <P>Otherwise, returns <CODE>$actual</CODE>.</P></LI></OL>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>No conversion is needed unless $actual is an instance of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> not(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>?)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand">(<CODE>FS-URI</CODE>,"<CODE>convert-operand</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A><SUB><FONT size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Pairs of untyped atomic operands are converted to strings.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  ?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>|<CODE> 
                  xs:string</CODE>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand">(<CODE>FS-URI</CODE>,"<CODE>convert-operand</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A><SUB><FONT size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:string</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>When an untyped operand is paired with a numeric operand, it is converted to 
xs:double.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  ?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <EM>fs:</EM><CODE>numeric</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand">(<CODE>FS-URI</CODE>,"<CODE>convert-operand</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A><SUB><FONT size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:double</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>Finally, an untyped atomic operand not dealt with by the above rules is 
converted to the type of the other operand.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  ?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>|<CODE> 
                  xs:string</CODE>|<EM>fs:</EM><CODE>numeric</CODE>))</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_operand">(<CODE>FS-URI</CODE>,"<CODE>convert-operand</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A><SUB><FONT size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_convert_simple_operand name=sec_convert_simple_operand></A>7.1.2 
<SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand"><EM>fs:</EM><CODE>convert-simple-operand</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE class=function>fs:convert-simple-operand</CODE>(<CODE 
class=arg>$actual</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>xs:anyAtomicType *</CODE>, <CODE class=arg>$expected</CODE><CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE class=type>xs:anyAtomicType</CODE>)<CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE class=return-type>xs:anyAtomicTypeAtomic 
*</CODE></DIV></DIV>
<P>The formal-semantics function <A 
href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand"><EM>fs:</EM><CODE>convert-simple-operand</CODE></A> 
is used to convert the value of the <CODE>$actual</CODE> argument such that it 
matches the type of the <CODE>$expected</CODE> argument (or matches a sequence 
of that type).</P>
<P>The dynamic semantics of this function are as follows:</P>
<UL>
  <LI>
  <P>For each item in <CODE>$actual</CODE> argument that is of type 
  xs:untypedAtomic, that item is cast to the type of the <CODE>$expected</CODE> 
  argument, and the resulting sequence is returned.</P></LI></UL>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The following static typing rules correspond to the dynamic semantics rules 
given above.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>), <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#sec_convert_simple_operand">(<CODE>FS-URI</CODE>,"<CODE>convert-simple-operand</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A><SUB><FONT size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_distinct_docorder name=sec_distinct_docorder></A>7.1.3 <SPAN>The 
<A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE class=function>fs:distinct-doc-order</CODE>(<CODE 
class=arg>$nodes</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE class=type>node 
*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE class=return-type>node 
*</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A> 
function sorts its input sequence of nodes by document order and removes 
duplicates.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A> 
function expects a sequence of nodes as input. The resulting type is computed 
using <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  node*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder">(<CODE>FS-URI</CODE>,"<CODE>distinct-doc-order</CODE>")</A> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_distinct_docorder_or_atomic_sequence 
name=sec_distinct_docorder_or_atomic_sequence></A>7.1.4 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence"><EM>fs:</EM><CODE>distinct-doc-order-or-atomic-sequence</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:distinct-doc-order-or-atomic-sequence</CODE>(<CODE class=arg> 
$item</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>item()*</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence"><EM>fs:</EM><CODE>distinct-doc-order-or-atomic-sequence</CODE></A> 
function operates on either an homogeneous sequence of nodes or an homogeneous 
sequence of atomic values. If the input is a sequence of nodes, is sorts those 
nodes by document order and removes duplicates, using the fs:distinct-doc-order 
function. If it is a sequence of atomic values, it returns it unchanged.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder"><EM>fs:</EM><CODE>distinct-doc-order</CODE></A> 
function expects either a sequence of nodes as input or a sequence of atomic 
values. The resulting type is computed using <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <FONT size=6>[</FONT>node()<FONT size=6>]</FONT><A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence">(<CODE>FS-URI</CODE>,"<CODE> 
                  distinct-doc-order-or-atomic-sequence</CODE>")</A> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_distinct_docorder_or_atomic_sequence">(<CODE>FS-URI</CODE>,"<CODE> 
                  distinct-doc-order-or-atomic-sequence</CODE>")</A> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_items_to_nodes name=sec_items_to_nodes></A>7.1.5 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-node-sequence</CODE>(<CODE 
class=arg>$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>node()*</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence</CODE></A> 
function converts a sequence of item values to nodes by applying the normative 
rules numbered <CODE>1</CODE>, <CODE>2</CODE>, <CODE>3</CODE> after the sentence 
"Processing of the computed element constructor proceeds as follows:" in <A 
href="http://www.w3.org/TR/xquery#id-computedElements">Section 3.7.3.1 Computed 
Element Constructors</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute*, 
                  (element|document|text|processing-instruction|comment|<CODE>xs:string</CODE>|<CODE> 
                  xs:float</CODE>| 
            ...|<CODE>xs:NOTATION</CODE>)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes_doc">(<CODE>FS-URI</CODE>,"<CODE>item-sequence-to-node-sequence</CODE>")</A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  attribute*, 
              (element|text|processing-instruction|comment)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_items_to_nodes_doc name=sec_items_to_nodes_doc></A>7.1.6 <SPAN>The 
<A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence-doc</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-node-sequence-doc</CODE>(<CODE class=arg> 
$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>node()*</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes"><EM>fs:</EM><CODE>item-sequence-to-node-sequence-doc</CODE></A> 
function converts a sequence of item values to nodes by applying the normative 
rules numbered <CODE>1</CODE>, <CODE>2</CODE>, <CODE>3</CODE> after the sentence 
"Processing of the document node constructor then proceeds as follows:" in <A 
href="http://www.w3.org/TR/xquery#id-documentConstructors">Section 3.7.3.3 
Document Node Constructors</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (element|document|text|processing-instruction|comment|<CODE>xs:string</CODE>|<CODE> 
                  xs:float</CODE>| 
            ...|<CODE>xs:NOTATION</CODE>)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#sec_items_to_nodes_doc">(<CODE>FS-URI</CODE>,"<CODE>item-sequence-to-node-sequence-doc</CODE>")</A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  (element|text|processing-instruction|comment)*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_item_seq_to_untypedAtomic 
name=sec_item_seq_to_untypedAtomic></A>7.1.7 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
function</SPAN></H4>
<P><B>Introduction</B></P>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-untypedAtomic</CODE>(<CODE 
class=arg>$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>xs:untypedAtomic</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
function converts a sequence of item values to a string of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
by applying the normative rules in <A 
href="http://www.w3.org/TR/xquery#id-computedAttributes">Section 3.7.3.2 
Computed Attribute Constructors</A><SUP><SMALL>XQ</SMALL></SUP> for processing 
the content expression.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the input of the <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic</CODE></A> 
function is an empty sequence, it returns a zero-length string. Otherwise, each 
atomic value in the input sequence is cast into a string. The individual strings 
resulting from the previous step are merged into a single string by 
concatenating them with a single space character between each pair.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no special static typing rules for this function. Static type 
analysis for this function should be performed as for a built-in function 
declared with the given signature.</P></DIV>
<DIV class=div3>
<H4><A id=sec_item_seq_to_untypedAtomic_PI 
name=sec_item_seq_to_untypedAtomic_PI></A>7.1.8 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-PI</CODE></A> 
function</SPAN></H4>
<P><B>Introduction</B></P>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-untypedAtomic-PI</CODE>(<CODE 
class=arg>$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>xs:untypedAtomic</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-PI</CODE></A> 
function converts a sequence of item values to a string of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
by applying the normative rules in <A 
href="http://www.w3.org/TR/xquery#id-computed-pis">Section 3.7.3.5 Computed 
Processing Instruction Constructors</A><SUP><SMALL>XQ</SMALL></SUP> for 
processing the content expression.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the input is an empty sequence, the <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_PI"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-PI</CODE></A> 
function returns a zero-length string. Otherwise, each atomic value in the input 
sequence is cast into a string. If any of the resulting strings contains the 
string "?&gt;", a dynamic error is raised. The individual strings resulting from 
the previous step are merged into a single string by concatenating them with a 
single space character between each pair. Leading whitespace is removed from the 
resulting string.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no special static typing rules for this function. Static type 
analysis for this function should be performed as for a built-in function 
declared with the given signature.</P></DIV>
<DIV class=div3>
<H4><A id=sec_item_seq_to_untypedAtomic_text 
name=sec_item_seq_to_untypedAtomic_text></A>7.1.9 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_text"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-text</CODE></A> 
function</SPAN></H4>
<P><B>Introduction</B></P>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-untypedAtomic-text</CODE>(<CODE class=arg> 
$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>xs:untypedAtomic?</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_text"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-text</CODE></A> 
function converts a sequence of item values to a string of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
or empty, by applying the rules in <A 
href="http://www.w3.org/TR/xquery#id-textConstructors">Section 3.7.3.4 Text Node 
Constructors</A><SUP><SMALL>XQ</SMALL></SUP> for processing the content 
expression.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the input is the empty sequence, the <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_text"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-text</CODE></A> 
function returns the empty sequence. Otherwise, each atomic value in the input 
sequence is cast into a string. The individual strings resulting from the 
previous step are merged into a single string by concatenating them with a 
single space character between each pair.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no special static typing rules for this function. Static type 
analysis for this function should be performed as for a built-in function 
declared with the given signature.</P></DIV>
<DIV class=div3>
<H4><A id=sec_item_seq_to_untypedAtomic_comment 
name=sec_item_seq_to_untypedAtomic_comment></A>7.1.10 <SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_comment"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-comment</CODE></A> 
function</SPAN></H4>
<P><B>Introduction</B></P>
<DIV class=exampleInner>
<DIV class=proto><CODE 
class=function>fs:item-sequence-to-untypedAtomic-comment</CODE>(<CODE class=arg> 
$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>xs:untypedAtomic</CODE></DIV></DIV>
<P>The <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_comment"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-comment</CODE></A> 
function converts a sequence of item values to a string of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
by applying the normative rules in <A 
href="http://www.w3.org/TR/xquery#id-computed-comments">Section 3.7.3.6 Computed 
Comment Constructors</A><SUP><SMALL>XQ</SMALL></SUP> for processing the content 
expression.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the input is the empty sequence, the <A 
href="REC-xquery-semantics-20070123.htm#sec_item_seq_to_untypedAtomic_comment"><EM>fs:</EM><CODE>item-sequence-to-untypedAtomic-comment</CODE></A> 
function returns a zero-length string. Otherwise, each atomic value in the input 
sequence is cast into a string. The individual strings resulting from the 
previous step are merged into a single string by concatenating them with a 
single space character between each pair. It is a dynamic error if the result of 
the content expression of a computed comment constructor contains two adjacent 
hyphens or ends with a hyphen.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>There are no special static typing rules for this function. Static type 
analysis for this function should be performed as for a built-in function 
declared with the given signature.</P></DIV>
<DIV class=div3>
<H4><A id=sec_apply_ordering_mode name=sec_apply_ordering_mode></A>7.1.11 
<SPAN>The <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
function</SPAN></H4>
<DIV class=exampleInner>
<DIV class=proto><CODE class=function>fs:apply-ordering-mode</CODE>(<CODE 
class=arg>$items</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>item()*</CODE>)<CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>item()*</CODE></DIV></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If the <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
is set to ordered, the <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
function is the identity function, returning its input sequence in its original 
order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
      = <CODE>ordered</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>Expr</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<EM> 
      Expr</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
is set to unordered, the <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
is equivalent to the <CODE>fn:unordered</CODE> function, returning the items 
from its input sequence in arbitrary order.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
      = <CODE>unordered</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <CODE>fn:unordered</CODE>(<EM>Expr</EM>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A>(<EM> 
      Expr</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>If the ordering context is set to <CODE>ordered</CODE>, the static type of 
the input expression of the <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
function is left unchanged.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
      = <CODE>ordered</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode">(<CODE>FS-URI</CODE>,"<CODE>apply-ordering-mode</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the ordering context is set to <CODE>unordered</CODE>, the static type of 
the input expression of the <A 
href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode"><EM>fs:</EM><CODE>apply-ordering-mode</CODE></A> 
function is computed using the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A> 
judgments, as for the <CODE>fn:unordered</CODE> function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
      class=env 
      href="REC-xquery-semantics-20070123.htm#xq_ordering_mode_env">orderingMode</A> 
      = <CODE>unordered</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#sec_apply_ordering_mode">(<CODE>FS-URI</CODE>,"<CODE>apply-ordering-mode</CODE>")</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"> 
      <EM>Type</EM></A>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fs_to name=sec_fs_to></A>7.1.12 The <EM>fs:</EM><CODE>to</CODE> 
function</H4>
<DIV class=exampleInner>
<DIV class=proto><CODE class=function>fs:to</CODE>(<CODE 
class=arg>$firstval</CODE><CODE class=as>&nbsp;as&nbsp;</CODE><CODE 
class=type>xs:integer?</CODE>, <CODE class=arg>$lastval</CODE><CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE class=type>xs:integer?</CODE>)<CODE 
class=as>&nbsp;as&nbsp;</CODE><CODE 
class=return-type>xs:integer*</CODE></DIV></DIV>
<P>The formal semantics function <EM>fs:</EM><CODE>to</CODE> is a wrapper 
function for the <CODE>op:to</CODE> operator, taking the semantics of the range 
expression over empty sequences into account.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>If one of the input parameters for <EM>fs:</EM><CODE>to</CODE> is the empty 
sequence, the function returns the empty sequence, otherwise it returns the 
result of calling the <CODE>op:to</CODE> operator. This semantics is equivalent 
to the following user-defined function.</P>
<DIV class=exampleInner><PRE>declare function fs:to($firstval as xs:integer?, $lastval as xs:integer?) as xs:integer* {
  if (fn:empty($firstval) or fn:empty($lastval)
  then ()
  else op:to($firstval,$lastval)
};
</PRE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static type of <EM>fs:</EM><CODE>to</CODE> does not require any 
additional static typing rule, and is typed as a function call based on the 
above signature.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=function_rules name=function_rules></A>7.2 Standard functions with 
specific static typing rules</H3>
<P><B>Introduction</B></P>
<P>This section gives special normalization and static typing rules for 
functions in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> for which the standard normalization or static typing rules 
are not appropriate. All functions that are not mentioned behave as described in 
Section <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>. When given, the static typing rules in this section 
always give more precise type information than the generic rule based on the 
function's signature.</P>
<DIV class=div3>
<H4><A id=sec_fn_last name=sec_fn_last></A>7.2.1 The <CODE>fn:last</CODE> 
context function</H4>
<P>As explained in <A 
href="REC-xquery-semantics-20070123.htm#eval_context"><B>[3.1.2 
Dynamic Context]</B></A>, the <CODE>fn:last()</CODE> context function is modeled 
using the Formal Semantics variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>. 
For that function the following static typing and dynamic evaluation rules 
apply.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>((<CODE>FS-URI</CODE>,"<CODE>last</CODE>")) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>last</CODE>")() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>((<CODE>FS-URI</CODE>,"<CODE>last</CODE>")) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
      (<CODE>FN-URI</CODE>,"<CODE>last</CODE>")() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
      types</B></A> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
      values</B></A> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_position name=sec_fn_position></A>7.2.2 The 
<CODE>fn:position</CODE> context function</H4>
<P>As explained in <A 
href="REC-xquery-semantics-20070123.htm#eval_context"><B>[3.1.2 
Dynamic Context]</B></A>, the <CODE>fn:position()</CODE> context function is 
modeled using the Formal Semantics variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A>. 
For that function the following static typing and dynamic evaluation rules 
apply.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_env">varType</A>((<CODE>FS-URI</CODE>,"<CODE>position</CODE>")) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>position</CODE>")() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_val_env">varValue</A>((<CODE>FS-URI</CODE>,"<CODE>position</CODE>")) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
      (<CODE>FN-URI</CODE>,"<CODE>position</CODE>")() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
      types</B></A> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
      values</B></A> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_abs_ceil_floor_round name=sec_fn_abs_ceil_floor_round></A>7.2.3 
<SPAN>The <CODE>fn:abs</CODE>, <CODE>fn:ceiling</CODE>, <CODE>fn:floor</CODE>, 
<CODE>fn:round</CODE>, and <CODE>fn:round-half-to-even</CODE> 
functions</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rules for the <CODE>fn:abs</CODE>, <CODE>fn:ceiling</CODE>, 
<CODE>fn:floor</CODE>, <CODE>fn:round</CODE>, and 
<CODE>fn:round-half-to-even</CODE> functions promote their input type to the 
(least) base primitive numeric type from which the input type is derived. Note 
that the fact that the type should be the least is cannot expressed by the 
inference rule notation used here. Parameters of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
are always promoted to <CODE>xs:double</CODE>. Instead of writing a separate 
judgment for each function, we write one rule for the functions whose name is 
either (<CODE>FN-URI</CODE>,"<CODE>abs</CODE>"), 
(<CODE>FN-URI</CODE>,"<CODE>ceiling</CODE>"), 
(<CODE>FN-URI</CODE>,"<CODE>floor</CODE>"), 
(<CODE>FN-URI</CODE>,"<CODE>round</CODE>"), or 
(<CODE>FN-URI</CODE>,"<CODE>round-half-to-even</CODE>") functions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>xs:integer</CODE>, <CODE>xs:decimal</CODE>, 
                  <CODE>xs:float</CODE>, <CODE>xs:double</CODE> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
                  ?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>, 
                  <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { (<CODE>FN-URI</CODE>,"<CODE>ceiling</CODE>"), 
                  (<CODE>FN-URI</CODE>,"<CODE>floor</CODE>"), 
                  (<CODE>FN-URI</CODE>,"<CODE>round</CODE>"), 
                  (<CODE>FN-URI</CODE>,"<CODE>round-half-to-even</CODE>") 
              }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_boolean name=sec_fn_boolean></A>7.2.4 <SPAN>The 
<CODE>fn:boolean</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The <CODE>fn:boolean</CODE> function as described in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document takes an empty sequence, a sequence of one or more 
nodes, or a singleton value of type <CODE>xs:boolean</CODE>, 
<CODE>xs:string</CODE>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
or some numeric type. All other values are illegal.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (empty | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A>+ 
                  | <CODE>xs:boolean</CODE> | <CODE>xs:string</CODE> | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  | <EM>fs:</EM><CODE>numeric</CODE> | 
              <CODE>xs:anyURI</CODE>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> (<CODE>FN-URI</CODE>,"<CODE>boolean</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:boolean</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_doc_collection name=sec_fn_doc_collection></A>7.2.5 <SPAN>The 
<CODE>fn:collection</CODE> and <CODE>fn:doc</CODE> functions</SPAN></H4>
<P><B>Introduction</B></P>
<P>The static typing rules for <CODE>fn:collection</CODE> and 
<CODE>fn:doc</CODE> depend on the syntactic form of their input expression. As a 
result, the corresponding static typing rules must be written directly over the 
input expression, unlike the other functions in this section.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The <CODE>fn:collection</CODE> function as described in the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document, takes a string-valued expression, which denotes a 
URI, and returns a value.</P>
<P>If the <CODE>fn:collection</CODE> function has no parameter, the result type 
is given by the implementation for the default sequence if it exists.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>collection</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> Implementation-defined default sequence 
                  has type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the argument to <CODE>fn:collection</CODE> is a <EM>URILiteral</EM> 
expression which is defined in <A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A>, 
then the result type is the type corresponding to the <EM>URILiteral</EM> in <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>collection</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A>(<EM>URILiteral</EM>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>URILiteral</EM>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, if the argument is a URI literal but is not defined in <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A>, 
or if it is not a URI literal, then we don't know anything about the URI and the 
static type is a collection of nodes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>collection</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_collection_type_env">collectionType</A>(<EM>URILiteral</EM>) 
                  undefined</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>URILiteral</EM>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      (element | attribute | processing-instruction | text | comment | document 
      ) *</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>collection</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Expr</EM> is not a 
            <EM>URILiteral</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      (element | attribute | processing-instruction | text | comment | document 
      ) *</TD></TR></TBODY></TABLE><BR></DIV>
<P>The <CODE>fn:doc</CODE> function has similar static typing rules, but, in 
addition, the static type must be a document node.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>doc</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A>(<EM>URILiteral</EM>) 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  document</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>URILiteral</EM>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, if the argument is a URI literal not defined in the domain of <A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
class=env 
href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A> 
or if it is not a URI literal, then we don't know anything about the URI, and 
the static type is document.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>doc</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_doc_type_env">docType</A>(<EM>URILiteral</EM>) 
                  undefined</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>URILiteral</EM>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      document?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>doc</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Expr</EM> is not a 
            <EM>URILiteral</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      document?</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_data name=sec_fn_data></A>7.2.6 The <CODE>fn:data</CODE> 
function</H4>
<P><B>Introduction</B></P>
<P>The <CODE>fn:data</CODE> function converts a sequence of items to a sequence 
of atomic values.</P>
<P><B>Notation</B></P>
<P id=jd_data>Inferring the type for the <CODE>fn:data</CODE> function is done 
by applying the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> auxiliary judgment, using the same approach as for the XPath 
steps.</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The general rule for <CODE>fn:data</CODE> is to apply the filter <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> to the prime type of its argument type, then apply the quantifier to 
the result:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
                  on</B></A> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>data</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to none, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> yields none.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <CODE>none</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>none</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to empty, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> yields empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <CODE>empty</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to the union of two types, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> is applied to each of the two types. The resulting type is computed 
using <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>. This rule is 
necessary because <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> may return a sequence of atomic types.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
                  on</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
                  on</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>'|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>') <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>'|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>')</TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to an atomic type, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> simply returns the atomic type:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to comment or processing instruction node types, <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> returns <CODE>xs:string</CODE></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  comment | 
        processing-instruction</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:string</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to text or document node types, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> returns <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  text | document</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to element node types with <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A>, 
the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> filter returns <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> of type <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to an attribute node type, the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> filter returns the attribute's simple type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to an element type whose <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> denotes a simple type or a complex 
type of simple content, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> returns the element's simple type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  (attribute*, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to an element type whose <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> denotes a complex type of mixed 
content, the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> filter returns <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation"><EM>Derivation</EM></A> 
                  mixed { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> 
    }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
      on</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      xs:untypedAtomic</TD></TR></TBODY></TABLE><BR></DIV>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> filter is not defined on any element type whose <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> denotes a complex type of complex 
content and therefore applying <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> to such a node raises a static error.</P>
<P><B>Example</B></P>
<P>Consider the following variable and its corresponding static type.</P>
<DIV class=exampleInner><PRE>    $x : (element price { attribute currency { xs:string }, xs:decimal }
         | element price_code { xs:integer })
</PRE></DIV>
<P>Applying the <CODE>fn:data</CODE> function on that variable results in the 
following type.</P>
<DIV class=exampleInner><PRE>    fn:data($x) : (xs:decimal | xs:integer)
</PRE></DIV>
<P>Because the input type is a choice, applying the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
on</B></A> filter results in a choice of simple types for the output of the 
<CODE>fn:data</CODE> function.</P></DIV>
<DIV class=div3>
<H4><A id=sec_fn_distinct_node_vals name=sec_fn_distinct_node_vals></A>7.2.7 
<SPAN>The <CODE>fn:distinct-values</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The <CODE>fn:distinct-values</CODE> function expects a sequence of atomic 
values as input and returns a sequence of prime types, which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>distinct-values</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_unordered name=sec_fn_unordered></A>7.2.8 <SPAN>The 
<CODE>fn:unordered</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics for <CODE>fn:unordered</CODE> is computed using <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>. The type of the 
argument is determined, and then <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(.) 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(.) 
are applied to that type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> (<CODE>FN-URI</CODE>,"<CODE>unordered</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fnerror name=sec_fnerror></A>7.2.9 <SPAN>The <CODE>fn:error</CODE> 
function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The fn:error function always has the <CODE>none</CODE> type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>error</CODE>")() <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>none</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <CODE>xs:QName</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>error</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>none</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <CODE>xs:QName</CODE>?&nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <CODE>xs:string</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>error</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>none</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <CODE>xs:QName</CODE>?&nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <CODE>xs:string</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>error</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>none</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_aggregates name=sec_fn_aggregates></A>7.2.10 <SPAN>The 
<CODE>fn:min</CODE>, <CODE>fn:max</CODE>, <CODE>fn:avg</CODE>, and 
<CODE>fn:sum</CODE> functions</SPAN></H4>
<P><B>Introduction</B></P>
<P>The semantics of aggregate functions convert any item of type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
in the input sequence to <CODE>xs:double</CODE>, then attempt to promote all 
values in the input sequence to values that are comparable. The static typing 
rules reflect the dynamic evaluation rules.</P>
<P>The <CODE>fn:sum</CODE> function has two forms. The first form takes two 
arguments: The first argument is the input sequence and the second argument is 
the value that should be returned if the input sequence is empty. In case there 
is no second argument, the value returned for an empty sequence is the 
<CODE>xs:integer</CODE> value 0. The following static typing rule applies in the 
case there is no second argument.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>sum</CODE>")(<EM>Expr</EM>,0) <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>sum</CODE>")(<EM>Expr</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P id=jd_convert_untypedAtomic>The type function <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A> 
takes a prime type and converts all occurrences of the type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
to a target type. It is defined recursively as follows.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <COL align=left>
  <TBODY>
  <TR>
    <TD></TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD>if not(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A> 
      = <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>)</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A></TD></TR>
  <TR>
    <TD></TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<CODE>empty</CODE>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>empty</CODE></TD></TR>
  <TR>
    <TD></TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<CODE>none</CODE>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>none</CODE></TD></TR>
  <TR>
    <TD></TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_agg_quantifier>The function <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A> 
converts the input type quantifier zero-or-more or zero-or-one to the result 
type quantifier zero-or-one, and converts the input type quantifier one or 
one-or-more, to the result type quantifier one.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <TBODY>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<CODE>?</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>?</CODE></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<CODE>*</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>?</CODE></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<CODE>1</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>1</CODE></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<CODE>+</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>1</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>Now we can define the static typing rules for the aggregate functions. First, 
the input type is converted to a prime type. Second, the type function <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A> 
is applied to the prime type, yielding a new prime type, in which occurrences of 
<A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
are converted to <CODE>xs:double</CODE>. Third, the judgment <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
be promoted to</B></A> is applied to the new prime type and target type. The 
result type is combined with the aggregate quantifier of the input type.</P>
<P>For a given aggregate function, instead of writing a separate judgment for 
each target type, we write one rule using a target type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB>.</P>
<P>For <CODE>fn:min</CODE> and <CODE>fn:max</CODE>, the target type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB> is either <CODE>xs:string</CODE>, <CODE>xs:integer</CODE>, 
<CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, <CODE>xs:double</CODE>, 
<CODE>xs:date</CODE>, <CODE>xs:time</CODE>, <CODE>xs:dateTime</CODE>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>min</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>xs:string</CODE>, <CODE>xs:integer</CODE>, 
                  <CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, 
                  <CODE>xs:double</CODE>, <CODE>xs:date</CODE>, 
                  <CODE>xs:time</CODE>, <CODE>xs:dateTime</CODE>, <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>min</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>))</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>max</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>xs:string</CODE>, <CODE>xs:integer</CODE>, 
                  <CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, 
                  <CODE>xs:double</CODE>, <CODE>xs:date</CODE>, 
                  <CODE>xs:time</CODE>, <CODE>xs:dateTime</CODE>, <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>max</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>))</TD></TR></TBODY></TABLE><BR></DIV>
<P>For <CODE>fn:avg</CODE>, the target type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB> is either <CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, 
<CODE>xs:double</CODE>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>avg</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, 
                  <CODE>xs:double</CODE>, <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>avg</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>))</TD></TR></TBODY></TABLE><BR></DIV>
<P>For <CODE>fn:sum</CODE>, the target type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>0</FONT></SUB> is either <CODE>xs:integer</CODE>, 
<CODE>xs:decimal</CODE>, <CODE>xs:float</CODE>, <CODE>xs:double</CODE>, <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A> 
. The second argument in <CODE>fn:sum</CODE> is the value that should be 
returned if the input sequence is empty. The result type is the union of the 
target type and the type of the second argument. Note that the rule checks that 
the type for the zero value is consistent with the type of the input 
sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>sum</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <CODE>xs:integer</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
                  ?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB> = <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_convert_untypedAtomic"><B>convert_untypedAtomic</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB>, <CODE>xs:double</CODE>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB>, ...,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>xs:integer</CODE>, <CODE>xs:decimal</CODE>, 
                  <CODE>xs:float</CODE>, <CODE>xs:double</CODE>, <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>sum</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_agg_quantifier"><B>aggregate_quantifier</B></A>(<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>))</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_remove name=sec_fn_remove></A>7.2.11 <SPAN>The 
<CODE>fn:remove</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static type for the <CODE>fn:remove</CODE> function is computed using <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>. Since one item 
may be removed from the sequence, the resulting type is made optional.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <CODE>xs:integer</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>remove</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      ?</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_reverse name=sec_fn_reverse></A>7.2.12 <SPAN>The 
<CODE>fn:reverse</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static type for the <CODE>fn:reverse</CODE> function is computed using <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>reverse</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_subsequence name=sec_fn_subsequence></A>7.2.13 <SPAN>The 
<CODE>fn:subsequence</CODE> function</SPAN></H4>
<P><B>Introduction</B></P>
<P>The <CODE>fn:subsequence</CODE> function has special static typing rules when 
its second argument is the numeric literal value 1 or the built-in variable <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>. 
These rules provide better typing for path expressions such as <EM>Expr</EM>[1] 
and <EM>Expr</EM>[<CODE>fn:last</CODE>()].</P>
<P>The static typing rules for <CODE>fn:subsequence</CODE> depends on the 
syntactic form of their input expression. As a result, the corresponding static 
typing rules must be written directly over the input expression, unlike the 
other functions in this section.</P>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>If the type of the input expression has exactly one or one-or-more items, 
then the type inferred for <CODE>fn:subsequence</CODE> is the prime type of the 
input type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>subsequence</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>1</CODE>, <CODE>+</CODE> 
        }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>, 1, 1) <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type of the input expression has zero or more items, 
<CODE>fn:subsequence</CODE> is applied on a numeric literal, <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>, 
then the static type is zero-or-one of the prime type of the input type. Those 
static typing rules are intended to support more precise typing for the cases 
where <CODE>fn:subsequence</CODE> is the result of normalizing an XPath 
predicate of the form <EM>Expr</EM>[<EM>NumericLiteral</EM>] of 
<EM>Expr</EM>[last()], see <A 
href="REC-xquery-semantics-20070123.htm#id-axis-steps"><B>[4.2.1 
Steps]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>subsequence</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>*</CODE>, <CODE>+</CODE> 
        }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>, 
                  <EM>NumericLiteral</EM>, 1) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <CODE>?</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The same rule applies when the last item in the input sequence is 
selected.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>subsequence</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>*</CODE>, <CODE>+</CODE> 
        }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>, <A 
                  href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>last</CODE></A>, 
                  1) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <CODE>?</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The same rule applies when an item is selected based on its position in the 
input sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>subsequence</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  &nbsp;&nbsp;&nbsp;&nbsp; <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { <CODE>*</CODE>, <CODE>+</CODE> 
        }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <EM>QName</EM>(<EM>Expr</EM>, <A 
                  href="REC-xquery-semantics-20070123.htm#fs_builtin_vars"><CODE>$</CODE><EM>fs:</EM><CODE>position</CODE></A>, 
                  1) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <CODE>?</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The last rule applies to all other applications of the 
<CODE>fn:subsequence</CODE> function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
                  func expands to</B></A> 
                  (<CODE>FN-URI</CODE>,"<CODE>subsequence</CODE>")</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:double</CODE> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <CODE>xs:double</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM>QName</EM>(<EM>Expr</EM>, <EM>Expr</EM><SUB><FONT 
      size=2>1</FONT></SUB>, <EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      ?</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_op_union_intersect_except 
name=sec_op_union_intersect_except></A>7.2.14 <SPAN>The <CODE>op:union</CODE>, 
<CODE>op:intersect</CODE>, and <CODE>op:except</CODE> operators</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static semantics for <CODE>op:union</CODE> is computed using <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>. The type of 
each argument is determined, and then <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(.) 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(.) 
are applied to the sequence type (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB>, <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>OP-URI</CODE>,"<CODE>union</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> , <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> , <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The static semantics of <CODE>op:intersect</CODE> is analogous to that for 
<CODE>op:union</CODE>. Because an intersection may be empty, the result type is 
optional.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>OP-URI</CODE>,"<CODE>intersect</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  ?</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The static semantics of <CODE>op:except</CODE> follows. The type of the 
second argument is ignored as it does not contribute to the result type. As with 
<CODE>op:intersect</CODE>, the result of <CODE>op:except</CODE> may be the empty 
sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>OP-URI</CODE>,"<CODE>except</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
                  ?</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_insert_before name=sec_fn_insert_before></A>7.2.15 <SPAN>The 
<CODE>fn:insert-before</CODE> function</SPAN></H4>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static type for the <CODE>fn:insert-before</CODE> function is computed 
using <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>, 
which are defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_factor"><B>[8.4 
Judgments for FLWOR and other expressions on sequences]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <CODE>xs:integer</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB> = (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      (<CODE>FN-URI</CODE>,"<CODE>insert-before</CODE>")(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_fn_cardinality_funcs name=sec_fn_cardinality_funcs></A>7.2.16 
<SPAN>The <CODE>fn:zero-or-one</CODE>, <CODE>fn:one-or-more</CODE>, and 
<CODE>fn:exactly-one</CODE> functions</SPAN></H4>
<P>The functions <CODE>fn:zero-or-one</CODE>, <CODE>fn:one-or-more</CODE>, and 
<CODE>fn:exactly-one</CODE> check that the cardinality of a sequence is in the 
expected range. They are useful to override the static type inferred for a given 
query.</P>
<P>For example, in the following query, the user may know that all ISBN numbers 
are unique and therefore that the function always returns at most one book 
element. However, the static typing feature cannot infer a precise enough type 
and will raise a type error during static type analysis.</P>
<DIV class=exampleInner><PRE>  declare function book_with_isbn($isbn as xs:string) as schema-element(book)? {
    //book[@isbn=$isbn]
  }
</PRE></DIV>
<P>In that query, the <CODE>fn:zero-or-one</CODE> function can be used to tell 
the type system that the cardinality is known to be zero or one.</P>
<DIV class=exampleInner><PRE>  declare function book_with_isbn($isbn as xs:string) as schema-element(book)? {
    fn:zero-or-one(//book[@isbn=$isbn])
  }
</PRE></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The static typing rules for those functions always infer a type with the 
cardinality indicated by that function.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>zero-or-one</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)?</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>one-or-more</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)+</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> 
                  (<CODE>FN-URI</CODE>,"<CODE>exactly-one</CODE>")(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_auxiliary_judgments name=sec_auxiliary_judgments></A>8 Auxiliary 
Judgments</H2>
<P>This section defines auxiliary judgments used in defining the formal 
semantics. Many auxiliary judgments are used in both static typing and dynamic 
evaluation rules. Those auxiliary judgments that are used in only the static or 
dynamic semantics are labeled as such.</P>
<DIV class=div2>
<H3><A id=sec_accessing_types name=sec_accessing_types></A>8.1 Judgments for 
accessing types</H3>
<P><B>Introduction</B></P>
<P>This section defines several auxiliary judgments to access components of the 
[XPath/XQuery] type system. The first two judgments (<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
from</B></A> and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
for</B></A>) are used to access the type and element name hierarchies in an XML 
Schema. The other judgments (<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
lookup</B></A>, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
lookup</B></A>, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
by</B></A>, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
to</B></A> and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A>) are used to lookup the meaning of element or attribute types from 
the schema. These judgments are used in many expressions, notably in the 
specification of type matching (See <A 
href="REC-xquery-semantics-20070123.htm#sec_type_matching"><B>[8.3 
Judgments for type matching]</B></A>), validation (See <A 
href="REC-xquery-semantics-20070123.htm#sec_validate"><B>[F.1 
Judgments for the validate expression]</B></A>), and the static semantics of 
step expressions (See <A 
href="REC-xquery-semantics-20070123.htm#sec_auxiliary_xpath"><B>[8.2 
Judgments for step expressions and filtering]</B></A>).</P>
<DIV class=div3>
<H4><A id=jd_aux_derives_from name=jd_aux_derives_from></A>8.1.1 Derives 
from</H4>
<P><B>Notation</B></P>
<P id=jd_derives_from>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
from</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
size=2>1</FONT></SUB> derives from <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. This judgment formalizes the definition of the 
<CODE>derives-from</CODE> function in <A 
href="http://www.w3.org/TR/xquery#id-sequencetype-matching">Section 2.5.4 
SequenceType Matching</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  USAddress            derives from  xs:anyType
  NYCAddress           derives from  USAddress
  NYCAddress           derives from  xs:anyType
  xsd:positiveInteger  derives from  xsd:integer
  xsd:integer          derives from  xs:anySimpleType
  fs:anon3             derives from  xsd:positiveInteger
  fs:anon3             derives from  xsd:integer
  fs:anon3             derives from  xs:anySimpleType
  fs:anon3             derives from  xs:anyType
</PRE></DIV>
<P><B>Note</B></P>
<P>Derivation is a partial order. It is reflexive and transitive by the 
definition below.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>Every type name derives from itself.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Every type name derives from the type it is declared to derive from by 
extension or restriction.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  extends <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  restricts <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The above rules all require that the type names be defined in the static 
context, but [XPath/XQuery] permits references to "unknown" type names, i.e., 
type names that are not defined in the static context. An unknown type name 
might be encountered, if a module in which the given type name occurs does not 
import the schema in which the given type name is defined. In this case, an 
implementation is allowed (but is not required) to provide an 
implementation-dependent mechanism for determining whether the unknown type name 
is the same as or derived by restriction from the expected type name. The 
following rule formalizes this implementation dependent mechanism.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD>"The implementation is able to determine that <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> is derived by restriction from <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>."</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The derivation relation is transitive.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_substitutes name=sec_substitutes></A>8.1.2 Substitutes for</H4>
<P>The substitutes judgment is used to know whether an element name is in the 
substitution group of another element name.</P>
<P><B>Notation</B></P>
<P id=jd_substitutes_for>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
for</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
size=2>1</FONT></SUB> substitutes for <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  usaddress  substitutes for  address
  nyaddress  substitutes for  usaddress
  nyaddress  substitutes for  address
</PRE></DIV>
<P><B>Note</B></P>
<P>Substitution is a partial order. It is reflexive and transitive by the 
definition below. It is asymmetric because no cycles are allowed in substitution 
groups.</P>
<P><B>Semantics</B></P>
<P>The substitutes judgment for element names is specified by the following 
rules.</P>
<P>Every element name substitutes for itself.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
      for</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Every element name substitutes for the element it is declared to substitute 
for.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  substitutes for <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>BaseElementName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
      for</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>BaseElementName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Substitution is transitive.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
      for</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
      for</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
      for</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_element_lookup name=sec_element_lookup></A>8.1.3 Element and 
attribute name lookup (Dynamic)</H4>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
lookup</B></A> judgment is used in the definition of the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
judgment, which takes a value and a type and determines whether the value 
matches, or is an instance of, the given type. Both <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
lookup</B></A> and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
are used in the dynamic semantics.</P>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
lookup</B></A> judgment takes an element(attribute) name (derived from a node 
value) and an element(attribute) type and if the element(attribute) name matches 
the corresponding name in the element(attribute) type, the judgment yields the 
type's corresponding type reference and for elements, its nillable property.</P>
<P><B>Notation</B></P>
<P id=jd_lookup>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
lookup</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></DIV>
<P>holds when the given element name matches the given element type and requires 
that the element be nillable as indicated and have the given type reference.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  comment    name lookup element comment                          yields of type xsd:string
  size       name lookup element size nillable of type xs:integer yields nillable of type xsd:string
  apt        name lookup element apt                              yields of type fs:anon3
  nycaddress name lookup element address                          yields of type NYCAddress
</PRE></DIV>
<P>Note that when the element name is in a substitution group, the name lookup 
returns the type name corresponding to the original element name (here the type 
<CODE>NYCAddress</CODE> for the element <CODE>nycaddress</CODE>, instead of 
<CODE>Address</CODE> for the element <CODE>address</CODE>).</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the element type is a reference to a global element, then name lookup 
yields the type reference in the element declaration for the given element name. 
The given element name must be in the substitution group of the global 
element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
                  for</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
      lookup</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the given element name matches the element name in the element type, and 
the element type contains a type reference, then name lookup yields that type 
reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
      lookup</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the element type has no element name but contains a type reference, then 
name lookup yields the type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
      lookup</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the element type has no element name and no type reference, then name 
lookup yields <CODE>xs:anyType</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
      lookup</B></A> element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
      of type <CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P id=jd_attribute_lookup>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
lookup</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></DIV>
<P>holds when matching an attribute with the given attribute name against the 
given attribute type matches the type reference.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  orderDate  name lookup  attribute orderDate of type xsd:date  yields  of type xsd:date?
  orderDate  name lookup  attribute of type xsd:date            yields  of type xsd:date?
</PRE></DIV>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the attribute type is a reference to a global attribute, then name lookup 
yields the type reference in the attribute declaration for the given attribute 
name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
      lookup</B></A> attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the given attribute name matches the attribute name in the attribute type, 
and the attribute type contains a type reference, then name lookup yields that 
type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
      lookup</B></A> attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the attribute type has no attribute name but contains a type reference, 
then name lookup yields the type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
      lookup</B></A> attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the attribute type has no attribute name and no type reference, then name 
lookup yields <CODE>xs:anySimpleType</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
      lookup</B></A> attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
      of type <CODE>xs:anySimpleType</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=jd_aux_static_lookup name=jd_aux_static_lookup></A>8.1.4 Element and 
attribute type lookup (Static)</H4>
<P>The type lookup judgments are used to obtain the appropriate type reference 
for an attribute or element.</P>
<P><B>Notation</B></P>
<P id=jd_static_lookup>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
lookup</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></DIV>
<P>holds when the element type is optionally nillable and has the given type 
reference.</P>
<P><B>Semantics</B></P>
<P>The element type lookup judgments are specified by the following rules.</P>
<P>A reference to a global element yields the type reference in the global 
element declaration with the given element name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of a local element type, type lookup yields the corresponding 
type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the element type has no element name but contains a type reference, then 
type lookup yields that type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the element type has no element name and no type reference, then lookup 
yields <CODE>xs:anyType</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
      lookup</B></A> of type 
<CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Notation</B></P>
<P id=jd_attribute_static_lookup>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
lookup</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></DIV>
<P>holds when the attribute type has the given type reference.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>A reference to a global attribute yields the type reference in the global 
attribute declaration with the given attribute name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the attribute name is not defined, i.e., it is not declared in the 
in-scope schema definitions, then the attribute's default type is <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_attr_decl">attrDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  undefined</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
      lookup</B></A> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of a local attribute type, type lookup yields the corresponding 
type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the attribute type has no attribute name but contains a type reference, 
then type lookup yields the type reference.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
      lookup</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the attribute type has no attribute name and no type reference, then type 
lookup yields <CODE>xs:anySimpleType</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
      lookup</B></A> of type 
<CODE>xs:anySimpleType</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_extension name=sec_extension></A>8.1.5 Extension</H4>
<P><B>Notation</B></P>
<P id=jd_extended_by>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
by</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds when the result of extending <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> by <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>. 
This judgment is used in the definition of type expansion <A 
href="REC-xquery-semantics-20070123.htm#sec_type_expansion"><B>[8.1.9 
Type expansion]</B></A>, which expands a type to include the union of all types 
derived from the given type,</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> = <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> = <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A><SUB><FONT 
      size=2> 2</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
      by</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A><SUB><FONT 
      size=2> 2</FONT></SUB>) , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_mixed name=sec_mixed></A>8.1.6 Mixed content</H4>
<P><B>Notation</B></P>
<P id=jd_mixes_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_mixes_to"><B>mixes 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when the result of creating a mixed content from <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rule, which interleaves the 
element content with a sequence of text nodes and adds a union of <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
values. The <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
sequence is required because it is possible to derive an element containing only 
atomic values from an element that is mixed.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      = <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A> 
      , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_mixes_to"><B>mixes 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A> 
      , ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A> 
      &amp; text* | <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A> 
      *)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_adjustment name=sec_adjustment></A>8.1.7 Type adjustment</H4>
<P>In the [XPath/XQuery] type system, a complex-type declaration does not 
include the implicit attributes and nodes that may be included in the type. Type 
adjustment takes a complex type and adjusts it to include implicit attributes 
and nodes. In particular, type adjustment:</P>
<UL>
  <LI>
  <P>adds the four (optional) built-in attributes xsi:type, xsi:nil, 
  xsi:schemaLocation, or xsi:noNamespaceSchemaLocation,</P>
  <LI>
  <P>interleaves the type with a sequence of comments and 
  processing-instructions, and</P>
  <LI>
  <P>if the complex type is mixed, interleaves the type with a sequence of text 
  nodes and <A 
  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>.</P></LI></UL>
<P><B>Notation</B></P>
<P id=jd_adjusts_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when the second type is the same as the first after the first has been 
adjusted as described above.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the type is flagged as mixed, then mix the type and extend it by the 
built-in attributes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_mixes_to"><B>mixes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
                  by</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#sec_built_in_attributes"><CODE>BuiltInAttributes</CODE></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> &amp; 
                  <CODE>processing-instruction*</CODE> &amp; 
                  <CODE>comment*</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      mixed <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, just extend the type by the built-in attributes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
                  by</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#sec_built_in_attributes"><CODE>BuiltInAttributes</CODE></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> &amp; 
                  <CODE>processing-instruction*</CODE> &amp; 
                  <CODE>comment*</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_built_in_attributes name=sec_built_in_attributes></A>8.1.8 Builtin 
attributes</H4>
<P>Schema defines four built-in attributes that can appear on any element in the 
document without being explicitly declared in the schema. Those four attributes 
need to be added inside content models when doing matching. The four built-in 
attributes of Schema are declared as follows.</P>
<DIV class=exampleInner><PRE>  define attribute xsi:type of type xs:QName
  define attribute xsi:nil of type xs:boolean
  define attribute xsi:schemaLocation of type fs:anon
  define type fs:anon1 { xs:anyURI* }
  define attribute xsi:noNamespaceSchemaLocation of type xs:anyURI
</PRE></DIV>
<P>For convenience, a type that is an all group of the four built-in XML Schema 
attributes is defined.</P>
<DIV class=exampleInner><PRE>  BuiltInAttributes =
      attribute xsi:type ?
    &amp; attribute xsi:nil ?
    &amp; attribute xsi:schemaLocation ?
    &amp; attribute xsi:noNamespaceSchemaLocation ?
</PRE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_type_expansion name=sec_type_expansion></A>8.1.9 Type 
expansion</H4>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A> judgment is one of the most important static judgments. It is used in 
the static semantics of the child axis <A 
href="REC-xquery-semantics-20070123.htm#sec_static_axis_judge"><B>[8.2.2.1 
Static semantics of axes]</B></A>, which is used in the definition of many other 
rules that extract element types from an arbitrary content type.</P>
<P>The judgment takes a type name and computes the union of all types derived 
from the given type. If the type is nillable, it also makes sure the content 
model allows the empty sequence. If the type is mixed, it also adjusts the type 
to include the mixed content model. The judgment depends on the <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
with union interpretation of</B></A> judgment to recursively compute all derived 
types.</P>
<P><B>Notation</B></P>
<P id=jd_expands_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds when expanding the type specifier results in the given type.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the type is nillable, then it expands into an optional type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      nillable <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>The type definition for the type reference is contained in its expansion.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  extends <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
                  with union interpretation of</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case the type is <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A>, 
the type does not need to be adjusted as is required for other XML Schema types. 
See the corresponding definition in <A 
href="REC-xquery-semantics-20070123.htm#id-predefined-types"><B>[3.5.1 
Predefined Schema Types]</B></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
                  extends <CODE>xs:anyType</CODE> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> 
    }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_union_interpretation name=sec_union_interpretation></A>8.1.10 
Union interpretation of derived types</H4>
<P><B>Notation</B></P>
<P id=jd_union_interpretation>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
with union interpretation of</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></DIV>
<P>holds when the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> is the expansion of the type name <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
with definition <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> to include all types derived by extension and restriction 
from the given type name. This rule is recursive, because each type name itself 
may have other type names that are derived from it. The recursive rules traverse 
the entire derivation tree, identifying every type name derived from the 
original type name.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>No type derives from <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB></EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
      with union interpretation of</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>0</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB>) = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB> restricts <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB>) = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB> restricts <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
                  with union interpretation of</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
                  with union interpretation of</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB>) = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB> extends <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB>) = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB> extends <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB> }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
                  with union interpretation of</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
                  with union interpretation of</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,1</FONT></SUB>' | · · · | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>R,n</FONT></SUB>' | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB> | (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,1</FONT></SUB>' ) | · · · | (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>0</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>E,m</FONT></SUB>')</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>0</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
      with union interpretation of</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A><SUB><FONT 
      size=2>0</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Examples</B></P>
<P>Note that this expansion does not enforce the <B>unique particule 
attribution</B> property specified by XML Schema in the resulting content 
models. Implementations may want to implement an equivalent alternative 
expansion that enforces that property. For example, expanding type 
<CODE>T1</CODE> below yields the following type that is not 
one-deterministic:</P>
<DIV class=exampleInner><PRE>define type T1 { element a }
define type T2 extends T1 { element b }

(element a | element a, element b) is (element a) extended with union interpretation of T1
</PRE></DIV>
<P>An implementation might want to infer the equivalent content model that 
verifies the <B>unique particule attribution</B> property of XML Schema:</P>
<DIV class=exampleInner><PRE>(element a, (() | element b)) is (element a) extended with union interpretation of T1
</PRE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_auxiliary_xpath name=sec_auxiliary_xpath></A>8.2 Judgments for 
step expressions and filtering</H3>
<P><B>Introduction</B></P>
<P>Step expressions are one of the elementary operations in [XPath/XQuery]. 
Steps select nodes reachable from the root of an XML tree. Defining the 
semantics of step expressions requires a detailed analysis of all the possible 
cases of axis and node tests.</P>
<P>This section introduces auxiliary judgments used to define the semantics of 
step expressions. The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
principal</B></A> judgment (<A 
href="REC-xquery-semantics-20070123.htm#sec_jd_principal"><B>[8.2.1 
Principal Node Kind]</B></A>) captures the notion of <EM>principal node 
kind</EM> in XPath. The Axis judgments (<A 
href="REC-xquery-semantics-20070123.htm#sec_axis_judge"><B>[8.2.2 
Auxiliary judgments for axes]</B></A>) define the static and dynamic semantics 
of all axes, and the Node Test judgments (<A 
href="REC-xquery-semantics-20070123.htm#sec_test_judge"><B>[8.2.3 
Auxiliary judgments for node tests]</B></A>) define the static and dynamic 
semantics of all node tests. The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
judgment accesses the value of an attribute and is used in the definition of 
validation (<A 
href="REC-xquery-semantics-20070123.htm#sec_validation_judgments"><B>[F 
Auxiliary Judgments for Validation]</B></A>).</P>
<DIV class=div3>
<H4><A id=sec_jd_principal name=sec_jd_principal></A>8.2.1 Principal Node 
Kind</H4>
<P><B>Notation</B></P>
<P>The following auxiliary grammar production describes principal node kinds 
(See <A 
href="REC-xquery-semantics-20070123.htm#xpath20">[XML 
Path Language (XPath) 2.0]</A>).</P>
<H5><A id=N216D6 name=N216D6></A>PrincipalNodeKind</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-PrincipalNodeKind 
      name=doc-fs-PrincipalNodeKind></A>[<SMALL>64&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>PrincipalNodeKind</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" | "attribute" | "namespace"</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_principal>The judgment</P>
<DIV align=center><EM>Axis</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
principal</B></A> <EM>PrincipalNodeKind</EM></DIV>
<P>holds when <EM>PrincipalNodeKind</EM> is the principal node kind for 
<EM>Axis</EM>.</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold.</P>
<DIV class=exampleInner><PRE>  child::       principal  element
  descendant::  principal  element
  preceding::   principal  element
  attribute::   principal  attribute
  namespace::   principal  namespace
</PRE></DIV>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The principal node type for the attribute axis is attribute.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
      principal</B></A> attribute</TD></TR></TBODY></TABLE><BR></DIV>
<P>The principal node type for the namespace axis is namespace.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><CODE>namespace::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
      principal</B></A> namespace</TD></TR></TBODY></TABLE><BR></DIV>
<P>The principal node type for all other axis is element.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><EM>Axis</EM> != <CODE>attribute::</CODE>&nbsp;&nbsp;&nbsp;&nbsp; 
      <EM>Axis</EM> != <CODE>namespace::</CODE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
      principal</B></A> element</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_axis_judge name=sec_axis_judge></A>8.2.2 Auxiliary judgments for 
axes</H4>
<DIV class=div4>
<H5><A id=sec_static_axis_judge name=sec_static_axis_judge></A>8.2.2.1 Static 
semantics of axes</H5>
<P><B>Notation</B></P>
<P id=jd_axis_type>The following judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
<EM>Axis</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when applying the axis <EM>Axis</EM> on type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> yields the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P id=jd_has_element_content>The following two judgments are used in the 
definition of <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A>. 
The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
node content</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>only applies to a type that is a valid element content type and holds when <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> has the content type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. The judgment separates the attribute types from the other 
node or atomic-valued types of the element content type and yields the 
non-attribute types.</P>
<P id=jd_has_attribute_content>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
attribute content</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>only applies to a type that is a valid element content type and holds when <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> has attribute types <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>. The judgment yields the attribute types of the element 
content type.</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold.</P>
<DIV class=exampleInner><PRE>  axis child::      of  element of type xs:string   :  text
  axis child::      of  element items of type Items :  element item of type fs:anon1*

  axis child::      of  element purchaseOrder       : 
    element shipTo of type USAddress,
    element billTo of type USAddress,
    element ipo:comment?,
    element items of type Items

  axis attribute::  of  element of type xs:string   :  empty

    attribute partNum of type SKU,
    element item of type fs:anon1*
  has-node-content
    element item of type fs:anon1*

    attribute partNum of type SKU,
    element item of type fs:anon1*
  has-attribute-content
    attribute partNum of type SKU

    (attribute partNum of type SKU,
     element item of type fs:anon1*) |
    (attribute orderDate of type xs:date?,
     element shipTo of type USAddress,
     element billTo of type USAddress,
     element comment?,
     element items of type Items)
  has-node-content
    (element item of type fs:anon1*) |
    (element shipTo of type USAddress,
     element billTo of type USAddress,
     element comment?,
     element items of type Items)

    (attribute partNum of type SKU,
     element item of type fs:anon1*) |
    (attribute orderDate of type xs:date?,
     element shipTo of type USAddress,
     element billTo of type USAddress,
     element comment?,
     element items of type Items)
  has-attribute-content
    (attribute partNum of type SKU) |
    (attribute orderDate of type xs:date?)
</PRE></DIV>
<DIV class=div5>
<H6><A id=sec_inference_axis name=sec_inference_axis></A>8.2.2.1.1 Inference 
rules for all axes</H6>
<P><B>Semantics</B></P>
<P>The following rules compute the type of the axis expression when applied to 
each item type in the content model.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <EM>OccurrenceIndicator</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> 
<EM>OccurrenceIndicator</EM></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>&amp;<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>&amp;<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>&nbsp;&nbsp;</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      none <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      none</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>&nbsp;&nbsp;</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <CODE>empty</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>The rules in the following subsections specify how to compute the type of 
each axis applied to an item type.</P></DIV>
<DIV class=div5>
<H6><A id=sec_inference_self name=sec_inference_self></A>8.2.2.1.2 Inference 
rules for the <CODE>self</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>Applying the self axis to a node type results in the same node type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_child name=sec_inference_child></A>8.2.2.1.3 Inference 
rules for the <CODE>child</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>In the case of an element type, the static type of the child axis is obtained 
by type lookup and expansion of the resulting type. Note that the <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A> judgment yields the type that corresponds to a given type name. 
Because the meaning of a type name includes the definitions of <EM>all</EM> type 
names derived by extension and restriction from the given type name, <A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A> yields the <EM>union</EM> of all the type definitions of all type 
names derived from the input type name. Each type in the union contains the 
complete definition of the type name, i.e., it includes built-in attributes and, 
if necessary, processing-instruction, comment, and text types.</P>
<P>After type expansion, the judgment <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
node content</B></A> is applied to each type in the union. The resulting type is 
the union of all non-attribute types in the expanded type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> | · · · | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
                  node content</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
                  node content</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>' | ... | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type is a sequence of attributes, then the content type is 
<CODE>empty</CODE>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
      node content</B></A> <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type is attributes followed by a simple type, the content type is 
zero-or-one text nodes. The resulting type is optional since an expression 
returning the empty sequence results in no text node being constructed.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute*</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
      node content</B></A> text?</TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of an element type with complex content type, the content type is 
simply the non-attribute part of the complex content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute*</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
      node content</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of an attribute type, the static type of the child axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of a text node type, the static type of the child axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      text <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of a comment node type, the static type of the child axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      comment <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of a processing-instruction node type, the static type of the 
child axis is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      processing-instruction <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a document node type, the static type of the child axis is the 
type of the document node content, interleaved with a sequence of comments and 
processing-instructions.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      &amp; processing-instruction* &amp; 
comment*</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_attribute name=sec_inference_attribute></A>8.2.2.1.4 
Inference rules for the <CODE>attribute</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The static type for the attribute axis is computed in a similar way as the 
static type for the child axis. As above, the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
to</B></A> judgment may yield a union type. After type expansion, the judgment 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
attribute content</B></A> is applied to each type in the union.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> | · · · | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
                  attribute content</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>· · ·</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
                  attribute content</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>' | ... | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>When applied to an element type, <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
attribute content</B></A> yields the type of the element's content that are 
attributes.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  = (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute*</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A>* 
                  | <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A>*</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
      attribute content</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of an attribute type, the static type of the attribute axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a text node type, the static type of the attribute axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      text <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a comment node type, the static type of the attribute axis is 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      comment <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a processing-instruction node type, the static type of the 
attribute axis is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      processing-instruction <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a document node type, the static type of the attribute axis is the 
empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_parent name=sec_inference_parent></A>8.2.2.1.5 Inference 
rules for the <CODE>parent</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The type for the parent of an element type, a text node type, a PI node type, 
or a comment node type is either an element, a document, or empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (element | document)?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      text <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (element | document)?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      processing-instruction <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (element | document)?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      comment <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (element | document)?</TD></TR></TBODY></TABLE><BR></DIV>
<P>The type for the parent of an attribute node is an element or empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      element?</TD></TR></TBODY></TABLE><BR></DIV>
<P>The type for the parent of a document node type is always empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_namespace name=sec_inference_namespace></A>8.2.2.1.6 
Inference rules for the <CODE>namespace</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The type for the namespace axis is always empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>namespace::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_descendant name=sec_inference_descendant></A>8.2.2.1.7 
Inference rules for the <CODE>descendant</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The types for the descendant axis is obtained as the closure of the type of 
the child axis. This is expressed by the following inference rule.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>child::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>child::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>child::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n+1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n+1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) | ... | <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>descendant::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (<A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | ... | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>))*</TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>Note that the last premise in the above rule terminates the recursion. The 
rule computes the n-th type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>n</FONT></SUB> such that applying the child axis one more time does not 
add any new item type to the union. This condition is guaranteed to hold at some 
point, because the number of item types is bounded by all of the item types 
defined in the in-scope schema definitions.</P></DIV>
<DIV class=div5>
<H6><A id=sec_inference_descendant_of_self 
name=sec_inference_descendant_of_self></A>8.2.2.1.8 Inference rules for the 
<CODE>descendant-or-self</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The type for the descendant-or-self axis is the union of the type for the 
self axis and for the descendant axis.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>descendant::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>descendant-or-self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (<A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>))*</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_ancestor name=sec_inference_ancestor></A>8.2.2.1.9 
Inference rules for the <CODE>ancestor</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The type for the ancestor axis is computed similarly as for the descendant 
axis.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>ancestor::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (element | document)*</TD></TR></TBODY></TABLE><BR></DIV>
<P>Note that this rule will always result in the type <CODE>(element | 
document)*</CODE> type, but this formulation is preferred for consistency, and 
in case the static typing for the parent axis gets improved in a future 
version.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>parent::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>parent::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>parent::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n+1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n+1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) | ... | <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>ancestor::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (<A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | ... | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>))*</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_inference_ancestor_of_self 
name=sec_inference_ancestor_of_self></A>8.2.2.1.10 Inference rules for the 
<CODE>ancestor-or-self</CODE> axis</H6>
<P><B>Semantics</B></P>
<P>The type for the ancestor-or-self axis is the union of the type for the self 
axis and for the ancestor axis.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
                  <CODE>ancestor::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
      <CODE>ancestor-or-self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
      (<A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>))*</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_dyn_axes name=sec_dyn_axes></A>8.2.2.2 Dynamic semantics of 
axes</H5>
<P><B>Notation</B></P>
<P id=jd_axis>The following judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
<EM>Axis</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when applying the axis <EM>Axis</EM> on <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> yields <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>:</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold.</P>
<DIV class=exampleInner><PRE>  axis child::      of    element sizes { text { "1 2 3" } }  =&gt;  text { "1 2 3" }

  axis attribute::  of
     element weight of type xs:integer {
       attribute xsi:type of type xs:QName {
         "xs:integer" of type xs:QName
       },
       42 of type xs:integer
     }
  =&gt; attribute xsi:type of type xs:QName {
       "xs:integer" of type xs:QName
     }

  
</PRE></DIV>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The first set of rules are used to process the axis judgment on each 
individual item in the input sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <EM>Axis</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <EM>Axis</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The following rules specifies how the value filter judgment is applied on 
each Axis.</P>
<P>The self axis just returns the context node.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The child, parent, attribute and namespace axis are specified as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>child::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>attribute::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>parent::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <EM>dm:</EM>parent(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>The descendant, descendant-or-self, ancestor, and ancestor-or-self axis are 
implemented through recursive application of the children and parent 
filters.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>child::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>descendant::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>descendant::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>self::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>descendant::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>descendant-or-self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>parent::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>ancestor::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>ancestor::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>self::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  <CODE>ancestor::</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
      <CODE>ancestor-or-self::</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>In all the other cases, the axis application results in an empty sequence, 
and the following judgment holds.</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
<EM>Axis</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
()</DIV></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_test_judge name=sec_test_judge></A>8.2.3 Auxiliary judgments for 
node tests</H4>
<P>A node test may be a name test or a kind test. In the static and dynamic 
semantics, we begin with name tests, followed by kind tests.</P>
<DIV class=div4>
<H5><A id=sec_sem_node_tests name=sec_sem_node_tests></A>8.2.3.1 Static 
semantics of node tests</H5>
<P><B>Notation</B></P>
<P id=jd_test_type>The following judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
<EM>NodeTest</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
<EM>PrincipalNodeKind</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when applying the node test <EM>NodeTest</EM> on the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> in the context of the given principal node kind, yields 
the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  test shipTo with element of
    element shipTo of type USAddress,
    element billTo of type USAddress,
    element ipo:comment?,
    element items of type Items
  : element shipTo of type USAddress
</PRE></DIV>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The first set of rules is similar to that for axes, and are used to process 
the content each individual item type in the input content model.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <EM>OccurrenceIndicator</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> 
<EM>OccurrenceIndicator</EM></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>&nbsp;&nbsp;</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      none <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      none</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>&nbsp;&nbsp;</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      empty <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P>The following rules specify how the test judgment apply to node tests in the 
context of a principal node kind. We start with name tests followed by kind 
tests.</P>
<DIV class=div5>
<H6><A id=sec_sem_name_tests name=sec_sem_name_tests></A>8.2.3.1.1 Name 
Tests</H6>
<P>Name tests on elements and attributes always compute the most specific type 
possible. For example, if <CODE>$v</CODE> is bound to an element with a computed 
name, the type of <CODE>$v</CODE> is <CODE>element</CODE>. The static type 
computed for the expression <CODE>$v/self::foo</CODE> is <CODE>element foo of 
type xs:anyType</CODE>, which makes use of <CODE>foo</CODE> in the name test to 
compute a more specific type. Also note that each case of name matching 
restricts the principal node kind appropriately.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <CODE>*</CODE> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>Prefix</EM><SUB><FONT 
                  size=2>1</FONT></SUB>) = (<A 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:namespace-uri-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> = 
                  <CODE>fn:local-name-from-QName</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> 
    )</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element * <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>Prefix</EM><SUB><FONT 
                  size=2>1</FONT></SUB>) = (<A 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:namespace-uri-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = 
        <EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB>:* <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB><CODE>:*</CODE> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element * <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB><CODE>:*</CODE> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <EM>QName</EM> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <EM>QName</EM> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier"><EM>OptTypeSpecifier</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Similar static typing rules apply to the attribute name tests:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <CODE>*</CODE> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
                  attr expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:local-name-from-QName</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ) = <EM>LocalPart</EM><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT size=2>2</FONT></SUB> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute * <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <CODE>*:</CODE><EM>LocalPart</EM><SUB><FONT 
      size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>Prefix</EM><SUB><FONT 
                  size=2>2</FONT></SUB>) = (<A 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:namespace-uri-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = 
        <EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB><CODE>:*</CODE> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB><CODE>:*</CODE> <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute * <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>Prefix</EM><SUB><FONT size=2>2</FONT></SUB><CODE>:*</CODE> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>*</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <EM>QName</EM> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <EM>QName</EM> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference"><EM>OptTypeReference</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>Lastly, if none of the above rules holds, then the type of the input 
expression is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> = <EM>NameTest</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = of type <CODE>xs:anyType</CODE></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(element 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(element 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NameTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
      <FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_sem_kind_tests name=sec_sem_kind_tests></A>8.2.3.1.2 Kind 
Tests</H6>
<P>All the rules for typing the document, element, and attribute kind tests are 
similar. First, the document, element, or attribute test is normalized to the 
equivalent document, element, or attribute type by applying the <FONT 
size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
size=2>sequencetype</FONT></SUB></A> normalization rule to the kind test.</P>
<P>After normalization of the kind test as an XQuery type, that type is compared 
to the expression's inferred type. If the latter is a subtype of the former 
other, then the kind test yields the smaller type.</P>
<P><B><EM>Document kind test</EM></B></P>
<P><B>Semantics</B></P>
<P>If the type of the expression is a subtype of the document kind test, then we 
are guaranteed that during evaluation, the expression's value will always match 
the document kind test, and therefore the type of the entire expression is the 
type of the input expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>DocumentTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>DocumentTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Conversely, if the type of the document kind test is a subtype of the 
expression, then during evaluation, the expression's value may or may not match 
the document kind test, and therefore the type of the entire expression is 
zero-or-one of the type of the document kind test.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>DocumentTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>DocumentTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the types of the expression and document kind test are unrelated, then we 
apply the kind test rule recursively on the element types, which may yield a 
non-empty type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT>document-node 
                  (<EM>ElementTest</EM>)<FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>ElementTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  element <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <CODE>empty</CODE>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      document-node (<EM>ElementTest</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV>
<P>If there is no non-empty type, then the kind test yields the empty type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT>document-node 
                  (<EM>ElementTest</EM>)<FONT size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
                  <EM>ElementTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
                  element <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <CODE>empty</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      document-node (<EM>ElementTest</EM>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Element kind test</EM></B></P>
<P><B>Semantics</B></P>
<P>The rules for the element kind test are similar to those for the document 
kind test.</P>
<P>If the type of the expression is a subtype of the element kind test, then we 
are guaranteed that during evaluation, the expression's element value will 
always match the element kind test, and therefore the type of the entire 
expression is the type of the input expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Conversely, if the type of the element kind test is a subtype of the 
expression, then during evaluation, the expression's element value may or may 
not match the element kind test, and therefore the type of the entire expression 
is zero-or-one of the type of the element kind test.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the types of the expression and element kind test are unrelated (i.e., 
neither type is a subtype of the other), then we must compare the structure of 
the type of the element test with the type of the element expression, as an 
element type or test may contain wildcards.</P>
<P>In the first case, the element kind test contains an element name and a type 
name and the input expression's type contains only a type name. If the input 
expression's content type is a subtype of the element kind test's content type, 
then the type of the entire expression is zero-or-one of an element with the 
given name and the input expression's content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>In the second case, the structure of the input types is reversed: The input 
expression's type contains an element name and a type name and the element kind 
test's type contains only a type name. If the element kind test's content type 
is a subtype of the input expression's content type, then the type of the entire 
expression is zero-or-one of an element with the given name and the element kind 
test's content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>Lastly, if none of the above rules holds, then the type of the input 
expression is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(element 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(element 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
                  <FONT size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A><SUB> 
      <FONT size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Attribute kind test</EM></B></P>
<P><B>Semantics</B></P>
<P>The rules for the attribute kind test are isomorphic to those for element 
kind test.</P>
<P>If the type of the expression is a subtype of the attribute kind test, then 
we are guaranteed that during evaluation, the expression's attribute value will 
always match the attribute kind test, and therefore the type of the entire 
expression is the type of the input expression.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Conversely, if the type of the attribute kind test is a subtype of the 
expression, then during evaluation, the expression's attribute value may or may 
not match the attribute kind test, and therefore the type of the entire 
expression is zero-or-one of the type of the attribute kind test.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the types of the expression and attribute kind test are unrelated (i.e., 
neither type is a subtype of the other), then we must compare the structure of 
the type of the attribute test with the type of the attribute expression, as an 
attribute type or test may contain wildcards.</P>
<P>In the first case, the attribute kind test contains an attribute name and a 
type name and the input expression's type contains only a type name. If the 
input expression's content type is a subtype of the attribute kind test's 
content type, then the type of the entire expression is zero-or-one of an 
attribute with the given name and the input expression's content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>In the second case, the structure of the input types is reversed: The input 
expression's type contains an attribute name and a type name and the attribute 
kind test's type contains only a type name. If the attribute kind test's content 
type is a subtype of the input expression's content type, then the type of the 
entire expression is zero-or-one of an attribute with the given name and the 
attribute kind test's content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>Lastly, if none of the above rules holds, then the type of the input 
expression is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(attribute 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2> 2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(attribute 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2> 2</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  attribute <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard"><EM>AttributeName</EM></A><SUB><FONT 
      size=2> 2</FONT></SUB> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Processing instruction, comment, and text kind tests</EM></B></P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>processing-instruction()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      processing-instruction <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      processing-instruction</TD></TR></TBODY></TABLE><BR></DIV>
<P>A processing-instruction node test with a string literal or NCName matches a 
processing instruction whose target has the given name. Since target matching 
cannot be checked statically, the static type of the node test is zero-or-one 
processing instruction.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>processing-instruction(</CODE><EM>StringLiteral</EM> | 
      <EM>NCName</EM><CODE>)</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      processing-instruction <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      processing-instruction?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>comment()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      comment <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      comment</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>text()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      text <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      text</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <CODE>node()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If none of the above rules applies then the node test returns the empty 
sequence, and the following dynamic rule is applied:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Otherwise</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType"><EM>NodeType</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_dyn_node_tests name=sec_dyn_node_tests></A>8.2.3.2 Dynamic 
semantics of node tests</H5>
<P><B>Notation</B></P>
<P id=jd_test>The following judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
<EM>NodeTest</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
<EM>PrincipalNodeKind</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when applying the node test <EM>NodeTest</EM> on <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> in the context of the <EM>PrincipalNodeKind</EM> yields <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>:</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold.</P>
<DIV class=exampleInner><PRE>  test node()  with element  of    text { "1 2 3" }  =&gt; text { "1 2 3" }
  test size    with element  of    text { "1 2 3" }  =&gt; ()

  test foo:*   with element  of
     (element foo:a of type xs:int { 1 },
      element foo:a of type xs:int { 2 },
      element bar:b of type xs:int { 3 },
      element bar:c of type xs:int { 4 },
      element foo:d of type xs:int { 5 })
  =&gt; (element foo:a of type xs:int { 1 },
      element foo:a of type xs:int { 2 },
      (),
      (),
      element foo:d of type xs:int { 5 })
</PRE></DIV>
<P><B>Note</B></P>
<P>The last example illustrates how a test judgment operates on a sequence of 
nodes, applying the test on each node in the sequence individually, while 
preserving the structure of the sequence.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The first set of rules are similar to those for axes, and are used to process 
the test judgment on each individual item in the input sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
                  <EM>NodeTest</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
                  <EM>PrincipalNodeKind</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>4</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>4</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV class=div5>
<H6><A id=sec_dyn_sem_name_tests name=sec_dyn_sem_name_tests></A>8.2.3.2.1 Name 
Tests</H6>
<P>The following rules specify how the value filter judgment is applied on a 
name test in the context of a principal node kind.</P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <EM>PrincipalNodeKind</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:node-name</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>Prefix</EM>) 
                  = (<A 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:namespace-uri-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = <EM>AnyURI</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:local-name-from-QName</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  ) = 
    <EM>LocalPart</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>Prefix</EM>:<EM>LocalPart</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = 
        <EM>PrincipalNodeKind</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>*</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <EM>PrincipalNodeKind</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:node-name</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env">namespace</A>(<EM>Prefix</EM>) 
                  = (<A 
                  href="REC-xquery-semantics-20070123.htm#xq_ns_env"><EM>NamespaceKind</EM></A>,<EM>AnyURI</EM>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:namespace-uri-from-QName</CODE>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = 
<EM>AnyURI</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>Prefix</EM><CODE>:*</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE>( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <EM>PrincipalNodeKind</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:node-name</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:local-name-from-QName</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  ) = 
    <EM>LocalPart</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>*:</CODE><EM>LocalPart</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div5>
<H6><A id=sec_dyn_kind_tests name=sec_dyn_kind_tests></A>8.2.3.2.2 Kind 
Tests</H6>
<P>All the rules for evaluating the document, element, and attribute kind tests 
are similar. First, the document, element, or attribute test is normalized to 
the equivalent document, element, or attribute type by applying the <FONT 
size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
size=2>sequencetype</FONT></SUB></A> normalization rule. As explained in <A 
href="REC-xquery-semantics-20070123.htm#id-sequencetype"><B>[3.5.3 
SequenceType Syntax]</B></A>, SequenceTypes are normalized to XQuery types 
whenever a dynamic evaluation or static typing rule requires the corresponding 
type. The reason for this deviation from the processing model is that the result 
of SequenceType normalization is not part of the [XPath/XQuery] core syntax.</P>
<P>After normalization of the SequenceType to an XQuery type, the document, 
element, or attribute value is simply matched against the XQuery type. If the 
value matches the type, then the judgment yields the value, otherwise the 
judgment yields the empty sequence.</P>
<P><B><EM>Document kind test</EM></B></P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>DocumentTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>DocumentTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>DocumentTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType"><EM>DocumentType</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>DocumentTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue"><EM>DocumentValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Element kind test</EM></B></P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>ElementTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>ElementTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      element <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue"><EM>ElementValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Attribute kind test</EM></B></P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><FONT size=6>[</FONT><EM>AttributeTest</EM><FONT 
                  size=6>]</FONT><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_map_sequencetype"><SUB><FONT 
                  size=2>sequencetype</FONT></SUB></A> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A>)</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>AttributeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      attribute <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue"><EM>AttributeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P><B><EM>Processing instruction, comment, and text kind tests</EM></B></P>
<P><B>Semantics</B></P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = 
      "processing-instruction"</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>processing-instruction()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = "processing-instruction"</TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:node-name</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>StringLiteral</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
                  atomic value</B></A> <EM>String</EM></TD></TR>
              <TR vAlign=center align=middle>
                <TD><CODE>fn:local-name-from-QName</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  ) = 
  <EM>String</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>processing-instruction(</CODE> <EM>StringLiteral</EM> <CODE>)</CODE> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>dm:</EM><CODE>node-kind</CODE> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = 
      "processing-instruction")</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>processing-instruction()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = "comment"</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>comment()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>dm:</EM><CODE>node-kind</CODE> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = "comment")</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>comment()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>dm:</EM><CODE>node-kind</CODE> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = "text"</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>text()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<EM>dm:</EM><CODE>node-kind</CODE> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
                  ) = "text")</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>text()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P>The <CODE>node()</CODE> node test is true for all nodes. Therefore, the 
following rule does not have any precondition (remember that an empty upper part 
in the rule indicates that the rule is always true).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <CODE>node()</CODE> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If none of the above rules applies then the node test returns the empty 
sequence, and the following dynamic rule is applied:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><EM>Otherwise</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
      <EM>NodeTest</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
      <EM>PrincipalNodeKind</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue"><EM>NodeValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_type_matching name=sec_type_matching></A>8.3 Judgments for type 
matching</H3>
<P><B>Introduction</B></P>
<P>XQuery supports type declarations on variable bindings, and several 
operations on types (<CODE>typeswitch</CODE>, <CODE>instance of</CODE>, etc). 
This section describes judgments used for the specification of the semantics of 
those operations.</P>
<UL>
  <LI>
  <P>The "match" judgment specifies formally type matching. It takes as input a 
  value and a type and either succeeds or fails. It is used in matching 
  parameters against function signatures, type declarations, and matching values 
  against cases in "typeswitch". An informal description of type matching is 
  given in <A 
  href="http://www.w3.org/TR/xquery#id-sequencetype-matching">Section 2.5.4 
  SequenceType Matching</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
  <LI>
  <P>The "subtyping" judgment takes two types and succeeds if all values 
  matching the first type also match the second. It is used to define the static 
  semantics of operations using type matching.</P></LI></UL>
<DIV class=div3>
<H4><A id=sec_matches name=sec_matches></A>8.3.1 Matches</H4>
<P><B>Notation</B></P>
<P id=jd_matches>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds when the given value matches the given type.</P>
<P><B>Example</B></P>
<P>For example, assuming the extended XML Schema given in section <A 
href="REC-xquery-semantics-20070123.htm#sec_types_example"><B>[2.4.5 
Example of a complete Schema]</B></A>, then the following judgments hold.</P>
<DIV class=exampleInner><PRE>  element comment of type xsd:string { "This is not important" }
    matches
  element comment of type xsd:string

  (element apt of type fs:anon3 { 2510 },
   element apt of type fs:anon3 { 2511 })
    matches
  element apt+

  ()
    matches
  element usaddress?

  element usaddress of type USAddress {
    element name of type xsd:string { "The Archive" },
    element street of type xsd:string { "Christopher Street" },
    element city of type xsd:string { "New York" },
    element state of type xsd:string { "NY" },
    element zip of type xsd:decimal { 10210 }
  }
    matches
  element usaddress?
</PRE></DIV>
<P><B>Semantics</B></P>
<P>We start by giving the inference rules for matching an item value with an 
item type.</P>
<P>An atomic value matches an atomic type if its <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> derives from the atomic type. The 
value itself is ignored -- this is checked as part of validation.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName"><EM>AtomicTypeName</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
      from</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName"><EM>AtomicTypeName</EM></A><SUB><FONT 
      size=2> 2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent"><EM>AtomicValueContent</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName"><EM>AtomicTypeName</EM></A><SUB><FONT 
      size=2> 1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName"><EM>AtomicTypeName</EM></A><SUB><FONT 
      size=2> 2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>A text node matches text.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      text { <EM>String</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      text</TD></TR></TBODY></TABLE><BR></DIV>
<P>A comment node matches comment.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      comment { <EM>String</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      comment</TD></TR></TBODY></TABLE><BR></DIV>
<P>A processing-instruction node matches processing-instruction.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      processing-instruction <EM>NCName</EM> { <EM>String</EM> } <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      processing-instruction</TD></TR></TBODY></TABLE><BR></DIV>
<P>A document node matches a document type if the node's content matches the 
document type's corresponding content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The rules for matching an element value with an element type are more 
complicated. When an element value is not nilled, the element matches an element 
type if the element name and the element type resolve to some type name, and the 
element value's <A href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP> is derived from the resolved type 
name. Note that there is no need to check structural constraints on the value 
since those have been checked during XML Schema validation and the value is 
assumed to be consistent with its <A 
href="http://www.w3.org/TR/xquery#dt-type-annotation">type 
annotation</A><SUP><SMALL>XQ</SMALL></SUP>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
                  from</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:nil <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { (), false }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>Type matching uses the name lookup judgment defined in <A 
href="REC-xquery-semantics-20070123.htm#sec_element_lookup"><B>[8.1.3 
Element and attribute name lookup (Dynamic)]</B></A>.</P>
<P>In the case the element has been nilled, that is there exists and xsi:nil 
attribute set to true in the element value, the following rule checks that the 
type is nillable.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
                  nillable of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
                  from</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:nil <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  true</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>The rule for attributes is similar, but does not require the check for the 
xsi:nil attribute.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
                  of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
                  from</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>A type can also be a sequence of items, in that case the matching rules also 
need to check whether the constraints described by the type as a regular 
expression hold. This is specified by the following rules.</P>
<P>The empty sequence matches the empty sequence type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <CODE>empty</CODE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If two values match two types, then their sequence matches the corresponding 
sequence type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If a value matches a type, then it also matches a choice type where that type 
is one of the choices.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If two values match two types, then their interleaving matches the 
corresponding all group.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>An optional type matches a value of that type or the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      | empty)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>The following rules are used to match a value against a sequence of zero (or 
one) or more types.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>, <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>+</TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>The above definition of type matching, although complete and precise, does 
not give a simple means to <EM>compute</EM> type matching. Notably, some of the 
above rules can be non-deterministic (e.g., the rule for matching of choice or 
repetition).</P>
<P>The structural component of the [XPath/XQuery] type system can be modeled by 
regular expressions. Regular expressions can be implemented by means of finite 
state automata. Computing type matching then is equivalent to check if a given 
sequence of items is <EM>recognized</EM> by its corresponding finite state 
automata. Finite state automata and their relationships to regular expressions 
have been extensively studied and documented in computer-science literature. The 
interested reader can consult the relevant literature, for instance <A 
href="REC-xquery-semantics-20070123.htm#Languages">[Languages]</A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#TATA">[TATA]</A>.</P></DIV>
<DIV class=div3>
<H4><A id=sec_subtyping name=sec_subtyping></A>8.3.2 Subtyping (&lt;:)</H4>
<P><B>Introduction</B></P>
<P>This section defines the semantics of subtyping in [XPath/XQuery]. Subtyping 
is used during static type analysis, in typeswitch, treat and assert 
expressions, and to check the correctness of function applications.</P>
<P>Note that intuitive relationships between types. For instance, that (<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>,()) 
is equivalent to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
can be deduced using the subtyping judgment (and algorithm) described here.</P>
<P><B>Notation</B></P>
<P id=jd_subtype_of>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if the first type is a subtype of the second.</P>
<P><B>Semantics</B></P>
<P>This judgment is true if and only if, for every value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>, 
if <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> holds, then <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> also holds.</P>
<P><B>Note</B></P>
<P>It is easy to see that the subtype relation <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
is a partial order, i.e. it is <B>reflexive</B>:</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
&nbsp;&nbsp;&nbsp;&nbsp; 
<P>and it is <B>transitive</B>: if,</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; 
<P>and,</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>3</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; 
<P>then,</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>3</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; 
<P>Finally, two types are equal if each is a subtype of the other, that 
is:</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; 
<P>and,</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; 
<P>then,</P><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
<B>&nbsp;|-&nbsp;</B> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> = <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> 
<P><B>Note</B></P>
<P>The above definition, although complete and precise, does not give a simple 
means to <EM>compute</EM> subtyping. Notably the definition above refers to 
values, which are not available at static type checking time.</P>
<P>The structural component of the [XPath/XQuery] type system can be modeled by 
regular expressions. Regular expressions can be implemented by means of finite 
state automata. Computing subtyping between two types can then be done by 
computing if <EM>inclusion</EM> holds between their corresponding finite state 
automata.</P>
<P>Finite state automata and how to compute operations on those automata, such 
as inclusion, emptiness or intersection, have been extensively studied and 
documented in the literature. The interested reader can consult the relevant 
literature on tree grammars, for instance <A 
href="REC-xquery-semantics-20070123.htm#Languages">[Languages]</A>, 
or <A 
href="REC-xquery-semantics-20070123.htm#TATA">[TATA]</A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_factor name=sec_factor></A>8.4 Judgments for FLWOR and other 
expressions on sequences</H3>
<P><B>Introduction</B></P>
<P>Some [XPath/XQuery] operations work on sequences of items. For instance, 
[For/FLWOR] expressions iterate over a sequence of items and the 
<CODE>fn:unordered</CODE> function can return all items in a sequence in any 
order, etc.</P>
<P>Static typing for those operations needs to infer a type acceptable for 
<EM>all</EM> the items in the sequence. This sometimes requires approximating 
the type known for each item individually.</P>
<P><B>Example</B></P>
<P>Assume the variable <CODE>$shipTo</CODE> is bound to the shipTo element</P>
<DIV class=exampleInner><PRE>    &lt;shipTo country="US"&gt;
        &lt;name&gt;Alice Smith&lt;/name&gt;
        &lt;street&gt;123 Maple Street&lt;/street&gt;
        &lt;city&gt;Mill Valley&lt;/city&gt;
        &lt;state&gt;CA&lt;/state&gt;
        &lt;zip&gt;90952&lt;/zip&gt;
    &lt;/shipTo&gt;
</PRE></DIV>
<P>and has type</P>
<DIV class=exampleInner><PRE>   element shipTo of type USAddress
</PRE></DIV>
<P>The following query orders all children of the shipTo element by alphabetical 
order of their content.</P>
<DIV class=exampleInner><PRE>   for $x in $shipTo/*
   order by $x/text()
   return $x
</PRE></DIV>
<P>resulting in the sequence</P>
<DIV class=exampleInner><PRE>    (&lt;street&gt;123 Maple Street&lt;/street&gt;,
     &lt;zip&gt;90952&lt;/zip&gt;,
     &lt;name&gt;Alice Smith&lt;/name&gt;,
     &lt;state&gt;CA&lt;/state&gt;,
     &lt;city&gt;Mill Valley&lt;/city&gt;)
</PRE></DIV>
<P>This operation iterates over the elements in the input sequence returned by 
the expression <CODE>$shipTo/*</CODE>, whose type is the content of a type 
USAddress.</P>
<DIV class=exampleInner><PRE>    (element name of type xsd:string,
     element street of type xsd:string,
     element city of type xsd:string,
     element state of type xsd:string,
     element zip of type xsd:decimal)
</PRE></DIV>
<P>During static typing, one must give a type to the variable <CODE>$x</CODE> 
which corresponds to the type of each element in the sequence. Since each item 
is of a different type, one must find an item type which is valid for all cases 
in the sequence. This can be done by using a choice for the variable 
<CODE>$x</CODE>, as follows</P>
<DIV class=exampleInner><PRE>    (element name of type xsd:string |
     element street of type xsd:string |
     element city of type xsd:string |
     element state of type xsd:string |
     element zip of type xsd:decimal)
</PRE></DIV>
<P>This type indicates that the type of the variable can be of any of the item 
types in the input sequence.</P>
<P>The static inference also needs to approximate the number of occurrences of 
items in the sequence. In this example, there is at least one item and more than 
one, so the closest occurrence indicator is <CODE>+</CODE> for one or more 
items.</P>
<P>The static inference for this example finally results in the following 
type.</P>
<DIV class=exampleInner><PRE>    (element name of type xsd:string |
     element street of type xsd:string |
     element city of type xsd:string |
     element state of type xsd:string |
     element zip of type xsd:decimal)+
</PRE></DIV>
<P>[<A id=term-prime-type title="prime type" 
name=term-prime-type>Definition</A>: A <B>Prime types</B> is a choice of item 
types]. This section defines two functions on types that compute the prime type 
of an arbitrary type, and approximate the occurrence of items in an arbitrary 
type. These type functions are used in the static semantics of many expressions, 
including "for", "some", and "every" expressions, and many functions, including 
"fn:unordered" and "fn:distinct".</P>
<P><B>Notation</B></P>
<P>A choice of item types is called a <EM>prime type</EM>, as described by the 
following grammar production.</P>
<H5><A id=N2543A name=N2543A></A>Prime Types</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-PrimeType 
      name=doc-fs-PrimeType></A>[<SMALL>44&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>PrimeType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType">FormalItemType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrimeType">PrimeType</A> 
      "|" <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrimeType">PrimeType</A>)</CODE></TD></TR></TBODY></TABLE>
<P><B>Notation</B></P>
<P id=jd_prime>The type function <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
extracts all item types from the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>, 
and combines them into a choice.</P>
<P id=jd_quantifier>The function <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
approximates the possible number of items in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
with the occurrence indicators supported by the [XPath/XQuery] type system 
(<CODE>?, +, *</CODE>).</P>
<P>For interim results, the auxiliary occurrence indicator <CODE>1</CODE> 
denotes exactly one occurrence.</P>
<P><B>Semantics</B></P>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
function is defined by induction as follows.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <TBODY>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<CODE>empty</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>none</CODE></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<CODE>none</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><CODE>none</CODE></TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>?)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>+)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>)</TD></TR></TBODY></TABLE>
<P><B>Semantics</B></P>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A> 
function is defined by induction as follows.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <TBODY>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType"><EM>FormalItemType</EM></A>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD>1</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<CODE>empty</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD>?</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<CODE>none</CODE>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD>1</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> , <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) , <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) , <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) | <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>?)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      ?</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      *</TD></TR>
  <TR>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>+)</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      +</TD></TR></TBODY></TABLE>
<P>This definition uses the sum (<EM>OccurrenceIndicator</EM><SUB><FONT 
size=2>1</FONT></SUB> , <EM>OccurrenceIndicator</EM><SUB><FONT 
size=2>2</FONT></SUB>), the choice (<EM>OccurrenceIndicator</EM><SUB><FONT 
size=2>1</FONT></SUB> | <EM>OccurrenceIndicator</EM><SUB><FONT 
size=2>2</FONT></SUB>), and the product (<EM>OccurrenceIndicator</EM><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
<EM>OccurrenceIndicator</EM><SUB><FONT size=2>2</FONT></SUB>) of two occurrence 
indicators <EM>OccurrenceIndicator</EM><SUB><FONT size=2>1</FONT></SUB>, 
<EM>OccurrenceIndicator</EM><SUB><FONT size=2>2</FONT></SUB>, which are defined 
by the following tables.</P>
<TABLE class=figure summary="">
  <TBODY>
  <TR>
    <TD>
      <TABLE summary="" border=1>
        <TBODY>
        <TR>
          <TD>&nbsp;,&nbsp;</TD>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR></TBODY></TABLE></TD>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
    <TD>
      <TABLE summary="" border=1>
        <TBODY>
        <TR>
          <TD>&nbsp;|&nbsp;</TD>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR></TBODY></TABLE></TD>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
    <TD>
      <TABLE summary="" border=1>
        <TBODY>
        <TR>
          <TD>&nbsp;·&nbsp;</TD>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;1&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;?&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;+&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR>
        <TR>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD>
          <TD>&nbsp;*&nbsp;</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P><B>Examples</B></P>
<P>For example, here are the result of applying <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A> 
and <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A> 
on a few simple types.</P>
<DIV class=exampleInner><PRE>  prime(element a+)                         = element a
  prime(element a | empty)                  = element a
  prime(element a?,element b?)              = element a | element b
  prime(element a | element b+, element c*) = element a | element b | element c

  quantifier(element a+)                         = +
  quantifier(element a | empty)                  = ?
  quantifier(element a?,element b?)              = *
  quantifier(element a | element b+, element d*) = +
</PRE></DIV>
<P>Note that the last occurrence indicator should be '+', since the regular 
expression is such that there must be at least one element in the sequence (this 
element being an 'a' element or a 'b' element).</P>
<P><B>Note</B></P>
<P>Note that <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
· <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
is always a super type of the original type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
I.e., <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
· <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>) 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
always holds. Therefore, it is appropriate to used it as an approximation for 
the type of an expression. This property is required for the soundness of the 
static type analysis.</P>
<P><B>Semantics</B></P>
<P>Finally, a type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
and an occurrence indicator can be combined back together to yield a new type 
with the · operation, as follows.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <TBODY>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      1</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      ?</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>?</TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      +</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>+</TD></TR>
  <TR>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      *</TD>
    <TD>&nbsp;&nbsp;=&nbsp;&nbsp;</TD>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>*</TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A id=sec_promotion_judgments name=sec_promotion_judgments></A>8.5 Judgments 
for function calls</H3>
<P><B>Introduction</B></P>
<P>Function calls can perform type promotion between atomic types. This section 
introduces judgments which describe type promotion for the purpose of the 
dynamic and static semantics. These promotion rules include promoting <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
to any other type.</P>
<DIV class=div3>
<H4><A id=sec_promotion name=sec_promotion></A>8.5.1 Type promotion</H4>
<P><B>Notation</B></P>
<P id=jd_can_be_promoted_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
be promoted to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>1</FONT></SUB> can be promoted to type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold:</P>
<DIV class=exampleInner><PRE>  xs:integer  can be promoted to  xs:integer
  xs:decimal  can be promoted to  xs:float
  xs:integer  can be promoted to  xs:float
  xs:float    can be promoted to  xs:double
</PRE></DIV>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P><CODE>xs:decimal</CODE> can be promoted to <CODE>xs:float</CODE>:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <CODE>xs:decimal</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> 
            <CODE>xs:float</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><CODE>xs:float</CODE> can be promoted to <CODE>xs:double</CODE>:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <CODE>xs:float</CODE> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> 
            <CODE>xs:double</CODE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
can be promoted to any atomic type:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_anyAtomicType"><CODE>xs:anyAtomicType</CODE></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>A type can be promoted to itself or to any type of which it is a subtype:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
      <B>&nbsp;|-&nbsp;</B> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Type promotion is transitive:</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
      be promoted to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
      be promoted to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>Finally, type promotion distributes over occurrence and union 
constructors.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
      be promoted to</B></A> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_prime">prime</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) &nbsp;&nbsp;&nbsp;&nbsp; <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) &lt;= <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">quantifier</A>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>)</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
      be promoted to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
      be promoted to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> | <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>where the "&lt;=" operator for occurrence indicators denotes set inclusion of 
the subsets of the allowed occurrences.</P>
<P><B>Notation</B></P>
<P id=jd_promotes_to>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> can be promoted to the value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> against the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Example</B></P>
<P>For example, the following judgments hold</P>
<DIV class=exampleInner><PRE>  1     of type xs:integer  against  xs:integer  promotes to  1     of type xs:integer
  1     of type xs:integer  against  xs:decimal  promotes to  1     of type xs:integer
  1     of type xs:integer  against  xs:float    promotes to  1.0e0 of type xs:float
  1.0e0 of type xs:float    against  xs:double   promotes to  1.0e0 of type xs:double
</PRE></DIV>
<P>Note that type promotion changes the value, and only occurs if the input 
value does not match the target type.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the value matches the target type, then it is promoted to itself</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the value does not match the target type, but is an atomic value and it 
matches a type which can be promoted to the target type, then the value is cast 
to the target type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> != <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>cast 
                  value to type</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_validation_mode name=sec_validation_mode></A>8.6 Judgments for 
validation modes and contexts</H3>
<DIV class=div3>
<H4><A id=jd_aux_context_is name=jd_aux_context_is></A>8.6.1 Elements in 
validation mode</H4>
<P><B>Notation</B></P>
<P>A validation mode may occur explicitly in a validate expression <A 
href="REC-xquery-semantics-20070123.htm#sec_validate_expr"><B>[4.13 
Validate Expressions]</B></A>. The following <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
mode</B></A> judgment resolves an element name within a given validation mode to 
the type that the element name denotes. The judgment is used in the semantics of 
the validate expression and in sequence type.</P>
<P id=jd_in_validation_context>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></DIV>
<P>holds when the possibly optional element name resolves to the given type in 
the given validation mode.</P>
<P><B>Semantics</B></P>
<P>We start with the rules for the global validation context.</P>
<P>If no element name is present, the global validation context resolves to the 
union of all element types that are globally declared.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A><SUB><FONT 
                  size=2> 1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A><SUB><FONT 
                  size=2> n</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
      mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
      to</B></A> (element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> | ... | element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
      size=2>n</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the element name is globally declared in the schema, it resolves to the 
element type of the corresponding global element declaration, independently of 
the validation mode.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define element <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution"><EM>OptSubstitution</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
      mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
      to</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A></TD></TR></TBODY></TABLE><BR></DIV>
<P>If an element name is not globally defined and the validation mode is lax, 
then the element name resolves to the element type with the given element name 
with any content type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_elem_decl">elemDecl</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  undefined</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
      mode</B></A> lax <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
      to</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type 
<CODE>xs:anyType</CODE></TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV></DIV></DIV>
<DIV class=back>
<DIV class=div1>
<H2><A id=sec_core name=sec_core></A>A Normalized core and formal grammars</H2>
<P>This section contains the set of productions for the of [XPath/XQuery] 
grammar after it has been normalized, sometimes referred to as the "core" 
grammar, and for the formal grammar productions.</P>
<DIV class=div2>
<H3><A id=sec_core_grammar name=sec_core_grammar></A>A.1 Core BNF</H3>
<P>The following grammar uses the same Basic EBNF notation as <A 
href="REC-xquery-semantics-20070123.htm#REC-xml">[XML]</A>, 
except that grammar symbols always have initial capital letters. The EBNF 
contains the lexemes embedded in the productions.</P>
<H5><A id=N2602E name=N2602E></A>Named Terminals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-IntegerLiteral 
      name=prod-core-IntegerLiteral></A>[<SMALL>98</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-IntegerLiteral">IntegerLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-DecimalLiteral 
      name=prod-core-DecimalLiteral></A>[<SMALL>99</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DecimalLiteral">DecimalLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("." <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A> 
      "." [0-9]*)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-DoubleLiteral 
      name=prod-core-DoubleLiteral></A>[<SMALL>100</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DoubleLiteral">DoubleLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("." <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A>) 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A> 
      ("." [0-9]*)?)) [eE] [+-]? <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Digits">Digits</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-StringLiteral 
      name=prod-core-StringLiteral></A>[<SMALL>101</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StringLiteral">StringLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>('"' (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EscapeQuot">EscapeQuot</A> 
      | [^"])* '"') | ("'" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EscapeApos">EscapeApos</A> 
      | [^'])* "'")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-EscapeQuot 
      name=prod-core-EscapeQuot></A>[<SMALL>102</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>EscapeQuot</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>'""'</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-EscapeApos 
      name=prod-core-EscapeApos></A>[<SMALL>103</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>EscapeApos</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"''"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ElementContentChar 
      name=prod-core-ElementContentChar></A>[<SMALL>104</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ElementContentChar</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Char">Char</A> 
      - [{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-QuotAttrContentChar 
      name=prod-core-QuotAttrContentChar></A>[<SMALL>105</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>QuotAttrContentChar</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Char">Char</A> 
      - ["{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AposAttrContentChar 
      name=prod-core-AposAttrContentChar></A>[<SMALL>106</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AposAttrContentChar</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Char">Char</A> 
      - ['{}&lt;&amp;]</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PITarget 
      name=prod-core-PITarget></A>[<SMALL>107</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>PITarget</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-PITarget">[http://www.w3.org/TR/REC-xml#NT-PITarget]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-QName 
      name=prod-core-QName></A>[<SMALL>108</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>QName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml-names/#NT-QName">[http://www.w3.org/TR/REC-xml-names/#NT-QName]</A><SUP> 
      <SMALL>Names</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NCName 
      name=prod-core-NCName></A>[<SMALL>109</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NCName</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml-names/#NT-NCName">[http://www.w3.org/TR/REC-xml-names/#NT-NCName]</A><SUP> 
      <SMALL>Names</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-S 
      name=prod-core-S></A>[<SMALL>110</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>S</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-S">[http://www.w3.org/TR/REC-xml#NT-S]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Char 
      name=prod-core-Char></A>[<SMALL>111</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Char</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="http://www.w3.org/TR/REC-xml/#NT-Char">[http://www.w3.org/TR/REC-xml#NT-Char]</A><SUP> 
      <SMALL>XML</SMALL></SUP></CODE></TD></TR></TBODY></TABLE>
<H5><A id=BNF-Grammar name=BNF-Grammar></A>Non-Terminals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ModuleDecl 
      name=prod-core-ModuleDecl></A>[<SMALL>1</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ModuleDecl">ModuleDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"module" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Separator">Separator</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Separator 
      name=prod-core-Separator></A>[<SMALL>2</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Separator">Separator</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>";"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NamespaceDecl 
      name=prod-core-NamespaceDecl></A>[<SMALL>3</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NamespaceDecl">NamespaceDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-DefaultNamespaceDecl 
      name=prod-core-DefaultNamespaceDecl></A>[<SMALL>4</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DefaultNamespaceDecl">DefaultNamespaceDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" ("element" | "function") "namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OptionDecl 
      name=prod-core-OptionDecl></A>[<SMALL>5</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OptionDecl">OptionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "option" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderingModeDecl 
      name=prod-core-OrderingModeDecl></A>[<SMALL>6</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderingModeDecl">OrderingModeDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "ordering" ("ordered" | 
  "unordered")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-EmptyOrderDecl 
      name=prod-core-EmptyOrderDecl></A>[<SMALL>7</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-EmptyOrderDecl">EmptyOrderDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "order" "empty" ("greatest" | 
    "least")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CopyNamespacesDecl 
      name=prod-core-CopyNamespacesDecl></A>[<SMALL>8</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CopyNamespacesDecl">CopyNamespacesDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "copy-namespaces" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PreserveMode">PreserveMode</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-InheritMode">InheritMode</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PreserveMode 
      name=prod-core-PreserveMode></A>[<SMALL>9</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PreserveMode">PreserveMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"preserve" | "no-preserve"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-InheritMode 
      name=prod-core-InheritMode></A>[<SMALL>10</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-InheritMode">InheritMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"inherit" | "no-inherit"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-DefaultCollationDecl 
      name=prod-core-DefaultCollationDecl></A>[<SMALL>11</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DefaultCollationDecl">DefaultCollationDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "default" "collation" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-BaseURIDecl 
      name=prod-core-BaseURIDecl></A>[<SMALL>12</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-BaseURIDecl">BaseURIDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "base-uri" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SchemaImport 
      name=prod-core-SchemaImport></A>[<SMALL>13</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaImport">SchemaImport</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "schema" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaPrefix">SchemaPrefix</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SchemaPrefix 
      name=prod-core-SchemaPrefix></A>[<SMALL>14</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaPrefix">SchemaPrefix</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=") | ("default" "element" "namespace")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ModuleImport 
      name=prod-core-ModuleImport></A>[<SMALL>15</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ModuleImport">ModuleImport</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"import" "module" ("namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "=")? <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      ("at" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A>)*)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-VarDecl 
      name=prod-core-VarDecl></A>[<SMALL>16</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarDecl">VarDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "variable" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>? 
      ((":=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A>) 
      | "external")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ConstructionDecl 
      name=prod-core-ConstructionDecl></A>[<SMALL>17</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ConstructionDecl">ConstructionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "construction" ("strip" | 
  "preserve")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-FunctionDecl 
      name=prod-core-FunctionDecl></A>[<SMALL>18</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-FunctionDecl">FunctionDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "function" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ParamList">ParamList</A>? 
      ")" ("as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SequenceType">SequenceType</A>)? 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-EnclosedExpr">EnclosedExpr</A> 
      | "external")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ParamList 
      name=prod-core-ParamList></A>[<SMALL>19</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ParamList">ParamList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Param">Param</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Param">Param</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Param 
      name=prod-core-Param></A>[<SMALL>20</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Param">Param</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-EnclosedExpr 
      name=prod-core-EnclosedExpr></A>[<SMALL>21</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-EnclosedExpr">EnclosedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Expr 
      name=prod-core-Expr></A>[<SMALL>22</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Expr">Expr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ExprSingle 
      name=prod-core-ExprSingle></A>[<SMALL>23</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExprSingle">ExprSingle</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FLWORExpr">FLWORExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QuantifiedExpr">QuantifiedExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeswitchExpr">TypeswitchExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-IfExpr">IfExpr</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrExpr">OrExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-FLWORExpr 
      name=prod-core-FLWORExpr></A>[<SMALL>24</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-FLWORExpr">FLWORExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-LetClause">LetClause</A>) 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ForClause 
      name=prod-core-ForClause></A>[<SMALL>25</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForClause">ForClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"for" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PositionalVar">PositionalVar</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PositionalVar 
      name=prod-core-PositionalVar></A>[<SMALL>26</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PositionalVar">PositionalVar</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"at" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-LetClause 
      name=prod-core-LetClause></A>[<SMALL>27</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-LetClause">LetClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"let" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>? 
      ":=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderByClause 
      name=prod-core-OrderByClause></A>[<SMALL>28</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderByClause">OrderByClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("order" "by") | ("stable" "order" "by")) <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderSpecList">OrderSpecList</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderSpecList 
      name=prod-core-OrderSpecList></A>[<SMALL>29</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderSpecList">OrderSpecList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderSpec">OrderSpec</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderSpec">OrderSpec</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderSpec 
      name=prod-core-OrderSpec></A>[<SMALL>30</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderSpec">OrderSpec</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderModifier">OrderModifier</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderModifier 
      name=prod-core-OrderModifier></A>[<SMALL>31</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderModifier">OrderModifier</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("ascending" | "descending")? ("empty" ("greatest" | "least"))? 
      ("collation" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-QuantifiedExpr 
      name=prod-core-QuantifiedExpr></A>[<SMALL>32</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-QuantifiedExpr">QuantifiedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("some" | "every") "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A> 
      ("," "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>? 
      "in" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A>)* 
      "satisfies" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-TypeswitchExpr 
      name=prod-core-TypeswitchExpr></A>[<SMALL>33</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeswitchExpr">TypeswitchExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"typeswitch" "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      ")" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CaseClause">CaseClause</A>+ 
      "default" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CaseClause 
      name=prod-core-CaseClause></A>[<SMALL>34</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CaseClause">CaseClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"case" "$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A> 
      "as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SequenceType">SequenceType</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-IfExpr 
      name=prod-core-IfExpr></A>[<SMALL>35</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-IfExpr">IfExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"if" "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      ")" "then" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A> 
      "else" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrExpr 
      name=prod-core-OrExpr></A>[<SMALL>36</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrExpr">OrExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AndExpr">AndExpr</A> 
      ( "or" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AndExpr">AndExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AndExpr 
      name=prod-core-AndExpr></A>[<SMALL>37</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AndExpr">AndExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CastableExpr">CastableExpr</A> 
      ( "and" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CastableExpr">CastableExpr</A> 
      )*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CastableExpr 
      name=prod-core-CastableExpr></A>[<SMALL>38</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CastableExpr">CastableExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CastExpr">CastExpr</A> 
      ( "castable" "as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CastExpr 
      name=prod-core-CastExpr></A>[<SMALL>39</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CastExpr">CastExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValueExpr">ValueExpr</A> 
      ( "cast" "as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SingleType">SingleType</A> 
      )?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ValueExpr 
      name=prod-core-ValueExpr></A>[<SMALL>40</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValueExpr">ValueExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValidateExpr">ValidateExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StepExpr">StepExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExtensionExpr">ExtensionExpr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ValidateExpr 
      name=prod-core-ValidateExpr></A>[<SMALL>41</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValidateExpr">ValidateExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"validate" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ValidationMode">ValidationMode</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ValidationMode 
      name=prod-core-ValidationMode></A>[<SMALL>42</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ValidationMode">ValidationMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"lax" | "strict"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ExtensionExpr 
      name=prod-core-ExtensionExpr></A>[<SMALL>43</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ExtensionExpr">ExtensionExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Pragma">Pragma</A>+ 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Pragma 
      name=prod-core-Pragma></A>[<SMALL>44</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Pragma">Pragma</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(#" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-S">S</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-S">S</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PragmaContents">PragmaContents</A>)? 
      "#)"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PragmaContents 
      name=prod-core-PragmaContents></A>[<SMALL>45</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PragmaContents">PragmaContents</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Char">Char</A>* 
      - (Char* '#)' Char*))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-StepExpr 
      name=prod-core-StepExpr></A>[<SMALL>46</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-StepExpr">StepExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PrimaryExpr">PrimaryExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AxisStep">AxisStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AxisStep 
      name=prod-core-AxisStep></A>[<SMALL>47</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AxisStep">AxisStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ReverseStep">ReverseStep</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForwardStep">ForwardStep</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ForwardStep 
      name=prod-core-ForwardStep></A>[<SMALL>48</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForwardStep">ForwardStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ForwardAxis">ForwardAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NodeTest">NodeTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ForwardAxis 
      name=prod-core-ForwardAxis></A>[<SMALL>49</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ForwardAxis">ForwardAxis</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("child" "::")<BR>| ("descendant" "::")<BR>| ("attribute" 
      "::")<BR>| ("self" "::")<BR>| ("descendant-or-self" "::")<BR>| 
      ("namespace" "::")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ReverseStep 
      name=prod-core-ReverseStep></A>[<SMALL>50</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ReverseStep">ReverseStep</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ReverseAxis">ReverseAxis</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NodeTest">NodeTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ReverseAxis 
      name=prod-core-ReverseAxis></A>[<SMALL>51</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ReverseAxis">ReverseAxis</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("parent" "::")<BR>| ("ancestor" "::")<BR>| ("ancestor-or-self" 
      "::")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NodeTest 
      name=prod-core-NodeTest></A>[<SMALL>52</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NodeTest">NodeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-KindTest">KindTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NameTest">NameTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NameTest 
      name=prod-core-NameTest></A>[<SMALL>53</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NameTest">NameTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Wildcard">Wildcard</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Wildcard 
      name=prod-core-Wildcard></A>[<SMALL>54</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Wildcard">Wildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"*"<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      ":" "*")<BR>| ("*" ":" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PrimaryExpr 
      name=prod-core-PrimaryExpr></A>[<SMALL>55</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PrimaryExpr">PrimaryExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Literal">Literal</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarRef">VarRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ParenthesizedExpr">ParenthesizedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-FunctionCall">FunctionCall</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OrderedExpr">OrderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-UnorderedExpr">UnorderedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Constructor">Constructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Literal 
      name=prod-core-Literal></A>[<SMALL>56</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Literal">Literal</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NumericLiteral">NumericLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NumericLiteral 
      name=prod-core-NumericLiteral></A>[<SMALL>57</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NumericLiteral">NumericLiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-IntegerLiteral">IntegerLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DecimalLiteral">DecimalLiteral</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DoubleLiteral">DoubleLiteral</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-VarRef 
      name=prod-core-VarRef></A>[<SMALL>58</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarRef">VarRef</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-VarName 
      name=prod-core-VarName></A>[<SMALL>59</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ParenthesizedExpr 
      name=prod-core-ParenthesizedExpr></A>[<SMALL>60</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ParenthesizedExpr">ParenthesizedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A>? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OrderedExpr 
      name=prod-core-OrderedExpr></A>[<SMALL>61</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OrderedExpr">OrderedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"ordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-UnorderedExpr 
      name=prod-core-UnorderedExpr></A>[<SMALL>62</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-UnorderedExpr">UnorderedExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"unordered" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-FunctionCall 
      name=prod-core-FunctionCall></A>[<SMALL>63</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-FunctionCall">FunctionCall</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ExprSingle">ExprSingle</A>)*)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Constructor 
      name=prod-core-Constructor></A>[<SMALL>64</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Constructor">Constructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ComputedConstructor">ComputedConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ComputedConstructor 
      name=prod-core-ComputedConstructor></A>[<SMALL>65</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ComputedConstructor">ComputedConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompDocConstructor">CompDocConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompElemConstructor">CompElemConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompAttrConstructor">CompAttrConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompTextConstructor">CompTextConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompCommentConstructor">CompCommentConstructor</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CompPIConstructor">CompPIConstructor</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompDocConstructor 
      name=prod-core-CompDocConstructor></A>[<SMALL>66</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompDocConstructor">CompDocConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompElemConstructor 
      name=prod-core-CompElemConstructor></A>[<SMALL>67</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompElemConstructor">CompElemConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ContentExpr">ContentExpr</A> 
      "}" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NamespaceBinding">NamespaceBinding</A>* 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-NamespaceBinding 
      name=prod-core-NamespaceBinding></A>[<SMALL>68</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-NamespaceBinding">NamespaceBinding</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-URILiteral">URILiteral</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ContentExpr 
      name=prod-core-ContentExpr></A>[<SMALL>69</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ContentExpr">ContentExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompAttrConstructor 
      name=prod-core-CompAttrConstructor></A>[<SMALL>70</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompAttrConstructor">CompAttrConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompTextConstructor 
      name=prod-core-CompTextConstructor></A>[<SMALL>71</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompTextConstructor">CompTextConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompCommentConstructor 
      name=prod-core-CompCommentConstructor></A>[<SMALL>72</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompCommentConstructor">CompCommentConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CompPIConstructor 
      name=prod-core-CompPIConstructor></A>[<SMALL>73</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CompPIConstructor">CompPIConstructor</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      | ("{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A> 
      "}")) "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SingleType 
      name=prod-core-SingleType></A>[<SMALL>74</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SingleType">SingleType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AtomicType">AtomicType</A> 
      "?"?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-TypeDeclaration 
      name=prod-core-TypeDeclaration></A>[<SMALL>75</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeDeclaration">TypeDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SequenceType">SequenceType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SequenceType 
      name=prod-core-SequenceType></A>[<SMALL>76</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("empty-sequence" "(" ")")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ItemType">ItemType</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-OccurrenceIndicator">OccurrenceIndicator</A>?)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-OccurrenceIndicator 
      name=prod-core-OccurrenceIndicator></A>[<SMALL>77</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-OccurrenceIndicator">OccurrenceIndicator</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"?" | "*" | "+"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ItemType 
      name=prod-core-ItemType></A>[<SMALL>78</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ItemType">ItemType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-KindTest">KindTest</A> 
      | ("item" "(" ")") | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AtomicType">AtomicType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AtomicType 
      name=prod-core-AtomicType></A>[<SMALL>79</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType">AtomicType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-KindTest 
      name=prod-core-KindTest></A>[<SMALL>80</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-KindTest">KindTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-DocumentTest">DocumentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementTest">ElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeTest">AttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaElementTest">SchemaElementTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaAttributeTest">SchemaAttributeTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PITest">PITest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-CommentTest">CommentTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TextTest">TextTest</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AnyKindTest">AnyKindTest</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AnyKindTest 
      name=prod-core-AnyKindTest></A>[<SMALL>81</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AnyKindTest">AnyKindTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"node" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-DocumentTest 
      name=prod-core-DocumentTest></A>[<SMALL>82</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-DocumentTest">DocumentTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document-node" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementTest">ElementTest</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SchemaElementTest">SchemaElementTest</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-TextTest 
      name=prod-core-TextTest></A>[<SMALL>83</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TextTest">TextTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-CommentTest 
      name=prod-core-CommentTest></A>[<SMALL>84</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-CommentTest">CommentTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "(" ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-PITest 
      name=prod-core-PITest></A>[<SMALL>85</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-PITest">PITest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StringLiteral">StringLiteral</A>)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AttributeTest 
      name=prod-core-AttributeTest></A>[<SMALL>86</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeTest">AttributeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttribNameOrWildcard">AttribNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeName">TypeName</A>)?)? 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AttribNameOrWildcard 
      name=prod-core-AttribNameOrWildcard></A>[<SMALL>87</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttribNameOrWildcard">AttribNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeName">AttributeName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SchemaAttributeTest 
      name=prod-core-SchemaAttributeTest></A>[<SMALL>88</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaAttributeTest">SchemaAttributeTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-attribute" "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeDeclaration">AttributeDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AttributeDeclaration 
      name=prod-core-AttributeDeclaration></A>[<SMALL>89</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeDeclaration">AttributeDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-AttributeName">AttributeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ElementTest 
      name=prod-core-ElementTest></A>[<SMALL>90</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementTest">ElementTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" "(" (<A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementNameOrWildcard">ElementNameOrWildcard</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeName">TypeName</A> 
      "?"?)?)? ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ElementNameOrWildcard 
      name=prod-core-ElementNameOrWildcard></A>[<SMALL>91</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementNameOrWildcard">ElementNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementName">ElementName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-SchemaElementTest 
      name=prod-core-SchemaElementTest></A>[<SMALL>92</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SchemaElementTest">SchemaElementTest</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"schema-element" "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementDeclaration">ElementDeclaration</A> 
      ")"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ElementDeclaration 
      name=prod-core-ElementDeclaration></A>[<SMALL>93</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementDeclaration">ElementDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-ElementName">ElementName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-AttributeName 
      name=prod-core-AttributeName></A>[<SMALL>94</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AttributeName">AttributeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-ElementName 
      name=prod-core-ElementName></A>[<SMALL>95</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-ElementName">ElementName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-TypeName 
      name=prod-core-TypeName></A>[<SMALL>96</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-TypeName">TypeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-URILiteral 
      name=prod-core-URILiteral></A>[<SMALL>97</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-URILiteral">URILiteral</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-StringLiteral">StringLiteral</A></CODE></TD></TR></TBODY></TABLE>
<H5><A id=N2682B name=N2682B></A></H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-core-Digits 
      name=prod-core-Digits></A>[<SMALL>112</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>[0-9]+</CODE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A id=sec_formal_grammar name=sec_formal_grammar></A>A.2 Formal BNF</H3>
<P>The following grammar uses the same Basic EBNF notation as <A 
href="REC-xquery-semantics-20070123.htm#REC-xml">[XML]</A>, 
except that grammar symbols always have initial capital letters. The EBNF 
contains the lexemes embedded in the productions.</P>
<H5><A id=N2683E name=N2683E></A>Named Terminals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-HexDigits 
      name=prod-fs-HexDigits></A>[<SMALL>91</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><SPAN class=xquery>HexDigits</SPAN></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>[0-9a-fA-F]+</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-CharRef 
      name=prod-fs-CharRef></A>[<SMALL>92</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><SPAN class=xquery>CharRef</SPAN></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"&amp;#" (<A 
      href="REC-xquery-semantics-20070123.htm#doc-core-Digits">Digits</A> 
      | ("x" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-HexDigits">HexDigits</A>)) 
      ";"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Char 
      name=prod-fs-Char></A>[<SMALL>93</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Char</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>#x0009#x000D#x000A#x0020-#xFFFD</CODE></TD></TR></TBODY></TABLE>
<H5><A id=Formal-BNF-Grammar name=Formal-BNF-Grammar></A>Non-Terminals</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AtomicValueContent 
      name=prod-fs-AtomicValueContent></A>[<SMALL>1</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent">AtomicValueContent</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>String<BR>| Boolean<BR>| Decimal<BR>| Float<BR>| Double<BR>| 
      Duration<BR>| DateTime<BR>| Time<BR>| Date<BR>| GYearMonth<BR>| GYear<BR>| 
      GMonthDay<BR>| GDay<BR>| GMonth<BR>| HexBinary<BR>| Base64Binary<BR>| 
      AnyURI<BR>| expanded-QName<BR>| NOTATION</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeAnnotation 
      name=prod-fs-TypeAnnotation></A>[<SMALL>2</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeAnnotation">TypeAnnotation</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"of" "type" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementName 
      name=prod-fs-ElementName></A>[<SMALL>3</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName">ElementName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementNameOrWildcard 
      name=prod-fs-ElementNameOrWildcard></A>[<SMALL>4</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementNameOrWildcard">ElementNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeNameOrWildcard 
      name=prod-fs-AttributeNameOrWildcard></A>[<SMALL>5</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeNameOrWildcard">AttributeNameOrWildcard</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A> 
      | "*"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeName 
      name=prod-fs-AttributeName></A>[<SMALL>6</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName">AttributeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Value 
      name=prod-fs-Value></A>[<SMALL>7</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value">Value</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Item">Item</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Value">Value</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Value">Value</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-SimpleValue 
      name=prod-fs-SimpleValue></A>[<SMALL>8</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue">SimpleValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicValue">AtomicValue</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-SimpleValue">SimpleValue</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-SimpleValue">SimpleValue</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementValue 
      name=prod-fs-ElementValue></A>[<SMALL>9</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementValue">ElementValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementName">ElementName</A> 
      "nilled"? <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeAnnotation">TypeAnnotation</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Value">Value</A> 
      "}" ("{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-NamespaceBindings">NamespaceBindings</A> 
      "}")?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeValue 
      name=prod-fs-AttributeValue></A>[<SMALL>10</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeValue">AttributeValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeName">AttributeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeAnnotation">TypeAnnotation</A>? 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-SimpleValue">SimpleValue</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-DocumentValue 
      name=prod-fs-DocumentValue></A>[<SMALL>11</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentValue">DocumentValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Value">Value</A> 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TextValue 
      name=prod-fs-TextValue></A>[<SMALL>12</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TextValue">TextValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"text" "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-CommentValue 
      name=prod-fs-CommentValue></A>[<SMALL>13</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-CommentValue">CommentValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"comment" "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ProcessingInstructionValue 
      name=prod-fs-ProcessingInstructionValue></A>[<SMALL>14</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ProcessingInstructionValue">ProcessingInstructionValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"processing-instruction" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" String "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-NamespaceBindings 
      name=prod-fs-NamespaceBindings></A>[<SMALL>15</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBindings">NamespaceBindings</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-NamespaceBinding">NamespaceBinding</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-NamespaceBinding">NamespaceBinding</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-LocationHints 
      name=prod-fs-LocationHints></A>[<SMALL>16</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-LocationHints">LocationHints</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"at" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-URILiteral">URILiteral</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-NamespaceBinding 
      name=prod-fs-NamespaceBinding></A>[<SMALL>17</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NamespaceBinding">NamespaceBinding</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"namespace" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A> 
      "{" AnyURI "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Prefix 
      name=prod-fs-Prefix></A>[<SMALL>18</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Prefix">Prefix</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-LocalPart 
      name=prod-fs-LocalPart></A>[<SMALL>19</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-LocalPart">LocalPart</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-NCName">NCName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-NodeValue 
      name=prod-fs-NodeValue></A>[<SMALL>20</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeValue">NodeValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementValue">ElementValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeValue">AttributeValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-DocumentValue">DocumentValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TextValue">TextValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-CommentValue">CommentValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ProcessingInstructionValue">ProcessingInstructionValue</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Item 
      name=prod-fs-Item></A>[<SMALL>21</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item">Item</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-NodeValue">NodeValue</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicValue">AtomicValue</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AtomicValue 
      name=prod-fs-AtomicValue></A>[<SMALL>22</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue">AtomicValue</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicValueContent">AtomicValueContent</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeAnnotation">TypeAnnotation</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeName 
      name=prod-fs-TypeName></A>[<SMALL>23</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName">TypeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Type 
      name=prod-fs-Type></A>[<SMALL>24</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type">Type</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalItemType">FormalItemType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OccurrenceIndicator">OccurrenceIndicator</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      "," <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A>)<BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      "|" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A>)<BR>| 
      "empty"<BR>| "none"<BR>| ("(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalItemType 
      name=prod-fs-FormalItemType></A>[<SMALL>25</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalItemType">FormalItemType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicTypeName">AtomicTypeName</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-NodeType">NodeType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-NodeType 
      name=prod-fs-NodeType></A>[<SMALL>26</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NodeType">NodeType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-DocumentType">DocumentType</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeType">AttributeType</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementContentType">ElementContentType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementContentType 
      name=prod-fs-ElementContentType></A>[<SMALL>27</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentType">ElementContentType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementType">ElementType</A><BR>| 
      "comment"<BR>| "processing-instruction"<BR>| "text"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AtomicTypeName 
      name=prod-fs-AtomicTypeName></A>[<SMALL>28</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName">AtomicTypeName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementType 
      name=prod-fs-ElementType></A>[<SMALL>29</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType">ElementType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementNameOrWildcard">ElementNameOrWildcard</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptTypeSpecifier">OptTypeSpecifier</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeSpecifier 
      name=prod-fs-TypeSpecifier></A>[<SMALL>30</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier">TypeSpecifier</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptNillable">OptNillable</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeReference">TypeReference</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeType 
      name=prod-fs-AttributeType></A>[<SMALL>31</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType">AttributeType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"attribute" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeNameOrWildcard">AttributeNameOrWildcard</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptTypeReference">OptTypeReference</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Nillable 
      name=prod-fs-Nillable></A>[<SMALL>32</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Nillable">Nillable</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"nillable"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeDerivation 
      name=prod-fs-TypeDerivation></A>[<SMALL>33</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation">TypeDerivation</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ComplexTypeDerivation">ComplexTypeDerivation</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicTypeDerivation">AtomicTypeDerivation</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ComplexTypeDerivation 
      name=prod-fs-ComplexTypeDerivation></A>[<SMALL>34</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ComplexTypeDerivation">ComplexTypeDerivation</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Derivation">Derivation</A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptMixed">OptMixed</A> 
      "{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A>? 
      "}"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AtomicTypeDerivation 
      name=prod-fs-AtomicTypeDerivation></A>[<SMALL>35</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeDerivation">AtomicTypeDerivation</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"restricts" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicTypeName">AtomicTypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeReference 
      name=prod-fs-TypeReference></A>[<SMALL>36</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference">TypeReference</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"of" "type" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Derivation 
      name=prod-fs-Derivation></A>[<SMALL>37</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation">Derivation</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("restricts" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A>)<BR>| 
      ("extends" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Mixed 
      name=prod-fs-Mixed></A>[<SMALL>38</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Mixed">Mixed</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"mixed"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Definition 
      name=prod-fs-Definition></A>[<SMALL>39</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Definition">Definition</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("define" "element" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementName">ElementName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptSubstitution">OptSubstitution</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-OptNillable">OptNillable</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "attribute" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeName">AttributeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeReference">TypeReference</A>)<BR>| 
      ("define" "type" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeName">TypeName</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeDerivation">TypeDerivation</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Definitions 
      name=prod-fs-Definitions></A>[<SMALL>40</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Definitions">Definitions</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Definition">Definition</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Definitions">Definitions</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Substitution 
      name=prod-fs-Substitution></A>[<SMALL>41</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Substitution">Substitution</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"substitutes" "for" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementName">ElementName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeModel 
      name=prod-fs-AttributeModel></A>[<SMALL>42</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel">AttributeModel</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeType">AttributeType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeType">AttributeType</A> 
      "?")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeModel">AttributeModel</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeModel">AttributeModel</A>)<BR>| 
      ("(" ")")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementModel 
      name=prod-fs-ElementModel></A>[<SMALL>43</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel">ElementModel</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementType">ElementType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementType">ElementType</A> 
      "?")<BR>| (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementModel">ElementModel</A> 
      "&amp;" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ElementModel">ElementModel</A>)<BR>| 
      ("(" ")")<BR>| "none"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-PrimeType 
      name=prod-fs-PrimeType></A>[<SMALL>44</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrimeType">PrimeType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalItemType">FormalItemType</A><BR>| 
      (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-PrimeType">PrimeType</A> 
      "|" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-PrimeType">PrimeType</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-DocumentType 
      name=prod-fs-DocumentType></A>[<SMALL>45</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DocumentType">DocumentType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"document" ("{" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A> 
      "}")?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-SPragma 
      name=prod-fs-SPragma></A>[<SMALL>46</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SPragma">SPragma</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("include" | "import" | "redefine" | 
  "annotation")*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Content 
      name=prod-fs-Content></A>[<SMALL>47</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Content">Content</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("simpleType" | "complexType" | "element" | "attribute" | 
      "attributeGroup" | "group" | "notation") 
  "annotation"*)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-MixedAttribute 
      name=prod-fs-MixedAttribute></A>[<SMALL>48</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-MixedAttribute">MixedAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"mixed" "=" Boolean</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-NillableAttribute 
      name=prod-fs-NillableAttribute></A>[<SMALL>49</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-NillableAttribute">NillableAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"nillable" "=" Boolean</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-substitutionGroupAttribute 
      name=prod-fs-substitutionGroupAttribute></A>[<SMALL>50</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-substitutionGroupAttribute">substitutionGroupAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"substitutionGroup" "=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-maxLength 
      name=prod-fs-maxLength></A>[<SMALL>51</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-maxLength">maxLength</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"maxLength" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-minLength 
      name=prod-fs-minLength></A>[<SMALL>52</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-minLength">minLength</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"minLength" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-length 
      name=prod-fs-length></A>[<SMALL>53</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-length">length</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"length" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-maxOccurs 
      name=prod-fs-maxOccurs></A>[<SMALL>54</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-maxOccurs">maxOccurs</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"maxOccurs" "=" ("nonNegativeInteger" | 
  "unbounded")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-minOccurs 
      name=prod-fs-minOccurs></A>[<SMALL>55</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-minOccurs">minOccurs</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"minOccurs" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OccursAttributes 
      name=prod-fs-OccursAttributes></A>[<SMALL>56</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OccursAttributes">OccursAttributes</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-maxOccurs">maxOccurs</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-minOccurs">minOccurs</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-maxLength">maxLength</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-minLength">minLength</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-length">length</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ComplexTypeContent 
      name=prod-fs-ComplexTypeContent></A>[<SMALL>57</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ComplexTypeContent">ComplexTypeContent</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"annotation"? ("simpleContent" | "complexContent" | (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-ChildrenContent">ChildrenContent</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeContent">AttributeContent</A>))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ChildrenContent 
      name=prod-fs-ChildrenContent></A>[<SMALL>58</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ChildrenContent">ChildrenContent</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("group" | "all" | "choice" | "sequence")?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-GroupComponent 
      name=prod-fs-GroupComponent></A>[<SMALL>59</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-GroupComponent">GroupComponent</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" | "group" | "choice" | "sequence" | 
  "any"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeContent 
      name=prod-fs-AttributeContent></A>[<SMALL>60</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContent">AttributeContent</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("attribute" | "attributeGroup")* 
  "anyAttribute"?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-UseAttribute 
      name=prod-fs-UseAttribute></A>[<SMALL>61</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-UseAttribute">UseAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"use" "=" ("optional" | "prohibited" | 
  "required")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-DefaultAttribute 
      name=prod-fs-DefaultAttribute></A>[<SMALL>62</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DefaultAttribute">DefaultAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"default" "=" String</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FixedAttribute 
      name=prod-fs-FixedAttribute></A>[<SMALL>63</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FixedAttribute">FixedAttribute</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"fixed" "=" String</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-PrincipalNodeKind 
      name=prod-fs-PrincipalNodeKind></A>[<SMALL>64</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrincipalNodeKind">PrincipalNodeKind</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" | "attribute" | "namespace"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalFLWORClause 
      name=prod-fs-FormalFLWORClause></A>[<SMALL>65</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalFLWORClause">FormalFLWORClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForClause">ForClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-LetClause">LetClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-WhereClause">WhereClause</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderByClause">OrderByClause</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalReturnClause 
      name=prod-fs-FormalReturnClause></A>[<SMALL>66</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalReturnClause">FormalReturnClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalFLWORExpr">FormalFLWORExpr</A> 
      | ("return" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Expr">Expr</A>)</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalFLWORExpr 
      name=prod-fs-FormalFLWORExpr></A>[<SMALL>67</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalFLWORExpr">FormalFLWORExpr</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalFLWORClause">FormalFLWORClause</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalReturnClause">FormalReturnClause</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalCaseClauses 
      name=prod-fs-FormalCaseClauses></A>[<SMALL>68</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalCaseClauses">FormalCaseClauses</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalCaseClause">FormalCaseClause</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalCaseClauses">FormalCaseClauses</A>) 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-FormalDefaultCaseClause">FormalDefaultCaseClause</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalCaseClause 
      name=prod-fs-FormalCaseClause></A>[<SMALL>69</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalCaseClause">FormalCaseClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"case" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "as" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-SequenceType">SequenceType</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FormalDefaultCaseClause 
      name=prod-fs-FormalDefaultCaseClause></A>[<SMALL>70</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FormalDefaultCaseClause">FormalDefaultCaseClause</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"default" "$" <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-VarName">VarName</A> 
      "return" <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-Expr">Expr</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-PrologDeclList 
      name=prod-fs-PrologDeclList></A>[<SMALL>71</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrologDeclList">PrologDeclList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-PrologDecl">PrologDecl</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-Separator">Separator</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-PrologDeclList">PrologDeclList</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-PrologDecl 
      name=prod-fs-PrologDecl></A>[<SMALL>72</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-PrologDecl">PrologDecl</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultCollationDecl">DefaultCollationDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-BaseURIDecl">BaseURIDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ConstructionDecl">ConstructionDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OrderingModeDecl">OrderingModeDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EmptyOrderDecl">EmptyOrderDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CopyNamespacesDecl">CopyNamespacesDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SchemaImport">SchemaImport</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ModuleImport">ModuleImport</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-NamespaceDecl">NamespaceDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DefaultNamespaceDecl">DefaultNamespaceDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-VarDecl">VarDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-FunctionDecl">FunctionDecl</A><BR>| 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-OptionDecl">OptionDecl</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptAtomicType 
      name=prod-fs-OptAtomicType></A>[<SMALL>73</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType">OptAtomicType</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicTypeName">AtomicTypeName</A> 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AtomicTypeName">AtomicTypeName</A> 
      "?") | "empty"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptMixed 
      name=prod-fs-OptMixed></A>[<SMALL>74</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed">OptMixed</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Mixed">Mixed</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptNillable 
      name=prod-fs-OptNillable></A>[<SMALL>75</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable">OptNillable</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Nillable">Nillable</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptSubstitution 
      name=prod-fs-OptSubstitution></A>[<SMALL>76</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptSubstitution">OptSubstitution</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Substitution">Substitution</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptTypeSpecifier 
      name=prod-fs-OptTypeSpecifier></A>[<SMALL>77</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeSpecifier">OptTypeSpecifier</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeSpecifier">TypeSpecifier</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptTypeReference 
      name=prod-fs-OptTypeReference></A>[<SMALL>78</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeReference">OptTypeReference</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeReference">TypeReference</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptTypeDeclaration 
      name=prod-fs-OptTypeDeclaration></A>[<SMALL>79</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptTypeDeclaration">OptTypeDeclaration</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-TypeDeclaration">TypeDeclaration</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptPositionalVar 
      name=prod-fs-OptPositionalVar></A>[<SMALL>80</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptPositionalVar">OptPositionalVar</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-core-PositionalVar">PositionalVar</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptVarName 
      name=prod-fs-OptVarName></A>[<SMALL>81</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptVarName">OptVarName</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("$" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-VarName">VarName</A>)?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-OptLocationHints 
      name=prod-fs-OptLocationHints></A>[<SMALL>82</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptLocationHints">OptLocationHints</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-LocationHints">LocationHints</A>?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ElementContentUnit 
      name=prod-fs-ElementContentUnit></A>[<SMALL>83</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementContentUnit">ElementContentUnit</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-DirectConstructor">DirectConstructor</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EnclosedExpr">EnclosedExpr</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-DirCharsUnit">DirCharsUnit</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-DirCharsUnit 
      name=prod-fs-DirCharsUnit></A>[<SMALL>84</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-DirCharsUnit">DirCharsUnit</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-CDataSection">CDataSection</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-PredefinedEntityRef">PredefinedEntityRef</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#prod-xquery-CharRef">CharRef</A> 
      | "{{" | "}}" | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementContentChar">ElementContentChar</A>)+</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-FunctionSig 
      name=prod-fs-FunctionSig></A>[<SMALL>85</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-FunctionSig">FunctionSig</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"declare" "function" expanded-QName "(" <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-TypeList">TypeList</A>? 
      ")" "as" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-SequenceType">SequenceType</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-TypeList 
      name=prod-fs-TypeList></A>[<SMALL>86</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeList">TypeList</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-SequenceType">SequenceType</A> 
      ("," <A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-Type">Type</A>)*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeContentUnits 
      name=prod-fs-AttributeContentUnits></A>[<SMALL>87</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContentUnits">AttributeContentUnits</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#prod-fs-AttributeContentUnit">AttributeContentUnit</A>*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-AttributeContentUnit 
      name=prod-fs-AttributeContentUnit></A>[<SMALL>88</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContentUnit">AttributeContentUnit</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-EscapeQuot">EscapeQuot</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-QuotAttrValueContent">QuotAttrValueContent</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-ConstructionMode 
      name=prod-fs-ConstructionMode></A>[<SMALL>89</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ConstructionMode">ConstructionMode</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"preserve" | "strip"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=prod-fs-Axis 
      name=prod-fs-Axis></A>[<SMALL>90</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Axis">Axis</A></CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ForwardAxis">ForwardAxis</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-xquery-ReverseAxis">ReverseAxis</A></CODE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_indexes name=sec_indexes></A>B Index of judgments</H2>
<P>Here is the list of the judgments defined in this specification.</P>
<P>Main judgments:</P>
<UL>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>Expr</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>Expr</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_type_extension"><B>:</B><SUB><FONT 
  size=2>ext</FONT></SUB></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>; 
  <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>Expr</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_yields"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></P></LI></UL>
<P>Auxiliary judgments:</P>
<UL>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_subtype_of"><B>&lt;:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  (<EM>AnyURI</EM> | #MAIN) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_module_statEnv"><B>=&gt;</B><SUB><FONT 
  size=2>module_statEnv</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  (<EM>AnyURI</EM> | #MAIN) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_module_dynEnv"><B>=&gt;</B><SUB><FONT 
  size=2>module_dynEnv</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDeclList</EM> <A 
  class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>=&gt;</B><SUB><FONT 
  size=2>stat</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_yields_context"><B>with</B></A> 
  <EM>PrologDeclList</EM><SUB><FONT size=2>1</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>PrologDeclList</EM> <A 
  class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_yields_dyn_context"><B>=&gt;</B><SUB><FONT 
  size=2>dyn</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>1</FONT></SUB><B>&nbsp;|-&nbsp;</B> <EM>Definitions</EM> <A 
  class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_yields_type_context"><B>=&gt;</B><SUB><FONT 
  size=2>type</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> (<A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
  size=2>1</FONT></SUB>(<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1,1</FONT></SUB>, ..., <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1,n</FONT></SUB>)), ···, (<A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
  size=2>k</FONT></SUB>(<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>k,1</FONT></SUB>, ..., <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>k,n</FONT></SUB>)) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_import_functions"><B>=&gt;</B><SUB><FONT 
  size=2>import_functions</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>1</FONT></SUB> ; <EM>AnyURI</EM><B>&nbsp;|-&nbsp;</B> (<A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
  size=2>1</FONT></SUB>, <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB>), ···, (<A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A><SUB><FONT 
  size=2>n</FONT></SUB>, <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>n</FONT></SUB>) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_import_variables"><B>=&gt;</B><SUB><FONT 
  size=2>import_variables</FONT></SUB></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>against</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_promotes_to"><B>promotes 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_against"><B>against</B></A> 
  <EM>FormalCaseClauses</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_against"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
  as</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
  ( <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> ) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>axis</B></A> 
  <EM>Axis</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>of</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis_type"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
  <EM>Axis</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>case</B></A> 
  <EM>FormalCaseClause</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_type_case"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
  be promoted to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>cast 
  value to type</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_cast_value_to"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_data"><B>data 
  on</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeSpecifier"><EM>TypeSpecifier</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_expands_to"><B>expands 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
  by</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>extended 
  with dynamic environment</B></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>yields</B></A> 
  <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><SUB><FONT 
  size=2>3</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_dynamic_environment"><B>for 
  uri</B></A> <EM>AnyURI</EM></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>extended 
  with static environment</B></A> <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>yields</B></A> 
  <A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><SUB><FONT 
  size=2>3</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_extended_with_static_environment"><B>for 
  uri</B></A> <EM>AnyURI</EM></P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
  @<EM>QName</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>absent</B></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>function 
  declaration</B></A> <EM>FunctionDecl</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>with 
  signature</B></A> <EM>FunctionSig</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_declaration"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>r</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>function</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>with 
  types</B></A> (<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB>,...,<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>n</FONT></SUB>) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>on 
  values</B></A> (<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB>,...,<A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>n</FONT></SUB>) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_function_with_types"><B>yields</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>LiteralExpr</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_atomic_value"><B>has 
  atomic value</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_attribute_content"><B>has 
  attribute content</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_has_element_content"><B>has 
  node content</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><EM>Axis</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_principal"><B>has 
  principal</B></A> <EM>PrincipalNodeKind</EM></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>3</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>is</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_union_interpretation"><B>extended 
  with union interpretation of</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></P>
  <LI>
  <P><EM>AnyURI</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_is_target_namespace_of_modules"><B>is 
  target namespace of modules</B></A> <EM>Module</EM><SUB><FONT 
  size=2>1</FONT></SUB> ... <EM>Module</EM><SUB><FONT size=2>n</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_matches"><B>matches</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_mixes_to"><B>mixes 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
  lookup</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
  lookup</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
  as</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Nillable"><EM>Nillable</EM></A>? 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
  ( <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> ) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>QName</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_attr_qname_expands_to"><B>of 
  attr expands to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>QName</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
  elem/type expands to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>QName</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_func_qname_expands_to"><B>of 
  func expands to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <EM>QName</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_var_qname_expands_to"><B>of 
  var expands to</B></A> <EM>Variable</EM></P>
  <LI>
  <P><A 
  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
  type for</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>and</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
  size=2>2</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>is</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
  size=2>3</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
  { <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
  }</P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
  annotate as</B></A> <EM>SimpleType</EM> ( <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
  ) <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
  erases to</B></A> <EM>String</EM></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_substitutes_for"><B>substitutes 
  for</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_attribute_static_lookup"><B>type 
  lookup</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_static_lookup"><B>type 
  lookup</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>test</B></A> 
  <EM>NodeTest</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>with</B></A> 
  <EM>PrincipalNodeKind</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>of</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test_type"><B>:</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
  <EM>NodeTest</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
  <EM>PrincipalNodeKind</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>1</FONT></SUB> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
  size=2>2</FONT></SUB></P>
  <LI>
  <P><A class=env 
  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
  <A 
  href="REC-xquery-semantics-20070123.htm#doc-xquery-ElementNameOrWildcard"><EM>ElementNameOrWildcard</EM></A> 
  <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>with 
  mode</B></A> <EM>ValidationMode</EM> <A class=judgment 
  href="REC-xquery-semantics-20070123.htm#jd_in_validation_context"><B>resolves 
  to</B></A> <A 
  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></P></LI></UL></DIV>
<DIV class=div1>
<H2><A id=sec_functions_and_operators name=sec_functions_and_operators></A>C 
Functions and Operators</H2>
<DIV class=div2>
<H3><A id=sec_used_functions name=sec_used_functions></A>C.1 Functions and 
Operators used in the Formal Semantics</H3>
<P>Here is the list of functions from the <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> document that are used in the [XPath/XQuery] Formal 
Semantics:</P>
<UL>
  <LI>
  <P id=func-add-dayTimeDurations><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-dayTimeDurations">Section 
  10.6.6 op:add-dayTimeDurations</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-dayTimeDuration-to-dateTime><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-dateTime">Section 
  10.8.5 op:add-dayTimeDuration-to-dateTime</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-dayTimeDuration-to-date><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-date">Section 
  10.8.9 op:add-dayTimeDuration-to-date</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-dayTimeDuration-to-time><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-time">Section 
  10.8.12 op:add-dayTimeDuration-to-time</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-yearMonthDurations><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-yearMonthDurations">Section 
  10.6.1 op:add-yearMonthDurations</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-yearMonthDuration-to-dateTime><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-yearMonthDuration-to-dateTime">Section 
  10.8.4 
op:add-yearMonthDuration-to-dateTime</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-add-yearMonthDuration-to-date><A 
  href="http://www.w3.org/TR/xpath-functions/#func-add-yearMonthDuration-to-date">Section 
  10.8.8 op:add-yearMonthDuration-to-date</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-boolean-equal><A 
  href="http://www.w3.org/TR/xpath-functions/#func-boolean-equal">Section 9.2.1 
  op:boolean-equal</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-boolean-greater-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-boolean-greater-than">Section 
  9.2.3 op:boolean-greater-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-boolean-less-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-boolean-less-than">Section 
  9.2.2 op:boolean-less-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-boolean><A 
  href="http://www.w3.org/TR/xpath-functions/#func-boolean">Section 15.1.1 
  fn:boolean</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-compare><A 
  href="http://www.w3.org/TR/xpath-functions/#func-compare">Section 7.3.2 
  fn:compare</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-concatenate><A 
  href="http://www.w3.org/TR/xpath-functions/#func-concatenate">Section 15.1.2 
  op:concatenate</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-count><A 
  href="http://www.w3.org/TR/xpath-functions/#func-count">Section 15.4.1 
  fn:count</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-dateTime-equal><A 
  href="http://www.w3.org/TR/xpath-functions/#func-dateTime-equal">Section 
  10.4.6 op:dateTime-equal</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-dateTime-greater-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-dateTime-greater-than">Section 
  10.4.8 op:dateTime-greater-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-dateTime-less-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-dateTime-less-than">Section 
  10.4.7 op:dateTime-less-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-dayTimeDuration-greater-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-dayTimeDuration-greater-than">Section 
  10.4.4 op:dayTimeDuration-greater-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-dayTimeDuration-less-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-dayTimeDuration-less-than">Section 
  10.4.3 op:dayTimeDuration-less-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-divide-dayTimeDuration><A 
  href="http://www.w3.org/TR/xpath-functions/#func-divide-dayTimeDuration">Section 
  10.6.9 op:divide-dayTimeDuration</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-divide-yearMonthDuration><A 
  href="http://www.w3.org/TR/xpath-functions/#func-divide-yearMonthDuration">Section 
  10.6.4 op:divide-yearMonthDuration</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-data><A 
  href="http://www.w3.org/TR/xpath-functions/#func-data">Section 2.4 
  fn:data</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-empty><A 
  href="http://www.w3.org/TR/xpath-functions/#func-empty">Section 15.1.4 
  fn:empty</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-error><A 
  href="http://www.w3.org/TR/xpath-functions/#func-error">Section 3 The Error 
  Function</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-except><A 
  href="http://www.w3.org/TR/xpath-functions/#func-except">Section 15.3.4 
  op:except</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-false><A 
  href="http://www.w3.org/TR/xpath-functions/#func-false">Section 9.1.2 
  fn:false</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-intersect><A 
  href="http://www.w3.org/TR/xpath-functions/#func-intersect">Section 15.3.3 
  op:intersect</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-is-same-node><A 
  href="http://www.w3.org/TR/xpath-functions/#func-is-same-node">Section 14.6 
  op:is-same-node</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-last><A 
  href="http://www.w3.org/TR/xpath-functions/#func-last">Section 16.2 
  fn:last</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-multiply-dayTimeDuration><A 
  href="http://www.w3.org/TR/xpath-functions/#func-multiply-dayTimeDuration">Section 
  10.6.8 op:multiply-dayTimeDuration</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-multiply-yearMonthDuration><A 
  href="http://www.w3.org/TR/xpath-functions/#func-multiply-yearMonthDuration">Section 
  10.6.3 op:multiply-yearMonthDuration</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-node-after><A 
  href="http://www.w3.org/TR/xpath-functions/#func-node-after">Section 14.8 
  op:node-after</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-node-before><A 
  href="http://www.w3.org/TR/xpath-functions/#func-node-before">Section 14.7 
  op:node-before</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-NOTATION-equal><A 
  href="http://www.w3.org/TR/xpath-functions/#func-NOTATION-equal">Section 
  13.1.1 op:NOTATION-equal</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-not><A 
  href="http://www.w3.org/TR/xpath-functions/#func-not">Section 9.3.1 
  fn:not</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-add><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-add">Section 6.2.1 
  op:numeric-add</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-divide><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-divide">Section 6.2.4 
  op:numeric-divide</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-equal><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-equal">Section 6.3.1 
  op:numeric-equal</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-greater-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-greater-than">Section 
  6.3.3 op:numeric-greater-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-less-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-less-than">Section 
  6.3.2 op:numeric-less-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-mod><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-mod">Section 6.2.6 
  op:numeric-mod</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-multiply><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-multiply">Section 
  6.2.3 op:numeric-multiply</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-subtract><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-subtract">Section 
  6.2.2 op:numeric-subtract</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-unary-minus><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-unary-minus">Section 
  6.2.8 op:numeric-unary-minus</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-numeric-unary-plus><A 
  href="http://www.w3.org/TR/xpath-functions/#func-numeric-unary-plus">Section 
  6.2.7 op:numeric-unary-plus</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-position><A 
  href="http://www.w3.org/TR/xpath-functions/#func-position">Section 16.1 
  fn:position</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-QName-equal><A 
  href="http://www.w3.org/TR/xpath-functions/#func-QName-equal">Section 11.2.1 
  op:QName-equal</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-root><A 
  href="http://www.w3.org/TR/xpath-functions/#func-root">Section 14.9 
  fn:root</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-round><A 
  href="http://www.w3.org/TR/xpath-functions/#func-round">Section 6.4.4 
  fn:round</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subsequence><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subsequence">Section 15.1.10 
  fn:subsequence</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-dayTimeDuration-from-dateTime><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-dateTime">Section 
  10.8.7 
  op:subtract-dayTimeDuration-from-dateTime</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-dayTimeDuration-from-date><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-date">Section 
  10.8.11 
  op:subtract-dayTimeDuration-from-date</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-dayTimeDuration-from-time><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-time">Section 
  10.8.13 
  op:subtract-dayTimeDuration-from-time</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-dayTimeDurations><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDurations">Section 
  10.6.7 op:subtract-dayTimeDurations</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-yearMonthDuration-from-dateTime><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-yearMonthDuration-from-dateTime">Section 
  10.8.6 
  op:subtract-yearMonthDuration-from-dateTime</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-yearMonthDuration-from-date><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-yearMonthDuration-from-date">Section 
  10.8.10 
  op:subtract-yearMonthDuration-from-date</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-subtract-yearMonthDurations><A 
  href="http://www.w3.org/TR/xpath-functions/#func-subtract-yearMonthDurations">Section 
  10.6.2 op:subtract-yearMonthDurations</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-to><A href="http://www.w3.org/TR/xpath-functions/#func-to">Section 
  15.5.1 op:to</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-true><A 
  href="http://www.w3.org/TR/xpath-functions/#func-true">Section 9.1.1 
  fn:true</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-union><A 
  href="http://www.w3.org/TR/xpath-functions/#func-union">Section 15.3.2 
  op:union</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-yearMonthDuration-greater-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-yearMonthDuration-greater-than">Section 
  10.4.2 op:yearMonthDuration-greater-than</A><SUP><SMALL>FO</SMALL></SUP></P>
  <LI>
  <P id=func-yearMonthDuration-less-than><A 
  href="http://www.w3.org/TR/xpath-functions/#func-yearMonthDuration-less-than">Section 
  10.4.1 
op:yearMonthDuration-less-than</A><SUP><SMALL>FO</SMALL></SUP></P></LI></UL></DIV>
<DIV class=div2>
<H3><A id=sec_operators name=sec_operators></A>C.2 Mapping of Overloaded 
Internal Functions</H3>
<P>This section gives the semantics specific to overloaded internal functions 
(with prefix <EM>fs:</EM>) that are used to define overloaded XQuery operators 
(with prefix <EM>op:</EM>), such as comparison expressions or arithmetic 
expressions. Static typing for those functions are defined over unions of 
(possibly optional) atomic types. The semantics is obtained in three steps. 
First, a rule is applied to deal with the union of those (possibly optional) 
atomic types. A second set of rules treat the cases where one of the operands of 
those functions is the empty type (resp. empty sequence) or optional. Finally, a 
final rule deals with type promotion and access to an operators mapping table 
which maps the overloaded internal functions to the appropriate operator 
functions defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A> and give the corresponding type.</P>
<P><B>Notation</B></P>
<P>The following auxiliary grammar production describe optional atomic 
types.</P>
<H5><A id=N278CF name=N278CF></A>OptAtomicType</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OptAtomicType 
      name=doc-fs-OptAtomicType></A>[<SMALL>73&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OptAtomicType</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName">AtomicTypeName</A> 
      | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName">AtomicTypeName</A> 
      "?") | "empty"</CODE></TD></TR></TBODY></TABLE>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_static">Static 
Type Analysis</A></B></P>
<P>The following static typing rules apply generically to all the <EM>fs:</EM> 
special functions. They do not apply to any other function calls, which are 
treated in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>.</P>
<P>First, if the static type of one or several of the expressions passed as 
argument is a union of atomic types, the function call is type checked once 
separately for each atomic type in that union. The static type of the entire 
function call expression is then the union of the types computed in each 
case.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB><SUB><FONT size=2>,1</FONT></SUB>|...|<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB><SUB><FONT size=2>,1</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB> = (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB><SUB><FONT size=2>,n</FONT></SUB>|...|<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB><SUB><FONT size=2>,n</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB><SUB><FONT size=2>,1</FONT></SUB>,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB><SUB><FONT size=2>,n</FONT></SUB>) <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD>...</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB><SUB><FONT size=2>,1</FONT></SUB>,..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>m</FONT></SUB><SUB><FONT size=2>,n</FONT></SUB>) <A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>, ..., <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>n</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'|...|<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptAtomicType"><EM>OptAtomicType</EM></A><SUB><FONT 
                  size=2>r</FONT></SUB>')</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B>Note</B></P>
<P>Note that this approach can be used since the type declared for a function 
parameter is never itself be a union.</P>
<P>The following rules deal with optional arguments. In the case of binary 
operators, if either one of the types of the operands is empty, the resulting 
type is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P>If either one of the types of the operands is optional, the type obtained by 
propagating the optional occurrence indicator.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> = <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>?</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>3</FONT></SUB>?</TD></TR></TBODY></TABLE><BR></DIV>
<P>In the case of unary operators, if the type of the operand is empty, the 
resulting type is empty.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> = 
      empty</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <EM><A 
      href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></EM>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
      empty</TD></TR></TBODY></TABLE><BR></DIV>
<P>Finally, the resulting type is obtained by performing type promotion and 
accessing the operators mapping table (using the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
type for</B></A> judgment defined below).</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
                  type for</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>and</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>,<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_can_be_promoted_to"><B>can 
                  be promoted to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
                  type for</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>is</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A> 
                  <B>&nbsp;|-&nbsp;</B> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>(<A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_has_type"><B>:</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR></DIV>
<P><B><A class=processing 
href="REC-xquery-semantics-20070123.htm#processing_dynamic">Dynamic 
Evaluation</A></B></P>
<P>Each <CODE>fs:</CODE> overloaded operator maps to the corresponding 
equivalent overloaded <CODE>op:</CODE> operator, as defined in <A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>, and deals with the case where one of the operands is the 
empty sequence.</P>
<P>The dynamic semantics of the <CODE>fs:</CODE> operator is similar to using 
the following user-defined function.</P>
<TABLE>
  <TBODY>
  <TR>
    <TD><CODE>declare function</CODE> <EM>fs:opname</EM><CODE>($x1 as 
      xs:anyAtomicType?, $x2 as xs:anyAtomicType?) as xs:anyAtomicType? 
    {</CODE></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;<CODE>if (fn:empty($x1) or fn:empty($x2)) then () 
      else</CODE> <FONT size=6>[</FONT><EM>fs:opname($x1,$x2)</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_overloaded_op"><SUB><FONT 
      size=2>OverloadedOp</FONT></SUB></A></TD></TR>
  <TR>
    <TD><CODE>};</CODE></TD></TR></TBODY></TABLE>
<P>Where <FONT size=6>[</FONT><EM>fs:opname()</EM><FONT size=6>]</FONT><A 
class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_overloaded_op"><SUB><FONT 
size=2>OverloadedOp</FONT></SUB></A> maps to the corresponding op: operator in 
<A 
href="REC-xquery-semantics-20070123.htm#xpath-functions">[Functions 
and Operators]</A>, as defined in the table below.</P>
<P><B>Notation</B></P>
<P>The operators mapping table is given below. The table is used to define the 
following auxiliary mapping rules and judgments.</P>
<P id=jd_map_overloaded_op>The mapping rule for binary and unary operators</P>
<DIV align=center><FONT size=6>[</FONT><EM>fs:opname1(</EM>Expr<SUB><FONT 
size=2>1</FONT></SUB>,<EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>)<FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_overloaded_op"><SUB><FONT 
size=2>OverloadedOp</FONT></SUB></A> == <EM>op:opname2(</EM>Expr<SUB><FONT 
size=2>1</FONT></SUB>,<EM>Expr</EM><SUB><FONT size=2>2</FONT></SUB>)</DIV>
<P>and</P>
<DIV align=center><FONT size=6>[</FONT><EM>fs:opname1(</EM>Expr<SUB><FONT 
size=2>1</FONT></SUB>)<FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_overloaded_op"><SUB><FONT 
size=2>OverloadedOp</FONT></SUB></A> == <EM>op:opname2(</EM>Expr<SUB><FONT 
size=2>1</FONT></SUB>)</DIV>
<P>where the operator depends on the type of each value returned by 
<EM>Expr</EM><SUB><FONT size=2>1</FONT></SUB> and <EM>Expr</EM><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P id=jd_operator_type_for>The judgments for binary and unary operators</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
type for</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>and</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>is</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>3</FONT></SUB></DIV>
<P>and</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>operator 
type for</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_operator_type_for"><B>is</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>3</FONT></SUB></DIV>
<P>hold when the operator table indicates that the operator <A 
href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A> 
has the output type <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>3</FONT></SUB> for the input types <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P>Note that in the following table, all numeric functions are applied to 
operands with the same type. Values are promoted to compatible types using the 
function call semantics given in <A 
href="REC-xquery-semantics-20070123.htm#id-function-calls"><B>[4.1.5 
Function Calls]</B></A>.</P>
<P><B>Gregorian</B> refers to the types <CODE>xs:gYearMonth</CODE>, 
<CODE>xs:gYear</CODE>, <CODE>xs:gMonthDay</CODE>, <CODE>xs:gDay</CODE>, and 
<CODE>xs:gMonth</CODE>. For binary operators that accept two Gregorian-type 
operands, both operands must have the same type (for example, if one operand is 
of type <CODE>xs:gDay</CODE>, the other operand must be of type 
<CODE>xs:gDay</CODE>.)</P>
<TABLE border=1>
  <CAPTION>Binary Operators</CAPTION>
  <TBODY>
  <TR>
    <TH><SMALL>Internal Function</SMALL></TH>
    <TH><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></SMALL></TH>
    <TH><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></SMALL></TH>
    <TH><SMALL>Denotes</SMALL></TH>
    <TH><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></SMALL></TH></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-add(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-add(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-add(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-add(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-yearMonthDuration-to-date(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:add-yearMonthDuration-to-date(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-date(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-date(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-time(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-time(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-yearMonthDuration-to-dateTime(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:add-yearMonthDuration-to-dateTime(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-dateTime(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDuration-to-dateTime(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-yearMonthDurations(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>plus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:add-dayTimeDurations(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-subtract(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-subtract(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-subtract(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-subtract(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>fn:subtract-dates(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-yearMonthDuration-from-date(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-dayTimeDuration-from-date(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>fn:subtract-times(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-dayTimeDuration-from-time(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>fn:subtract-dateTimes(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-yearMonthDuration-from-dateTime(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-dayTimeDuration-from-dateTime(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-yearMonthDurations(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>minus</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:subtract-dayTimeDurations(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-multiply(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-multiply(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-multiply(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-multiply(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:multiply-yearMonthDuration(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:multiply-yearMonthDuration(B, A)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:multiply-dayTimeDuration(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>times</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:multiply-dayTimeDuration(B, A)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>idiv</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:integer-div(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-divide(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-divide(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-divide(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-divide(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:divide-yearMonthDuration(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:divide-dayTimeDuration(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:divide-yearMonthDuration-by-yearMonthDuration(A, 
    B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>div</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:divide-dayTimeDuration-by-dayTimeDuration(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>mod</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-mod(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>mod</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-mod(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>mod</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-mod(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>mod</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-mod(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL>op:boolean-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-equal(fn:compare(A, B), 0)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:date-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:time-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:dateTime-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:duration</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:duration</CODE></SMALL></TD>
    <TD><SMALL>op:duration-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL>Gregorian</SMALL></TD>
    <TD><SMALL>Gregorian</SMALL></TD>
    <TD><SMALL>op:gYear-equal(A, B) etc.</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:hexBinary</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:hexBinary</CODE></SMALL></TD>
    <TD><SMALL>op:hex-binary-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:base64Binary</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:base64Binary</CODE></SMALL></TD>
    <TD><SMALL>op:base64-binary-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:anyURI</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:anyURI</CODE></SMALL></TD>
    <TD><SMALL>op:anyURI-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:QName</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:QName</CODE></SMALL></TD>
    <TD><SMALL>op:QName-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>eq</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:NOTATION</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:NOTATION</CODE></SMALL></TD>
    <TD><SMALL>op:NOTATION-equal(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:numeric-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:numeric-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:numeric-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:numeric-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:boolean-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:numeric-equal(fn:compare(A, B), 
      0))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:date-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:time-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:dateTime-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:duration</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:duration</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:duration-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL>Gregorian</SMALL></TD>
    <TD><SMALL>Gregorian</SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:gYear-equal(A, B)) etc.</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:hexBinary</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:hexBinary</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:hex-binary-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:base64Binary</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:base64Binary</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:base64-binary-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:anyURI</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:anyURI</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:anyURI-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:QName</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:QName</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:QName-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ne</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:NOTATION</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:NOTATION</CODE></SMALL></TD>
    <TD><SMALL><CODE>fn:not</CODE>(op:NOTATION-equal(A, B))</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL>op:boolean-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(<CODE>fn:compare</CODE>(A, B), 
      0)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:date-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:time-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:dateTime-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:yearMonthDuration-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>gt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:dayTimeDuration-greater-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL>op:boolean-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(<CODE>fn:compare</CODE>(A, B), 
    0)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:date-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:time-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:dateTime-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:yearMonthDuration-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>lt</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:dayTimeDuration-less-than(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B) or 
    op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B) or 
    op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B) or 
    op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B) or 
    op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(A, B) or 
    op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-greater-than(<CODE>fn:compare</CODE>(A, B), 
      -1)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:date-less-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:time-less-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:dateTime-less-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:yearMonthDuration-less-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>ge</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:dayTimeDuration-less-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B) or op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B) or op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B) or op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B) or op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(A, B) or op:numeric-equal(A,B)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:string</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-less-than(<CODE>fn:compare</CODE>(A, B), 
    1)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:date</CODE></SMALL></TD>
    <TD><SMALL>op:date-greater-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:time</CODE></SMALL></TD>
    <TD><SMALL>op:time-greater-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:dateTime</CODE></SMALL></TD>
    <TD><SMALL>op:dateTime-greater-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:yearMonthDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:yearMonthDuration-greater-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>le</CODE>(A, B)</SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_durations"><CODE>xs:dayTimeDuration</CODE></A></SMALL></TD>
    <TD><SMALL>op:dayTimeDuration-greater-than(B, A)</SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>is-same-node</CODE>(A, B)</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL><CODE>op:is-same-node</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>node-before</CODE>(A, B)</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL><CODE>op:node-before</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>node-after</CODE>(A, B)</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL>node()</SMALL></TD>
    <TD><SMALL><CODE>op:node-after</CODE></SMALL></TD>
    <TD><SMALL><CODE>xs:boolean</CODE></SMALL></TD></TR></TBODY></TABLE>
<TABLE summary="Unary operators" border=1>
  <CAPTION>Unary Operators</CAPTION>
  <TBODY>
  <TR>
    <TH><SMALL>Internal Function</SMALL></TH>
    <TH><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>1</FONT></SUB></SMALL></TH>
    <TH><SMALL>Denotes</SMALL></TH>
    <TH><SMALL><A 
      href="REC-xquery-semantics-20070123.htm#doc-core-AtomicType"><EM>AtomicType</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></SMALL></TH></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-plus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-plus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-plus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-plus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-plus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-plus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-plus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-plus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-minus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-minus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:integer</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-minus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-minus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:decimal</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-minus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-minus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:float</CODE></SMALL></TD></TR>
  <TR>
    <TD><SMALL><EM>fs:</EM><CODE>unary-minus</CODE>(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD>
    <TD><SMALL>op:numeric-unary-minus(A)</SMALL></TD>
    <TD><SMALL><CODE>xs:double</CODE></SMALL></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_importing_schema name=sec_importing_schema></A>D Importing 
Schemas</H2>
<P>This section describes how XML Schema declarations, as specified by XML 
Schema are imported into the [XPath/XQuery] type system.</P>
<DIV class=div2>
<H3><A id=sec_import_intro name=sec_import_intro></A>D.1 Introduction</H3>
<P>During schema import processing, the [XPath/XQuery] environment imports XML 
Schema declarations and loads them as declarations in the [XPath/XQuery] type 
system. The semantics of that loading process is defined by normalization rules 
that map XML Schema descriptions into the [XPath/XQuery] type system.</P>
<DIV class=div3>
<H4><A id=sec_import_features name=sec_import_features></A>D.1.1 Features</H4>
<P>Here is summarized the XML Schema features which are covered by the formal 
semantics, and handled by the import mapping described in this section. For each 
feature, the following indications are used.</P>
<UL>
  <LI>
  <P><B>Handled</B> indicates features that are relevant for [XPath/XQuery], are 
  modeled in the [XPath/XQuery] type system, and are supported by the 
  mapping.</P>
  <LI>
  <P><B>Not in v1.0</B> indicates features that are relevant to [XPath/XQuery], 
  but are not yet modeled in the [XPath/XQuery] type system or are not handled 
  by the mapping in XQuery V1.0. In case the [XPath/XQuery] type system provides 
  appropriate support for those features, but the mapping is incomplete, the 
  additional annotation <B>mapping only</B> is used.</P>
  <LI>
  <P><B>Not handled</B> indicates features that are relevant for [XPath/XQuery], 
  but are not modeled in the [XPath/XQuery] type system, and are not handled by 
  the mapping. Such features are typically only related to validation, for which 
  the formal semantics defines a partial model.</P>
  <LI>
  <P><B>Ignored</B> Indicates features that are not relevant for [XPath/XQuery], 
  are not modeled in the [XPath/XQuery] type system, and are not relevant for 
  the mapping. Such features might have to do with documentation of the schema, 
  or might affect which Schemas are legal, but do not affect which documents 
  match which Schemas.</P></LI></UL>
<P>Here is the exhaustive list of XML Schema features and their status in this 
document.</P>
<TABLE class=figure summary="">
  <COLGROUP>
  <COL align=left>
  <COL align=middle>
  <COL align=left>
  <TBODY>
  <TR>
    <TD><B>Feature:</B></TD>
    <TD><B>Supported</B></TD></TR>
  <TR>
    <TD>Primitive Simple types</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>Simple type derivation by restriction</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>Derivation by list and union</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>Facets on simple types</TD>
    <TD>Not handled</TD></TR>
  <TR>
    <TD>ID and IDREF constraints</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>Attribute Declarations</TD>
    <TD></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;default,fixed,use</TD>
    <TD>Not in v1.0</TD></TR>
  <TR>
    <TD>Element Declarations</TD>
    <TD></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;default, fixed (value constraint)</TD>
    <TD>Not in v1.0</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;nillable</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;substitution group affiliation</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;substitution group exclusions</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;disallowed substitutions</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;abstract</TD>
    <TD>Not in v1.0</TD></TR>
  <TR>
    <TD>Complex Type Definitions</TD>
    <TD></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;derivation by restriction</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;derivation by extension</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;final</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;abstract</TD>
    <TD>Not in v1.0</TD></TR>
  <TR>
    <TD>AttributeUses</TD>
    <TD></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;required</TD>
    <TD>Not in v1.0, mapping only</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;default, fixed (value constraint)</TD>
    <TD>Not in v1.0</TD></TR>
  <TR>
    <TD>Attribute Group Definitions</TD>
    <TD>Not in v1.0, mapping only</TD></TR>
  <TR>
    <TD>Model Group Definitions</TD>
    <TD>Not in v1.0, mapping only</TD></TR>
  <TR>
    <TD>Model Groups</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>Particles</TD>
    <TD>Handled</TD></TR>
  <TR>
    <TD>Wildcards</TD>
    <TD></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;process contents strict, skip, lax</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;namespace wild cards.</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>Identity-constraint Definitions</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>Notation Declarations</TD>
    <TD>Ignored</TD></TR>
  <TR>
    <TD>Annotations</TD>
    <TD>Ignored</TD></TR></TBODY></TABLE>
<P>Note that the schema import feature specified here assumes it is given a 
legal schema as input. As a result, it is not necessary to check for 'block' or 
'abstract' attributes.</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_organization name=sec_import_organization></A>D.1.2 
Organization</H4>
<P>The presentation of the schema mapping is done according to the following 
organization.</P>
<P><B>Schema component</B></P>
<P>First each schema component is summarized using the same notation used in the 
XML Representation Summary sections in XML Schema. For instance, here is the XML 
Representation Summary for complex types.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;complexType</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> abstract = boolean : false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> block = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> final = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mixed = boolean : 
  false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any schemaAttributes with non-schema namespace ...} 
    &gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleContent | complexContent | ((group | all | choice | sequence)?, 
      ((schemaAttribute | schemaAttributeGroup)*, anySchemaAttribute?))))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/complexType&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Attributes indicated as <B>[ ignored ]</B> are not mapped into the 
[XPath/XQuery] type system.</P>
<P>Attributes indicated as <B>[ not handled ]</B> are not currently handled by 
the mapping.</P>
<P>Note that in order to simplify the mapping, it is assumed that the default 
values for all attributes in the XML Representation of Schema are filled in. For 
instance in the above complex type, if the <CODE>mixed</CODE> attribute is not 
present, it will be treated as being present and having the value 
<CODE>"false"</CODE>.</P>
<P><B>Schema mapping</B></P>
<P>XML Schema import is specified by means of mapping rules. All mapping rules 
have the structure below.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SchemaComponent</EM><FONT size=6>]</FONT><SUB><FONT 
      size=2>Subscript</FONT></SUB></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>TypeComponent</EM></TD></TR></TBODY></TABLE></DIV>
<P>The <EM>SchemaComponent</EM> above the horizontal rule denotes an XML Schema 
component before translation and the <EM>TypeComponent</EM> beneath the 
horizontal rule denotes an equivalent type component in the [XPath/XQuery] type 
system.</P>
<P><B>Notation</B></P>
<P>Whenever necessary for the mapping rules, specific grammar productions which 
describe fragments of XML Schema may be introduced. For instance, here are 
grammar productions used to describes fragments of the XML Representation 
Summary for the complexType Element Information Item.</P>
<H5><A id=N29380 name=N29380></A>Complex type content</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N282DF.doc-fs-ComplexTypeContent 
      name=noid_N282DF.doc-fs-ComplexTypeContent></A>[<SMALL>57&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ComplexTypeContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"annotation"? ("simpleContent" | "complexContent" | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ChildrenContent">ChildrenContent</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContent">AttributeContent</A>))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N282E5.doc-fs-AttributeContent 
      name=noid_N282E5.doc-fs-AttributeContent></A>[<SMALL>60&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("attribute" | "attributeGroup")* 
  "anyAttribute"?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=noid_N282EB.doc-fs-ChildrenContent 
      name=noid_N282EB.doc-fs-ChildrenContent></A>[<SMALL>58&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ChildrenContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("group" | "all" | "choice" | 
"sequence")?</CODE></TD></TR></TBODY></TABLE>
<P>As in the rest of this document, some mapping rules may use fragments of the 
XML Representation corresponding to the syntactic categories defined by those 
grammar productions. For instance, the following complex type fragment uses the 
syntactic categories: <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>, 
<EM>ComplexTypeContent</EM>, and <EM>AttributeContent</EM>, 
<EM>ChildrenContent</EM>, and <EM>MixedAttribute</EM>.</P>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;complexType</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <EM>MixedAttribute</EM> 
    &gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<EM>ChildrenContent</EM> 
      <EM>AttributeContent</EM></TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/complexType&gt;</TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_import_mapping name=sec_import_mapping></A>D.1.3 Main mapping 
rules</H4>
<P><B>Notation</B></P>
<P id=jd_map_schema>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Schema</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
      size=2>Schema</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>Definitions</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps a complete schema into a set of <EM>Definitions</EM> in the 
[XPath/XQuery] type system.</P>
<P id=jd_map_definition>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SchemaComponent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps a top level schema component into a <A 
href="REC-xquery-semantics-20070123.htm#sec_top_level_definitions"><EM>Definition</EM></A> 
in the [XPath/XQuery] type system, given the target namespace 
<EM>target</EM><EM>AnyURI</EM>.</P>
<P id=jd_map_content>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SchemaComponent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>TypeComponent</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps a schema component not directly under the schema element, into a 
<EM>TypeComponent</EM> in the [XPath/XQuery] type system, given the target 
namespace <EM>target</EM><EM>AnyURI</EM>.</P></DIV>
<DIV class=div3>
<H4><A id=sec_use name=sec_use></A>D.1.4 Special attributes</H4>
<P>The XML Schema attributes: use, default, fixed, minOccurs, maxOccurs, mixed, 
nillable, and substitutionGroup, require specific mapping rules.</P>
<DIV class=div4>
<H5><A id=sec_import_attributes name=sec_import_attributes></A>D.1.4.1 use, 
default, and fixed</H5>
<P>The "use", "default", and "fixed" attributes are used to describe the 
occurrence and default behavior of a given attribute.</P>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe the "use", 
"default", and "fixed" attributes.</P>
<H5><A id=N2948E name=N2948E></A>Use, default, and fixed attributes</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-UseAttribute 
      name=doc-fs-UseAttribute></A>[<SMALL>61&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>UseAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"use" "=" ("optional" | "prohibited" | 
  "required")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-DefaultAttribute 
      name=doc-fs-DefaultAttribute></A>[<SMALL>62&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>DefaultAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"default" "=" String</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-FixedAttribute 
      name=doc-fs-FixedAttribute></A>[<SMALL>63&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>FixedAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"fixed" "=" String</CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_use>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>UseAttribute</EM> <EM>DefaultAttribute</EM>? 
      <EM>FixedAttribute</EM>? <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>OccurrenceIndicator</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps a combination of a use attribute <EM>UseAttribute</EM>, along with an 
optional default or fixed attribute in Schema into the occurrence indicator 
<EM>OccurrenceIndicator</EM> in the [XPath/XQuery] type system.</P>
<P><B>Schema mapping</B></P>
<P>Use attributes are mapped to the type system in the following way. In case 
there is a default or fixed attribute, the attribute is always present in the 
PSVI and the use attribute is ignored.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>UseAttribute</EM> 
      <EM>DefaultAttribute</EM><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>1</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><EM>UseAttribute</EM> 
      <EM>FixedAttribute</EM><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>1</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>use = "optional"<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>?</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>use = "required"<A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>1</TD></TR></TBODY></TABLE></DIV>
<TABLE summary="Editorial note" border=1>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="50%"><B>Editorial note</B></TD>
    <TD vAlign=top align=right width="50%">&nbsp;</TD></TR>
  <TR>
    <TD vAlign=top align=left colSpan=2>Issue: how derivation of attribute 
      declaration and the "prohibited" use attributes are mapped in the 
      [XPath/XQuery] type system is still an open 
issue.</TD></TR></TBODY></TABLE></DIV>
<DIV class=div4>
<H5><A id=prod-formal-OccursAttributes 
name=prod-formal-OccursAttributes></A>D.1.4.2 minOccurs, maxOccurs, minLength, 
maxLength, and length</H5>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe occurrence 
attributes and the length facets.</P>
<H5><A id=N2954B name=N2954B></A>Occurrence attributes</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-OccursAttributes 
      name=doc-fs-OccursAttributes></A>[<SMALL>56&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>OccursAttributes</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-maxOccurs">maxOccurs</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-minOccurs">minOccurs</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-maxLength">maxLength</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-minLength">minLength</A> 
      | <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-length">length</A></CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-maxOccurs 
      name=doc-fs-maxOccurs></A>[<SMALL>54&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>maxOccurs</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"maxOccurs" "=" ("nonNegativeInteger" | 
  "unbounded")</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-minOccurs 
      name=doc-fs-minOccurs></A>[<SMALL>55&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>minOccurs</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"minOccurs" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-maxLength 
      name=doc-fs-maxLength></A>[<SMALL>51&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>maxLength</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"maxLength" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-minLength 
      name=doc-fs-minLength></A>[<SMALL>52&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>minLength</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"minLength" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-length 
      name=doc-fs-length></A>[<SMALL>53&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>length</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"length" "=" "nonNegativeInteger"</CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_occurs>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>OccurrenceIndicator</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps the occurrence attributes and facets <A 
href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A> 
in Schema into the occurrence indicator <EM>OccurrenceIndicator</EM> in the 
[XPath/XQuery] type system.</P>
<P><B>Schema mapping</B></P>
<P>Occurrence attributes are mapped to the type system in the following way.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minOccurs="0" maxOccurs="1"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>?</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minOccurs="1" maxOccurs="1"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minOccurs="0" maxOccurs="n"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>*</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minOccurs="1" maxOccurs="n"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>+</TD></TR></TBODY></TABLE></DIV>
<P>where n &gt; 1.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minOccurs="n" maxOccurs="m"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>+</TD></TR></TBODY></TABLE></DIV>
<P>where m &gt;= n &gt; 1</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minLength="0" maxLength="1"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>?</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minLength="1" maxLength="1"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minLength="0" maxLength="n"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>*</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minLength="1" maxLength="n"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>+</TD></TR></TBODY></TABLE></DIV>
<P>where n &gt; 1.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>minLength="n" maxLength="m"<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>+</TD></TR></TBODY></TABLE></DIV>
<P>where m &gt;= n &gt; 1</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>length="1"<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>length="n"<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>+</TD></TR></TBODY></TABLE></DIV>
<P>where n &gt; 1</P></DIV>
<DIV class=div4>
<H5><A id=sec_import_mixed name=sec_import_mixed></A>D.1.4.3 mixed</H5>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe the "mixed" 
attribute.</P>
<H5><A id=N296EA name=N296EA></A>Mixed attribute</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-MixedAttribute 
      name=doc-fs-MixedAttribute></A>[<SMALL>48&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>MixedAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"mixed" "=" Boolean</CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_mixed>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>MixedAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed"><SUB><FONT 
      size=2>mixed</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Mixed"><EM>Mixed</EM></A></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps the mixed attribute <EM>MixedAttribute</EM> in Schema into a <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Mixed"><EM>Mixed</EM></A> 
notation in the [XPath/XQuery] type system.</P>
<P><B>Schema mapping</B></P>
<P>If the mixed attribute is true it is mapped to a mixed notation in the 
[XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> mixed = 
      "true" <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed"><SUB><FONT 
      size=2>mixed</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>mixed</TD></TR></TBODY></TABLE></DIV>
<P>If the mixed attribute is false it is mapped to empty in the [XPath/XQuery] 
type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> mixed = 
      "false" <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed"><SUB><FONT 
      size=2>mixed</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_import_nillable name=sec_import_nillable></A>D.1.4.4 nillable</H5>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe the 
"nillable" attribute.</P>
<H5><A id=N2976C name=N2976C></A>Nillable attribute</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-NillableAttribute 
      name=doc-fs-NillableAttribute></A>[<SMALL>49&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>NillableAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"nillable" "=" Boolean</CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_nillable>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>NillableAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Nillable"><EM>Nillable</EM></A></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps the nillable attribute <EM>NillableAttribute</EM> in Schema into a <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Nillable"><EM>Nillable</EM></A> 
notation in the [XPath/XQuery] type system.</P>
<P><B>Schema mapping</B></P>
<P>If the nillable attribute is true it is mapped to a nillable notation in the 
[XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> nillable 
      = "true" <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle>nillable</TD></TR></TBODY></TABLE></DIV>
<P>If the nillable attribute is false it is mapped to empty in the 
[XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> nillable 
      = "false" <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
align=middle></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_import_substitution name=sec_import_substitution></A>D.1.4.5 
substitutionGroup</H5>
<P><B>Notation</B></P>
<P>The substitution group declaration indicates the element that a given element 
can be substituted for. The following auxiliary grammar productions are used to 
describe the "substitutionGroup" attribute.</P>
<H5><A id=N297EE name=N297EE></A>substitutionGroup attribute</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-substitutionGroupAttribute 
      name=doc-fs-substitutionGroupAttribute></A>[<SMALL>50&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>substitutionGroupAttribute</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"substitutionGroup" "=" <A 
      href="REC-xquery-semantics-20070123.htm#prod-core-QName">QName</A></CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_substitution>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>substitutionGroupAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_substitution"><SUB><FONT 
      size=2>substitution</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>Substitution</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps the substitutionGroup attribute <EM>substitutionGroupAttribute</EM> in 
Schema into a <EM>Substitution</EM> notation in the [XPath/XQuery] type 
system.</P>
<P><B>Schema mapping</B></P>
<P>If the substitutionGroup attribute is present, it is mapped to a 
substitutionGroup notation in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      substitutionGroup = <EM>QName</EM> <FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_substitution"><SUB><FONT 
      size=2>substitution</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>substitutes for 
    <EM>QName</EM></TD></TR></TBODY></TABLE></DIV>
<P>Otherwise, it is mapped to empty.</P></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_anonymous name=sec_import_anonymous></A>D.1.5 Anonymous 
type names</H4>
<P><B>Notation</B></P>
<P>As explained in <A 
href="REC-xquery-semantics-20070123.htm#sec_types"><B>[2.4 
The [XPath/XQuery] Type System]</B></A>, the [XPath/XQuery] type uses 
system-generated type names for anonymous types. For the purpose of this 
document those type names are generated at XML Schema import 
time.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_schema_as_a_whole name=sec_schema_as_a_whole></A>D.2 Schemas as a 
whole</H3>
<DIV class=div3>
<H4><A id=sec_import_whole name=sec_import_whole></A>D.2.1 Schema</H4>
<P><B>Schema component</B></P>
<P>A schema is represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;schema</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> attributeFormDefault = (qualified | unqualified) : 
      unqualified</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> blockDefault = (#all | List of (extension | restriction 
      | substitution)) : ' '</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> elementFormDefault = (qualified | unqualified) : 
      unqualified</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> finalDefault = (#all | List of (extension | 
      restriction)) : ' '</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; targetNamespace = 
  anyURI</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> version = token</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> xml:lang = language</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: ((include | import 
      | redefine | annotation)*, (((simpleType | complexType | group | 
      attributeGroup) | element | attribute | notation), annotation*)*)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/schema&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used.</P>
<H5><A id=N2989B name=N2989B></A>XML Schema Pragma and Content</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-SPragma 
      name=doc-fs-SPragma></A>[<SMALL>46&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>SPragma</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("include" | "import" | "redefine" | 
  "annotation")*</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-Content 
      name=doc-fs-Content></A>[<SMALL>47&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Content</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(("simpleType" | "complexType" | "element" | "attribute" | 
      "attributeGroup" | "group" | "notation") 
  "annotation"*)*</CODE></TD></TR></TBODY></TABLE>
<P id=jd_map_pragma>The auxiliary normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Pragma</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_pragma"><SUB><FONT 
      size=2>pragma(targetAnyURI)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" 
  align=middle><EM>Definitions</EM></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps the a schema pragma into a set of definitions in the [XPath/XQuery] type 
system.</P>
<P><B>Schema mapping</B></P>
<P>Schemas are imported by the "schema" declaration in the preamble of a query. 
To import a schema, the document referred to by the given URI is opened and the 
schema declarations contained in the document are translated into the 
corresponding in-line type definitions. The mechanism for finding a schema 
document, possibly using the optional schema location hint, is not specified 
formally.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT>schema 
      <EM>StringLiteral</EM> (at <EM>StringLiteral</EM>)?<FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
      size=2>Schema</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT>open-schema-document(<EM>StringLiteral</EM> (at 
      <EM>StringLiteral</EM>)?)<FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
      size=2>Schema</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;schema</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; targetNamespace = 
            <EM>target</EM><EM>AnyURI</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <EM>Pragma</EM> 
            <EM>Content</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/schema&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_schema"><SUB><FONT 
      size=2>Schema</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>Pragma</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_pragma"><SUB><FONT 
      size=2>pragma(targetAnyURI)</FONT></SUB></A> <FONT 
      size=6>[</FONT><EM>Content</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_include name=sec_import_include></A>D.2.2 Include</H4>
<P><B>Schema component</B></P>
<P>A schema include is represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;include</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; schemaLocation = 
  anyURI</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: 
(annotation?)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/include&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>A schema include is not specified here, and is assumed to be handled by the 
XML Schema processor.</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_redefine name=sec_import_redefine></A>D.2.3 Redefine</H4>
<P><B>Schema component</B></P>
<P>A schema redefinition is represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;redefine</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; schemaLocation = 
  anyURI</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation | 
      (simpleType | complexType | group | attributeGroup))*</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/redefine&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>A schema redefine is not specified here, and is assumed to be handled by the 
XML Schema processor.</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_import name=sec_import_import></A>D.2.4 Import</H4>
<P><B>Schema component</B></P>
<P>A schema import is represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;import</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; namespace = anyURI</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; schemaLocation = 
  anyURI</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: 
(annotation?)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/import&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>A schema import is not specified here, and is assumed to be handled by the 
XML Schema processor.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_attribute_decl name=sec_import_attribute_decl></A>D.3 
Attribute Declarations</H3>
<P><B>Schema component</B></P>
<P>The following structure describes attribute declarations in XML Schema.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;attribute</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> default = string</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> fixed = string</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> form = (qualified | unqualified)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use = (optional | 
      prohibited | required) : optional</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleType?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/attribute&gt;</TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_import_global_attributes 
name=sec_import_global_attributes></A>D.3.1 Global attributes declarations</H4>
<P>Schema import distinguishes between global attribute declarations and local 
attribute declarations.</P>
<P><B>Schema mapping</B></P>
<P>Global attribute declarations are mapped like local attribute declarations, 
but are prefixed by a "define" keyword in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>AttributeDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>define <FONT 
      size=6>[</FONT><EM>AttributeDecl</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_local_attributes name=sec_import_local_attributes></A>D.3.2 
Local attribute declarations</H4>
<P><B>Schema mapping</B></P>
<P>Local attributes whose type is given by a reference to a global type name are 
mapped in the type system as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;attribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type = 
          <EM>QName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <EM>UseAttribute</EM> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( attribute 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> { of type <EM>QName</EM> } 
      )<FONT size=6>[</FONT><EM>UseAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>References to a global attribute are mapped in the type system as 
follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;attribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = 
          <EM>QName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <EM>UseAttribute</EM> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( attribute <EM>QName</EM> 
      )<FONT size=6>[</FONT><EM>UseAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
      size=2>use</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>A local attribute with a local content is mapped to the [XPath/XQuery] type 
system as follows. Let <EM>fs:</EM>anon<SUB><FONT size=2>k</FONT></SUB> be a 
newly generated anonymous name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;attribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <EM>UseAttribute</EM> 
            &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        <EM>simpleType</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/attribute&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>( attribute <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> of 
            type <EM>fs:</EM>anon<SUB><FONT size=2>k</FONT></SUB> )<FONT 
            size=6>[</FONT><EM>UseAttribute</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_use"><SUB><FONT 
            size=2>use</FONT></SUB></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;with</TD></TR>
        <TR>
          <TD>define type <EM>fs:</EM>anon<SUB><FONT size=2>k</FONT></SUB> of 
            type xs:anySimpleType { <FONT 
            size=6>[</FONT><EM>simpleType</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
            size=2>content(targetNCName)</FONT></SUB></A> 
    }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_element name=sec_import_element></A>D.4 Element 
Declarations</H3>
<P><B>Schema component</B></P>
<P>The following structure describes attribute declarations in XML Schema.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;element</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> abstract = boolean : false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> block = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> default = string</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> final = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> fixed = string</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> form = (qualified | unqualified)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nillable = boolean : 
    false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; substitutionGroup = 
  QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      ((simpleType | complexType)?, (unique | key | keyref)*))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/element&gt;</TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_import_global_element name=sec_import_global_element></A>D.4.1 
Global element declarations</H4>
<P>Schema import distinguishes between global element declarations and local 
element declarations.</P>
<P><B>Schema mapping</B></P>
<P>Global element declarations are mapped like local element declarations, but 
are prefixed by a "define" keyword in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>NillableAttribute</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>substitutionGroupAttribute</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type = <EM>QName</EM> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>define element 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
      size=6>[</FONT><EM>substitutionGroupAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_substitution"><SUB><FONT 
      size=2>substitution</FONT></SUB></A> <FONT 
      size=6>[</FONT><EM>NillableAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A> of type 
<EM>QName</EM></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>NillableAttribute</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>substitutionGroupAttribute</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/element&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>define element 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
      size=6>[</FONT><EM>substitutionGroupAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_substitution"><SUB><FONT 
      size=2>substitution</FONT></SUB></A> <FONT 
      size=6>[</FONT><EM>NillableAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A> <FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_local_element name=sec_import_local_element></A>D.4.2 Local 
element declarations</H4>
<P><B>Schema mapping</B></P>
<P>Local element declarations, but mapped into corresponding notations in the 
[XPath/XQuery] type system. Note that substitution group cannot be declared on 
local elements.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>NillableAttribute</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type = <EM>QName</EM> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( element 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
      size=6>[</FONT><EM>NillableAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
      size=2>nillable</FONT></SUB></A> of type <EM>QName</EM> ) <FONT 
      size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = <EM>QName</EM> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( element <EM>QName</EM> ) 
      <FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Let <EM>fs:</EM>anon<SUB><FONT size=2>k</FONT></SUB> be a newly generated 
anonymous name.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
          <EM>NCName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>NillableAttribute</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/element&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>
      <TABLE>
        <TBODY>
        <TR>
          <TD>( element <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
            size=6>[</FONT><EM>NillableAttribute</EM><FONT size=6>]</FONT><A 
            class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_nillable"><SUB><FONT 
            size=2>nillable</FONT></SUB></A> of type <EM>fs:</EM>anon<SUB><FONT 
            size=2>k</FONT></SUB> ) <FONT size=6>[</FONT><A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
            size=6> ]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
            size=2>occurs</FONT></SUB></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;with</TD></TR>
        <TR>
          <TD>define type <EM>fs:</EM>anon<SUB><FONT size=2>k</FONT></SUB> 
            <FONT size=6>[</FONT><A 
            href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A><FONT 
            size=6>]</FONT><A class=judgment 
            href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
            size=2>content(targetNCName)</FONT></SUB></A> 
    }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_complex_type name=sec_complex_type></A>D.5 Complex Type 
Definitions</H3>
<P><B>Schema component</B></P>
<P>A complex type definition is represented in XML by the following 
structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;complexType</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> abstract = boolean : false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> block = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> final = (#all | List of (extension | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mixed = boolean : 
  false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleContent | complexContent | ((group | all | choice | sequence)?, 
      ((attribute | attributeGroup)*, anyAttribute?))))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/complexType&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe the content 
of a complex type definition.</P>
<H5><A id=N29DB2 name=N29DB2></A>Complex type content</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ComplexTypeContent 
      name=doc-fs-ComplexTypeContent></A>[<SMALL>57&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ComplexTypeContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"annotation"? ("simpleContent" | "complexContent" | (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ChildrenContent">ChildrenContent</A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeContent">AttributeContent</A>))</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-AttributeContent 
      name=doc-fs-AttributeContent></A>[<SMALL>60&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>AttributeContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("attribute" | "attributeGroup")* 
  "anyAttribute"?</CODE></TD></TR></TBODY>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-ChildrenContent 
      name=doc-fs-ChildrenContent></A>[<SMALL>58&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>ChildrenContent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>("group" | "all" | "choice" | 
"sequence")?</CODE></TD></TR></TBODY></TABLE>
<DIV class=div3>
<H4><A id=sec_import_global_complex_type 
name=sec_import_global_complex_type></A>D.5.1 Global complex type</H4>
<P>Schema import distinguishes between global complex types (which are mapped to 
sort declarations) and local complex types (which are mapped to type 
definitions).</P>
<P><B>Schema mapping</B></P>
<P>In the case of global complex types, the mapping rule which applies is 
denoted by <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
size=2>definition(targetNCName)</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;complexType</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>MixedAttribute</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
            <EM>NCName</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>ComplexTypeContent</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/complexType&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>define type 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
      size=6>[</FONT><EM>MixedAttribute</EM> <EM>ComplexTypeContent</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Note that the <CODE>mixed</CODE> is passed along in the normalization rules, 
in order to map it later on to the appropriate indication in the [XPath/XQuery] 
type system.</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_local_complex_type 
name=sec_import_local_complex_type></A>D.5.2 Local complex type</H4>
<P><B>Schema mapping</B></P>
<P>In the case of a local complex types, there must not be a name attribute and 
the mapping rule which applies is denoted by <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
size=2>content(targetNCName)</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;complexType</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>MixedAttribute</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>ComplexTypeContent</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/complexType&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>MixedAttribute</EM> <EM>ComplexTypeContent</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>Note that the <CODE>mixed</CODE> is passed along in the normalization rules, 
in order to map it later on to the appropriate indication in the [XPath/XQuery] 
type system.</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_ct_simple name=sec_import_ct_simple></A>D.5.3 Complex type 
with simple content</H4>
<P><B>Schema component</B></P>
<P>A complex type can be of simple content. A simple content is represented in 
XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;simpleContent</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (restriction | extension))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/simpleContent&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by restriction inside a simple content is represented in XML by 
the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleType?, (minExclusive | minInclusive | maxExclusive | maxInclusive | 
      totalDigits | fractionDigits | length | minLength | maxLength | 
      enumeration | whiteSpace | pattern)*)?, ((attribute | attributeGroup)*, 
      anyAttribute?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by extension inside a simple content is represented in XML by the 
following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;extension</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>base</B> = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      ((attribute | attributeGroup)*, anyAttribute?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/extension&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P id=jd_map_mixed_content>The normalization rule</P>
<DIV align=center>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>MixedAttribute</EM> <EM>ComplexTypeContent</EM><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A></TD></TR></TBODY></TABLE></DIV></DIV>
<P>maps a pair of mixed attribute and complex type content to a type 
derivation.</P>
<P><B>Schema mapping</B></P>
<P>A complex types with simple content must not have a <CODE>mixed</CODE> 
attribute set to "true".</P>
<P>If the simple content is derived by restriction, it is mapped into a simple 
type restriction in the [XPath/XQuery] type system. Only the name of the base 
atomic type and attributes are mapped, while the actual simple type restriction 
is ignored. (Remember that facets are not captured in the [XPath/XQuery] type 
system.)</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>mixed = "false"</TD>
          <TD>
            <TABLE summary="">
              <TBODY>
              <TR>
                <TD>&nbsp;&nbsp;&lt;simpleContent&gt;</TD></TR>
              <TR>
                <TD>
                  <TABLE summary="">
                    <TBODY>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = 
                        <EM>QName</EM> &gt;</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                        <EM>simpleContentRestriction</EM> 
                        <EM>AttributeContent</EM></TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;&lt;/simpleContent&gt;</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>restricts <EM>QName</EM> { 
      <FONT size=6>[</FONT><EM>AttributeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> <EM>QName</EM> 
  }</TD></TR></TBODY></TABLE></DIV>
<P>If the simple type is derived by extension, it is mapped into an extended 
type specifier into the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>mixed = "false"</TD>
          <TD>
            <TABLE summary="">
              <TBODY>
              <TR>
                <TD>&nbsp;&nbsp;&lt;simpleContent&gt;</TD></TR>
              <TR>
                <TD>
                  <TABLE summary="">
                    <TBODY>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;extension</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = 
                        <EM>QName</EM> &gt;</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                        <EM>AttributeContent</EM></TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;/extension&gt;</TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;&lt;/simpleContent&gt;</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>extends <EM>QName</EM> { <FONT 
      size=6>[</FONT><EM>AttributeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> 
}</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_ct_complex name=sec_import_ct_complex></A>D.5.4 Complex 
type with complex content</H4>
<P><B>Schema component</B></P>
<P>A complex type can be of complex content. A complex content is represented in 
XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;complexContent</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mixed = boolean : 
  false</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (restriction | extension))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/complexContent&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by restriction inside a complex content is represented in XML by 
the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (group | all | choice | sequence)?, ((attribute | attributeGroup)*, 
      anyAttribute?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by extension inside a complex content is represented in XML by the 
following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;extension</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>base</B> = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      ((group | all | choice | sequence)?, ((attribute | attributeGroup)*, 
      anyAttribute?)))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/extension&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>If the complex content is derived by restriction, it is mapped into a type 
restriction in the [XPath/XQuery] type system, and the</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><EM>MixedAttribute</EM></TD>
          <TD>
            <TABLE summary="">
              <TBODY>
              <TR>
                <TD>&nbsp;&nbsp;&lt;complexContent&gt;</TD></TR>
              <TR>
                <TD>
                  <TABLE summary="">
                    <TBODY>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = 
                        <EM>QName</EM> &gt;</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                        <EM>annotation</EM>? <EM>ChildrenContent</EM> 
                        <EM>AttributeContent</EM></TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;&lt;/complexContent&gt;</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>restricts <EM>QName</EM> <FONT 
      size=6>[</FONT><EM>MixedAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed"><SUB><FONT 
      size=2>mixed</FONT></SUB></A> { <FONT 
      size=6>[</FONT><EM>AttributeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> <FONT 
      size=6>[</FONT><EM>ChildrenContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> }</TD></TR></TBODY></TABLE></DIV>
<P>If the complex content is derived by extension, it is mapped into an extended 
type specifier into the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD><EM>MixedAttribute</EM></TD>
          <TD>
            <TABLE summary="">
              <TBODY>
              <TR>
                <TD>&nbsp;&nbsp;&lt;complexContent&gt;</TD></TR>
              <TR>
                <TD>
                  <TABLE summary="">
                    <TBODY>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;extension</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = 
                        <EM>QName</EM> &gt;</TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                        <EM>annotation</EM>? <EM>ChildrenContent</EM> 
                        <EM>AttributeContent</EM></TD></TR>
                    <TR>
                      <TD>&nbsp;&nbsp;&lt;/extension&gt;</TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD>&nbsp;&nbsp;&lt;/complexContent&gt;</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed_content"><SUB><FONT 
      size=2>mixed_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>extends <EM>QName</EM> <FONT 
      size=6>[</FONT><EM>MixedAttribute</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_mixed"><SUB><FONT 
      size=2>mixed</FONT></SUB></A> { <FONT 
      size=6>[</FONT><EM>AttributeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> <FONT 
      size=6>[</FONT><EM>ChildrenContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> 
}</TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_attribute_use name=sec_attribute_use></A>D.6 Attribute Uses</H3>
<P>Mapping for attribute uses is given in <A 
href="REC-xquery-semantics-20070123.htm#sec_use"><B>[D.1.4 
Special attributes]</B></A>.</P></DIV>
<DIV class=div2>
<H3><A id=sec_attribute_group name=sec_attribute_group></A>D.7 Attribute Group 
Definitions</H3>
<DIV class=div3>
<H4><A id=sec_attribute_group_def name=sec_attribute_group_def></A>D.7.1 
Attribute group definitions</H4>
<P><B>Schema component</B></P>
<P>Model group definitions are represented in XML by the following 
structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;attributeGroup</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCame</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      ((attribute | attributeGroup)*, anyAttribute?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/attributeGroup&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>Attribute group definitions are not currently handled by the mapping. See 
Issue 501 (FS-Issue-0158).</P></DIV>
<DIV class=div3>
<H4><A id=sec_import_attribute_group_ref 
name=sec_import_attribute_group_ref></A>D.7.2 Attribute group reference</H4>
<P><B>Schema mapping</B></P>
<P>Attribute group references are not currently handled by the mapping. See 
Issue 501 (FS-Issue-0158).</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_model name=sec_import_model></A>D.8 Model Group 
Definitions</H3>
<P><B>Schema component</B></P>
<P>Model group definitions are represented in XML by the following 
structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;group</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>name</B> = NCame 
  &gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, (all 
      | choice | sequence))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/group&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>Model group definitions are not currently handled by the mapping. See Issue 
501 (FS-Issue-0158).</P></DIV>
<DIV class=div2>
<H3><A id=sec_import_model_groups name=sec_import_model_groups></A>D.9 Model 
Groups</H3>
<P>Model groups are either "all", "sequence" or "choice". One can also refer to 
a model group definition.</P>
<DIV class=div3>
<H4><A id=sec_import_all_groups name=sec_import_all_groups></A>D.9.1 All 
groups</H4>
<P><B>Schema component</B></P>
<P>All groups are represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;all</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 1 : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = (0 | 1) : 
  1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      element*)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/all&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>All groups are mapped into the "&amp;" operation in the [XPath/XQuery] type 
system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;all</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A> 
            &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>Element</EM><SUB><FONT size=2>1</FONT></SUB> ... 
            <EM>Element</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/all&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(<FONT 
      size=6>[</FONT><EM>Element</EM><SUB><FONT size=2>1</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> &amp; ... &amp; <FONT 
      size=6>[</FONT><EM>Element</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A>) <FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_choice_groups name=sec_import_choice_groups></A>D.9.2 
Choice groups</H4>
<P><B>Schema component</B></P>
<P>Choice groups are represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;choice</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (element | group | choice | sequence | any)*)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/choice&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Notation</B></P>
<P>The following auxiliary grammar productions are used to describe group 
components.</P>
<H5><A id=N2A249 name=N2A249></A>Group Component</H5>
<TABLE class=scrap summary=Scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A id=doc-fs-GroupComponent 
      name=doc-fs-GroupComponent></A>[<SMALL>59&nbsp;(Formal)</SMALL>]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>GroupComponent</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>"element" | "group" | "choice" | "sequence" | 
  "any"</CODE></TD></TR></TBODY></TABLE>
<P><B>Schema mapping</B></P>
<P>Choice groups are mapped into the "|" operation in the [XPath/XQuery] type 
system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;choice</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A> 
            &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>GroupComponent</EM><SUB><FONT size=2>1</FONT></SUB> ... 
            <EM>GroupComponent</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/choice&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(<FONT 
      size=6>[</FONT><EM>GroupComponent</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> | ... | <FONT 
      size=6>[</FONT><EM>GroupComponent</EM><SUB><FONT 
      size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A>) <FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_sequence_groups name=sec_import_sequence_groups></A>D.9.3 
Sequence groups</H4>
<P><B>Schema component</B></P>
<P>Sequence groups are represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;sequence</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (element | group | choice | sequence | any)*)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/sequence&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>Sequence groups are mapped into the "," operation in the [XPath/XQuery] type 
system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;sequence</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A> 
            &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>GroupComponent</EM><SUB><FONT size=2>1</FONT></SUB> ... 
            <EM>GroupComponent</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/sequence&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(<FONT 
      size=6>[</FONT><EM>GroupComponent</EM><SUB><FONT 
      size=2>1</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> , ... , <FONT 
      size=6>[</FONT><EM>GroupComponent</EM><SUB><FONT 
      size=2>n</FONT></SUB><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A>) <FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_particles name=sec_import_particles></A>D.10 Particles</H3>
<P>Particles contribute to the definition of content models.</P>
<P>A particle can be either an element reference, a group reference or a 
wildcard.</P>
<DIV class=div3>
<H4><A id=sec_import_element_ref name=sec_import_element_ref></A>D.10.1 Element 
reference</H4>
<P><B>Schema component</B></P>
<P>Element reference particles are represented in XML by the following 
structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;element</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
  &gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>Element references are mapped into element references in the [XPath/XQuery] 
type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;element</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = 
          <EM>QName</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A> 
            &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>element <EM>QName</EM> <FONT 
      size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_group_ref name=sec_group_ref></A>D.10.2 Group reference</H4>
<P><B>Schema component</B></P>
<P>Group reference particles are represented in XML by the following 
structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;group</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
  &gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>Model group references are not currently handled by the 
mapping.</P></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_wildcards name=sec_import_wildcards></A>D.11 Wildcards</H3>
<DIV class=div3>
<H4><A id=sec_import_attribute_wildcards 
name=sec_import_attribute_wildcards></A>D.11.1 Attribute wildcards</H4>
<P><B>Schema component</B></P>
<P>Attribute wildcards are represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;anyAttribute</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> namespace = ((##any | ##other) | List of (anyURI | 
      (##targetNamespace | ##local)) ) : ##any</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = (lax | 
      skip | strict) : strict</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: 
(annotation?)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/anyAttribute&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>An attribute wildcard with a "skip" process content is mapped as an attribute 
wildcard in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;anyAttribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = 
            "skip" &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <EM>annotation</EM>?</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/anyAttribute&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>(attribute (*, <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>))*</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;anyAttribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = 
            "lax" &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <EM>annotation</EM>?</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/anyAttribute&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute 
*</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;anyAttribute</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = 
            "strict" &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <EM>annotation</EM>?</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/anyAttribute&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>attribute 
*</TD></TR></TBODY></TABLE></DIV>
<TABLE summary="Editorial note" border=1>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="50%"><B>Editorial note</B></TD>
    <TD vAlign=top align=right width="50%">&nbsp;</TD></TR>
  <TR>
    <TD vAlign=top align=left colSpan=2>Namespace wildcards are not handled by 
      the mapping.</TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_import_element_wildcards 
name=sec_import_element_wildcards></A>D.11.2 Element wildcards</H4>
<P><B>Schema component</B></P>
<P>Element wildcards are represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;any</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxOccurs = 
      (nonNegativeInteger | unbounded) : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minOccurs = 
      nonNegativeInteger : 1</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ not handled 
      ]&nbsp;&nbsp;</B> namespace = ((##any | ##other) | List of (anyURI | 
      (##targetNamespace | ##local)) ) : ##any</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = (lax | 
      skip | strict) : strict</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: 
(annotation?)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/any&gt;</TD></TR></TBODY></TABLE></DIV>
<P><B>Schema mapping</B></P>
<P>An element wildcard with a "skip" process content is mapped as an element 
wildcard in the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;any</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = 
            "skip" &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <EM>annotation</EM>?</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/any&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( element (*, <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A>) 
      )<FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;any</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A 
            href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processContents = 
            "lax" &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <EM>annotation</EM>?</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/any&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>( element (*, 
      <CODE>xs:anyType</CODE>) )<FONT size=6>[</FONT><A 
      href="REC-xquery-semantics-20070123.htm#prod-formal-OccursAttributes"><EM>OccursAttributes</EM></A><FONT 
      size=6> ]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<TABLE summary="Editorial note" border=1>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="50%"><B>Editorial note</B></TD>
    <TD vAlign=top align=right width="50%">&nbsp;</TD></TR>
  <TR>
    <TD vAlign=top align=left colSpan=2>Element wildcards with a "lax" or 
      "strict" process content are not handled by the 
mapping.</TD></TR></TBODY></TABLE>
<TABLE summary="Editorial note" border=1>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="50%"><B>Editorial note</B></TD>
    <TD vAlign=top align=right width="50%">&nbsp;</TD></TR>
  <TR>
    <TD vAlign=top align=left colSpan=2>Namespace wildcards are not handled by 
      the mapping.</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div2>
<H3><A id=sec_import_identity name=sec_import_identity></A>D.12 
Identity-constraint Definitions</H3>
<P>All identity-constraints definitions are ignored when mapping into the 
[XPath/XQuery] type system.</P></DIV>
<DIV class=div2>
<H3><A id=sec_import_notation name=sec_import_notation></A>D.13 Notation 
Declarations</H3>
<P>All notation declarations are ignored when mapping into the [XPath/XQuery] 
type system.</P></DIV>
<DIV class=div2>
<H3><A id=sec_import_annotation name=sec_import_annotation></A>D.14 
Annotation</H3>
<P>All annotation are ignored when mapping into the [XPath/XQuery] type 
system.</P></DIV>
<DIV class=div2>
<H3><A id=sec_import_simple_type name=sec_import_simple_type></A>D.15 Simple 
Type Definitions</H3>
<P><B>Schema component</B></P>
<P>A simple type is represented in XML by the following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;simpleType</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> final = (#all | (list | union | restriction))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = NCName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/simpleType&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by restriction inside a simple type is represented in XML by the 
following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleType?, (minExclusive | minInclusive | maxExclusive | maxInclusive | 
      totalDigits | fractionDigits | length | minLength | maxLength | 
      enumeration | whiteSpace | pattern)*)?)</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by list inside a simple type is represented in XML by the 
following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;list</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; itemType = QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleType?))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/list&gt;</TD></TR></TBODY></TABLE></DIV>
<P>Derivation by union inside a simple type is represented in XML by the 
following structure.</P>
<DIV class=exampleInner>
<TABLE summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;&nbsp;&lt;union</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> id = ID</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memberTypes = List of 
    QName</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>[ ignored 
      ]&nbsp;&nbsp;</B> {any attributes with non-schema namespace ...} 
&gt;</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: (annotation?, 
      (simpleType*))</TD></TR>
  <TR>
    <TD>&nbsp;&nbsp;&lt;/union&gt;</TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A id=sec_import_global_simple_type 
name=sec_import_global_simple_type></A>D.15.1 Global simple type definition</H4>
<P>Schema import distinguishes between global simple types (which are mapped to 
sort declarations) and local simple types (which are mapped to type 
definitions).</P>
<P><B>Schema mapping</B></P>
<P>In the case of global simple types, the mapping rule which applies is denoted 
by <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
size=2>definition(targetNCName)</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;simpleType</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = 
            <EM>NCName</EM> &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>SimpleTypeContent</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/simpleType&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_definition"><SUB><FONT 
      size=2>definition(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>define type 
      <EM>target</EM><EM>NCName</EM>:<EM>NCName</EM> <FONT 
      size=6>[</FONT><EM>SimpleTypeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_local_simple_type 
name=sec_import_local_simple_type></A>D.15.2 Local simple type definition</H4>
<P><B>Schema mapping</B></P>
<P>In the case of global simple types, the mapping rule which applies is denoted 
by <FONT size=6>[</FONT><FONT size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
size=2>content(targetNCName)</FONT></SUB></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;simpleType&gt;</TD></TR>
        <TR>
          <TD><EM>SimpleTypeContent</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/simpleType&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT 
      size=6>[</FONT><EM>SimpleTypeContent</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_import_simple_type_content 
name=sec_import_simple_type_content></A>D.15.3 Simple type content</H4>
<P><B>Notation</B></P>
<P id=jd_map_simple_content>The normalization rule <FONT size=6>[</FONT><FONT 
size=6>]</FONT><A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
size=2>simple_content(targetNCName)</FONT></SUB></A> maps a simple type content 
to a type specifier and an optional occurrence indicator.</P>
<P><B>Schema mapping</B></P>
<P>If the simple type is derived by restriction, it is mapped into a simple type 
restriction in the [XPath/XQuery] type system. The name of the base atomic type 
and attributes are mapped. Only the minLength, maxLength, and length facets in 
the simple type restriction are handled. All other properties of the simple-type 
restriction are ignored.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;restriction</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base = <EM>QName</EM> 
            &gt;</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            <EM>simpleContentRestriction</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/restriction&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>restricts <EM>QName</EM> { 
      <EM>QName</EM> } <FONT 
      size=6>[</FONT><EM>simpleContentRestriction</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_occurs"><SUB><FONT 
      size=2>occurs</FONT></SUB></A></TD></TR></TBODY></TABLE></DIV>
<P>If the simple type is derived by list, and its content type does not 
constrain the length of the list, it is mapped into a zero-or-more repetition 
type into the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;list&gt;</TD></TR>
        <TR>
          <TD><EM>SimpleType</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/list&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      = <FONT size=6>[</FONT><EM>SimpleType</EM><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>{ <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      * }</TD></TR></TBODY></TABLE></DIV>
<P>If the simple type is derived by list, and its content type does constrain 
the length of the list, then it is mapped into a zero-or-more repetition type 
into the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;list&gt;</TD></TR>
        <TR>
          <TD><EM>SimpleType</EM></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/list&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <EM>OccurrenceIndicator</EM> = <FONT 
      size=6>[</FONT><EM>SimpleType</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>{ <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_quantifier">·</A> 
      <EM>OccurrenceIndicator</EM> }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;list</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; itemType = 
            <EM>QName</EM> &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>{ <EM>QName</EM>* 
  }</TD></TR></TBODY></TABLE></DIV>
<P>If the simple type is derived by union, it is mapped into a union type into 
the [XPath/XQuery] type system.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;union&gt;</TD></TR>
        <TR>
          <TD><EM>SimpleType</EM><SUB><FONT size=2>1</FONT></SUB> ... 
            <EM>SimpleType</EM><SUB><FONT size=2>n</FONT></SUB></TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&lt;/union&gt;</TD></TR></TBODY></TABLE><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>{ (<FONT 
      size=6>[</FONT><EM>SimpleType</EM><FONT size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A> | ... | <FONT 
      size=6>[</FONT><EM>SimpleType</EM><SUB><FONT size=2>n</FONT></SUB><FONT 
      size=6>]</FONT><A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_content"><SUB><FONT 
      size=2>content(targetNCName)</FONT></SUB></A>) }</TD></TR></TBODY></TABLE></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle><FONT size=6>[</FONT> 
      <TABLE summary="">
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;&lt;union</TD></TR>
        <TR>
          <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memberTypes = 
            <EM>QName</EM><SUB><FONT size=2>1</FONT></SUB> ... 
            <EM>QName</EM><SUB><FONT size=2>n</FONT></SUB> 
        &nbsp;/&gt;</TD></TR></TBODY></TABLE><FONT size=6>]</FONT><A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_map_simple_content"><SUB><FONT 
      size=2>simple_content(targetNCName)</FONT></SUB></A></TD></TR>
  <TR>
    <TD align=middle><B>==</B></TD></TR>
  <TR>
    <TD style="MARGIN-RIGHT: 1cm" align=middle>{ <EM>QName</EM><SUB><FONT 
      size=2>1</FONT></SUB> | ... | <EM>QName</EM><SUB><FONT 
      size=2>n</FONT></SUB> }</TD></TR></TBODY></TABLE></DIV></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=appendix_references name=appendix_references></A>E References</H2>
<DIV class=div2>
<H3><A id=id-normative-references name=id-normative-references></A>E.1 Normative 
References</H3>
<DL>
  <DT class=label><SPAN><A id=REC-xml name=REC-xml></A>XML</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xml"><CITE>Extensible Markup Language (XML) 
  1.0 (Fourth Edition)</CITE></A>, Eve Maler, Jean Paoli, François Yergeau, 
  <EM>et. al.</EM>, Editors. World Wide Web Consortium, 16&nbsp;Aug&nbsp;2006. 
  This version is http://www.w3.org/TR/2006/REC-xml-20060816. The <A 
  href="http://www.w3.org/TR/xml">latest version</A> is available at 
  http://www.w3.org/TR/xml.</DIV>
  <DT class=label><SPAN><A id=XMLNAMES11 name=XMLNAMES11></A>XML Names 
  1.1</SPAN> 
  <DD>
  <DIV>World Wide Web Consortium. <EM>Namespaces in XML 1.1.</EM> W3C 
  Recommendation. See <A 
  href="http://www.w3.org/TR/xml-names11/">http://www.w3.org/TR/xml-names11/</A></DIV>
  <DT class=label><SPAN><A id=xmlschema-1 name=xmlschema-1></A>Schema Part 
  1</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xmlschema-1/"><CITE>XML Schema Part 1: 
  Structures Second Edition</CITE></A>, Henry S. Thompson, David Beech, Noah 
  Mendelsohn, and Murray Maloney, Editors. World Wide Web Consortium, 
  28&nbsp;Oct&nbsp;2004. This version is 
  http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/. The <A 
  href="http://www.w3.org/TR/xmlschema-1/">latest version</A> is available at 
  http://www.w3.org/TR/xmlschema-1/.</DIV>
  <DT class=label><SPAN><A id=xmlschema-2 name=xmlschema-2></A>Schema Part 
  2</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xmlschema-2/"><CITE>XML Schema Part 2: 
  Datatypes Second Edition</CITE></A>, Paul V. Biron and Ashok Malhotra, 
  Editors. World Wide Web Consortium, 28&nbsp;Oct&nbsp;2004. This version is 
  http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/. The <A 
  href="http://www.w3.org/TR/xmlschema-2/">latest version</A> is available at 
  http://www.w3.org/TR/xmlschema-2/.</DIV>
  <DT class=label><SPAN><A id=xpath-datamodel name=xpath-datamodel></A>Data 
  Model</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xpath-datamodel/"><CITE>XQuery 1.0 and 
  XPath 2.0 Data Model (XDM)</CITE></A>, Norman Walsh, Mary Fernández, Ashok 
  Malhotra, <EM>et. al.</EM>, Editors. World Wide Web Consortium, 23 Jan 2007. 
  This version is REC-xpath-datamodel-20070123.htm. The 
  <A href="http://www.w3.org/TR/xpath-datamodel/">latest version</A> is 
  available at http://www.w3.org/TR/xpath-datamodel/.</DIV>
  <DT class=label><SPAN><A id=xslt-xquery-serialization 
  name=xslt-xquery-serialization></A>Data Model Serialization</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xslt-xquery-serialization/"><CITE>XSLT 2.0 
  and XQuery 1.0 Serialization</CITE></A>, Joanne Tong, Michael Kay, Norman 
  Walsh, <EM>et. al.</EM>, Editors. World Wide Web Consortium, 23 Jan 2007. This 
  version is REC-xslt-xquery-serialization-20070123.htm. 
  The <A href="http://www.w3.org/TR/xslt-xquery-serialization/">latest 
  version</A> is available at 
  http://www.w3.org/TR/xslt-xquery-serialization/.</DIV>
  <DT class=label><SPAN><A id=xquery name=xquery></A>XQuery 1.0: An XML Query 
  Language</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xquery/"><CITE>XQuery 1.0: An XML Query 
  Language</CITE></A>, Don Chamberlin , Anders Berglund, Scott Boag, <EM>et. 
  al.</EM>, Editors. World Wide Web Consortium, 23 Jan 2007. This version is 
  REC-xquery-20070123.htm. The <A 
  href="http://www.w3.org/TR/xquery/">latest version</A> is available at 
  http://www.w3.org/TR/xquery/.</DIV>
  <DT class=label><SPAN><A id=xpath20 name=xpath20></A>XML Path Language (XPath) 
  2.0</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xpath20/"><CITE>XML Path Language (XPath) 
  2.0</CITE></A>, Don Chamberlin , Anders Berglund, Scott Boag, <EM>et. 
  al.</EM>, Editors. World Wide Web Consortium, 23 Jan 2007. This version is 
  REC-xpath20-20070123.htm. The <A 
  href="http://www.w3.org/TR/xpath20/">latest version</A> is available at 
  http://www.w3.org/TR/xpath20/.</DIV>
  <DT class=label><SPAN><A id=xpath-functions name=xpath-functions></A>Functions 
  and Operators</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xpath-functions/"><CITE>XQuery 1.0 and 
  XPath 2.0 Functions and Operators</CITE></A>, Ashok Malhotra, Jim Melton, and 
  Norman Walsh, Editors. World Wide Web Consortium, 23 Jan 2007. This version is 
  REC-xpath-functions-20070123.htm. The <A 
  href="http://www.w3.org/TR/xpath-functions/">latest version</A> is available 
  at http://www.w3.org/TR/xpath-functions/.</DIV></DD></DL></DIV>
<DIV class=div2>
<H3><A id=id-non-normative-references name=id-non-normative-references></A>E.2 
Non-normative References</H3>
<DL>
  <DT class=label><SPAN><A id=xmlschema-0 name=xmlschema-0></A>XML Schema Part 
  0</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xmlschema-0/"><CITE>XML Schema Part 0: 
  Primer Second Edition</CITE></A>, David C. Fallside and Priscilla Walmsley, 
  Editors. World Wide Web Consortium, 28&nbsp;Oct&nbsp;2004. This version is 
  http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/. The <A 
  href="http://www.w3.org/TR/xmlschema-0/">latest version</A> is available at 
  http://www.w3.org/TR/xmlschema-0/.</DIV>
  <DT class=label><SPAN><A id=xquery-requirements 
  name=xquery-requirements></A>XML Query 1.0 Requirements</SPAN> 
  <DD>
  <DIV><A href="http://www.w3.org/TR/xquery-requirements/"><CITE>XML Query 
  (XQuery) Requirements</CITE></A>, Don Chamberlin, Peter Fankhauser, Massimo 
  Marchiori, and Jonathan Robie, Editors. World Wide Web Consortium, 
  3&nbsp;Jun&nbsp;2005. This version is 
  http://www.w3.org/TR/2005/WD-xquery-requirements-20050603/. The <A 
  href="http://www.w3.org/TR/xquery-requirements">latest version</A> is 
  available at http://www.w3.org/TR/xquery-requirements/.</DIV></DD></DL></DIV>
<DIV class=div2>
<H3><A id=id-background-references name=id-background-references></A>E.3 
Background References</H3>
<DL>
  <DT class=label><SPAN><A id=Languages name=Languages></A>Languages</SPAN> 
  <DD>
  <DIV>Handbook of Formal Languages. G. Rozenberg and A. Salomaa, editors. 
  <EM>Springer-Verlag</EM>. 1997.</DIV>
  <DT class=label><SPAN><A id=TATA name=TATA></A>TATA</SPAN> 
  <DD>
  <DIV>Tree Automata Techniques and Applications. H. Comon and M. Dauchet and R. 
  Gilleron and F. Jacquemard and D. Lugiez and S. Tison and M. Tommasi. See <A 
  href="http://www.grappa.univ-lille3.fr/tata/">http://www.grappa.univ-lille3.fr/tata/</A>. 
  1997.</DIV></DD></DL></DIV></DIV>
<DIV class=div1>
<H2><A id=sec_validation_judgments name=sec_validation_judgments></A>F Auxiliary 
Judgments for Validation (Non-Normative)</H2>
<DIV class=div2>
<H3><A id=sec_validate name=sec_validate></A>F.1 Judgments for the validate 
expression</H3>
<P>XQuery supports XML Schema validation using the validate expression. This 
section gives a non-normative formal semantics of XML Schema validation, solely 
for the purpose of specifying its usage in XQuery.</P>
<P>Specifying XML Schema validation requires a fairly large number of auxiliary 
judgments. There are two main judgments used to describe the semantics of 
validation.</P>
<UL>
  <LI>
  <P>The "erase" judgment takes a value and removes all type information from 
  it. This operation is necessary since, in XQuery, validation can occur both on 
  well-formed or already validated documents.</P>
  <LI>
  <P>The "annotate" operation takes an untyped value and a type and either fails 
  or succeeds by returning a new -validated- value.</P></LI></UL>
<P>Before defining these two judgments, we first introduce the auxiliary 
judgments used to describe specific parts of XML Schema's semantics.</P>
<DIV class=div3>
<H4><A id=sec_type_resolution name=sec_type_resolution></A>F.1.1 Type 
resolution</H4>
<P><B>Notation</B></P>
<P id=jd_resolves_to>The judgments</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
{ <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
}</DIV>
<P>and</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
{ <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
}</DIV>
<P>hold when a type reference (resp. a type derivation) resolves to the given 
type name and type content.</P>
<P><B>Semantics</B></P>
<P>Those judgments are specified by the following rules.</P>
<P>If the type is omitted, it is resolved as the empty sequence type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation"><EM>Derivation</EM></A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
      { empty } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation"><EM>Derivation</EM></A>? 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
      { } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>In case of a type reference, then the type name is the name of that type, and 
the type is taken by resolving the type declaration of the global type.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeDerivation"><EM>TypeDerivation</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>In the above inference rule, note that <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A> 
is the base type of the type referred to. So this is indeed the original type 
name, <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A>, 
which must be returned, and eventually used to annotated the corresponding 
element or attribute. However, the type needs to be obtained through a second 
application of the <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
to</B></A> judgment.</P>
<P>If the type derivation is a restriction, then the type name is the name of 
the base type, and the type is taken from the type derivation.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
      to</B></A> <EM>Adjusted</EM><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      restricts <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <EM>Adjusted</EM><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type derivation is an extension, then the type name is the name of the 
base type, and the type is the base type extended by the type in the type 
derivation.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_elem_qname_expands_to"><B>of 
                  elem/type expands to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A>.<A 
                  class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_type_defn">typeDefn</A>(<A 
                  href="REC-xquery-semantics-20070123.htm#id-expanded-qnames"><EM>expanded-QName</EM></A>) 
                  = define type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Derivation"><EM>Derivation</EM></A>? 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>BaseOptMixed</EM></A> 
                  { <EM>Base</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>? 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Base</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>? 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>extended 
                  by</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_extended_by"><B>is</B></A> 
                  <EM>Extended</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
                  <EM>Extended</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_adjusts_to"><B>adjusts 
                  to</B></A> <EM>Adjusted</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      extends <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-OptMixed"><EM>OptMixed</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <EM>Adjusted</EM><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_interleaving name=sec_interleaving></A>F.1.2 Interleaving</H4>
<P><B>Notation</B></P>
<P id=jd_interleave>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>3</FONT></SUB></DIV>
<P>holds if some interleaving of <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> yields <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>3</FONT></SUB>. Interleaving is non-deterministic; it is used for 
processing all groups.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>Interleaving two empty sequences yields the empty sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
      () <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P>Otherwise, pick an item from the head of one of the sequences, and 
recursively interleave the remainder.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Item"><EM>Item</EM></A>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>3</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_jd_filter name=sec_jd_filter></A>F.1.3 Attribute filtering</H4>
<P><B>Introduction</B></P>
<P>Finally, we introduce an auxiliary judgment which extracts the value of a 
given attribute if it exists. This judgment is not used in the semantics of step 
expressions, but in <A 
href="REC-xquery-semantics-20070123.htm#sec_type_matching"><B>[8.3 
Judgments for type matching]</B></A>, and is based on the other filter 
judgments.</P>
<P><B>Notation</B></P>
<P id=jd_filter>The judgment</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
@<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>absent</B></A></DIV>
<P>holds if there are no occurrences of the attribute <EM>QName</EM> in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>. 
The judgment</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
@<EM>QName</EM> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A></DIV>
<P>holds if there is one occurrence of the attribute <EM>QName</EM> in <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>, 
and the value of that attribute is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A>.</P>
<P><B>Semantics</B></P>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
judgments are defined as follows.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  attribute:: <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
                  attribute <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
                  ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
      @<EM>QName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_filter"><B>absent</B></A></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>axis</B></A> 
                  attribute:: <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_axis"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_dyn_env_def">dynEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>test</B></A> 
                  <EM>QName</EM> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>with</B></A> 
                  attribute <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>of</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_test"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>3</FONT></SUB> = attribute <EM>QName</EM> { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
                  }</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
      @<EM>QName</EM> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_erasure name=sec_erasure></A>F.1.4 Erasure</H4>
<DIV class=div4>
<H5><A id=sec_simply_erases name=sec_simply_erases></A>F.1.4.1 Simply 
erases</H5>
<P><B>Notation</B></P>
<P id=jd_simply_erases_to>To define erasure, an auxiliary judgment is needed. 
The judgment</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
erases to</B></A> <EM>String</EM></DIV>
<P>holds when <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
erases to the string <EM>String</EM>.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The empty sequence erases to the empty string.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
      erases to</B></A> ""</TD></TR></TBODY></TABLE><BR></DIV>
<P>The concatenation of two non-empty sequences of values erases to the 
concatenation of their erasures with a separating space.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
                  erases to</B></A> <EM>String</EM><SUB><FONT 
                  size=2>1</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> != ()</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
                  erases to</B></A> <EM>String</EM><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> != 
      ()</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
      erases to</B></A> <CODE>fn:concat</CODE>(<EM>String</EM><SUB><FONT 
      size=2>1</FONT></SUB>," ",<EM>String</EM><SUB><FONT 
    size=2>2</FONT></SUB>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>An atomic value erases to its string representation as an instance of <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent"><EM>AtomicValueContent</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicTypeName"><EM>AtomicTypeName</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
      erases to</B></A> <EM>dm:</EM><CODE>string-value</CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValueContent"><EM>AtomicValueContent</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_erases name=sec_erases></A>F.1.4.2 Erases</H5>
<P><B>Notation</B></P>
<P id=jd_erases_to>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
to</B></A> judgment is used in the definition of the dynamic semantics of 
validation. The normative dynamic semantics of validation is specified in <A 
href="http://www.w3.org/TR/xquery#id-validate">Section 3.13 Validate 
Expressions</A><SUP><SMALL>XQ</SMALL></SUP>. The effect of the validate 
expression is equivalent to:</P>
<UL>
  <LI>
  <P>serialization of the data model, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A>, followed by</P>
  <LI>
  <P>validation of the serialized value into a Post-Schema Validated Infoset, as 
  described in <A 
  href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
  Part 1]</A>, followed by</P>
  <LI>
  <P>construction of a new data model value, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>.</P></LI></UL>
<P>Erasure is the formal equivalent of serialization followed by construction of 
a new data model value in which all element nodes are labeled with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
and all attribute nodes with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<P>The judgment</P>
<DIV align=center><A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
to</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds when the erasure of <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>The empty sequence erases to itself.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>() <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> ()</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of the concatenation of two values is the concatenation of their 
erasure, so long as neither of the two original values is simple.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>' &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> not a simple value</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>' &nbsp;&nbsp;&nbsp;&nbsp; <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> not a simple 
        value</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of an element is an element that has the same name and the type 
<A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
and the erasure of the original content.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of an attribute is an attribute that has the same name and the 
type <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
and the simple erasure of the original content labeled with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
                  erases to</B></A> 
        <EM>String</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
      } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
      { <EM>String</EM> of type <A 
      href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of a document is a document with the erasure of the original 
content.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of a text or comment or processing-instruction node is 
itself.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>text { <EM>String</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> text { <EM>String</EM> }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>comment { <EM>String</EM> } <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> comment { <EM>String</EM> }</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD>processing-instruction <EM>NCName</EM> { <EM>String</EM> } <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> processing-instruction <EM>NCName</EM> { <EM>String</EM> 
  }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The erasure of a simple value is the corresponding text node.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_simply_erases_to"><B>simply 
                  erases to</B></A> 
        <EM>String</EM></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_erases_to"><B>erases 
      to</B></A> text { <EM>String</EM> 
}</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV>
<DIV class=div3>
<H4><A id=sec_jd_annotate name=sec_jd_annotate></A>F.1.5 Annotate</H4>
<P>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
as</B></A> judgment is used in the definition of the dynamic semantics of 
validation. The normative dynamic semantics of validation is specified in <A 
href="http://www.w3.org/TR/xquery#id-validate">Section 3.13 Validate 
Expressions</A><SUP><SMALL>XQ</SMALL></SUP>. The effect of the validate 
expression is equivalent to:</P>
<UL>
  <LI>
  <P>serialization of the data model, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A>, followed by</P>
  <LI>
  <P>parsing of the serialized value into the Infoset</P>
  <LI>
  <P>validation of the Infoset into a Post-Schema Validated Infoset, as 
  described in <A 
  href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
  Part 1]</A>, followed by</P>
  <LI>
  <P>construction of a new data model value, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>.</P></LI></UL>
<P>Annotation is the formal equivalent of schema validation of an Infoset value 
into the PSVI followed by construction of a new data model value. Because the 
Formal Semantics is defined on data model values, not the Infoset, annotation is 
applied to data model values in which all element nodes are labeled with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
and all attribute nodes with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A> 
-- that is, the result of erasure.</P>
<DIV class=div4>
<H5><A id=sec_simply_annotate name=sec_simply_annotate></A>F.1.5.1 Simply 
annotate</H5>
<P><B>Notation</B></P>
<P id=jd_cast_as>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
annotate as</B></A> <EM>SimpleType</EM> ( <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if the result of casting the <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
size=2>1</FONT></SUB> to <EM>SimpleType</EM> is <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>Simply annotating a simple value to a union type yields the result of simply 
annotating the simple value to either the first or second type in the union. 
Note that simply annotating to the second type is attempted only if simply 
annotating to the first type <EM>fails</EM>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM><SUB><FONT 
                  size=2>1</FONT></SUB> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM><SUB><FONT 
      size=2>1</FONT></SUB>|<EM>SimpleType</EM><SUB><FONT size=2>2</FONT></SUB> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_not"><B>not</B></A>(<A 
                  class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM><SUB><FONT 
                  size=2>1</FONT></SUB> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>)</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM><SUB><FONT 
                  size=2>2</FONT></SUB> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM><SUB><FONT 
      size=2>1</FONT></SUB>|<EM>SimpleType</EM><SUB><FONT size=2>2</FONT></SUB> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>The simple annotation rules for ?, +, * are similar.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM>? ( () ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM>? (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM>* ( () ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM>* (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM>* (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
                  annotate as</B></A> <EM>SimpleType</EM>* (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM>+ (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>Simply annotating an atomic value to <CODE>xs:string</CODE> yields its string 
representation.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <CODE>xs:string</CODE> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <EM>dm:</EM>string-value(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A>)</TD></TR></TBODY></TABLE><BR></DIV>
<P>Simply annotating an atomic value to <CODE>xs:decimal</CODE> yields the 
decimal that results from parsing its string representation.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <CODE>xs:decimal</CODE> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"><EM>AtomicValue</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <CODE>xs:decimal</CODE>(<EM>dm:</EM><CODE>string-value</CODE>(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AtomicValue"> 
      <EM>AtomicValue</EM></A>))</TD></TR></TBODY></TABLE><BR></DIV>
<P>Similar rules are assumed for the rest of the 19 XML Schema primitive 
types.</P></DIV>
<DIV class=div4>
<H5><A id=sec_nil_annotate name=sec_nil_annotate></A>F.1.5.2 Nil-annotate</H5>
<P><B>Notation</B></P>
<P id=jd_nil_annotate_as>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
as</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
( <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> ) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if it is possible to annotate value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> as if it had the nillable type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> is the corresponding annotated value.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>If the type is not nillable, then the xsi:nil attribute must not appear in 
the value, and it must be possible to annotate value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
as if it had the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:nil <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>absent</B></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type is nillable, and the xsi:nil attribute does not appear or is 
false, then it must be possible to annotate value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> as if it had the type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:nil <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_isin"><B>in</B></A> 
                  { (), false }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
      as</B></A> nillable <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>If the type is nillable, and the xsi:nil attribute is true, then it must be 
possible to annotate value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> as if it had a type where the attributes in the type are 
kept and the element content of the type is ignored.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:nil <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  true</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A> 
                  ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
      as</B></A> nillable (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeModel"><EM>AttributeModel</EM></A>, 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementModel"><EM>ElementModel</EM></A>) 
      ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV></DIV>
<DIV class=div4>
<H5><A id=sec_annotate name=sec_annotate></A>F.1.5.3 Annotate</H5>
<P id=jd_annotate_as>The <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
as</B></A> judgment is used in the definition of the dynamic semantics of 
validation. The normative dynamic semantics of validation is specified in <A 
href="http://www.w3.org/TR/xquery#id-validate">Section 3.13 Validate 
Expressions</A><SUP><SMALL>XQ</SMALL></SUP>. The effect of the validate 
expression is equivalent to:</P>
<UL>
  <LI>
  <P>serialization of the data model, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xslt-xquery-serialization">[Data 
  Model Serialization]</A>, followed by</P>
  <LI>
  <P>parsing of the serialized value into the Infoset</P>
  <LI>
  <P>validation of the Infoset into a Post-Schema Validated Infoset, as 
  described in <A 
  href="REC-xquery-semantics-20070123.htm#xmlschema-1">[Schema 
  Part 1]</A>, followed by</P>
  <LI>
  <P>construction of a new data model value, as described in <A 
  href="REC-xquery-semantics-20070123.htm#xpath-datamodel">[Data 
  Model]</A>.</P></LI></UL>
<P>Erasure is the formal equivalent of serialization followed by construction of 
a new data model value in which all element nodes are labeled with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untyped"><CODE>xs:untyped</CODE></A> 
and all attribute nodes with <A 
href="REC-xquery-semantics-20070123.htm#dt-xs_untypedAtomic"><CODE>xs:untypedAtomic</CODE></A>.</P>
<P><B>Notation</B></P>
<P>The judgment</P>
<DIV align=center><A class=env 
href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
<A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
as</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
( <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> ) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB></DIV>
<P>holds if it is possible to annotate value <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> as if it had type <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
and <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB> is the corresponding annotated value.</P>
<P><B>Note</B></P>
<P>Assume an XML Infoset instance X1 is validated against an XML Schema S, 
yielding PSVI instance X2. Then if X1 corresponds to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> and S corresponds to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
and X2 corresponds to <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>, the following should hold: <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
as</B></A> <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
( <A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>1</FONT></SUB> ) <A class=judgment 
href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
<A 
href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
size=2>2</FONT></SUB>.</P>
<P><B>Semantics</B></P>
<P>This judgment is specified by the following rules.</P>
<P>Annotating the empty sequence as the empty type yields the empty 
sequence.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> empty (()) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a concatenation of values as a concatenation of types yields the 
concatenation of the annotated values.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a value as a choice type yields the result of annotating the value 
as either the first or second type in the choice.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>|<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a value as an all group uses interleaving to decompose the 
original value and recompose the annotated value.</P>
<TABLE summary="Editorial note" border=1>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="50%"><B>Editorial note</B></TD>
    <TD vAlign=top align=right width="50%">&nbsp;</TD></TR>
  <TR>
    <TD vAlign=top align=left colSpan=2>Jerome and Phil: Note that this may 
      reorder the original sequence. Perhaps we should disallow such reordering. 
      Specifying that formally is not as easy as we would 
like.</TD></TR></TBODY></TABLE>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> ( <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> ) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>'</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB> <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>interleave</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB>' <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_interleave"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> &amp; <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>The annotation rules for ?, +, * are similar.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      | empty)(<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>? 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB></TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>' &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>* 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>+ 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>')</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>* 
      ( () ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      ()</TD></TR></TBODY></TABLE><BR></DIV>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>' &nbsp;&nbsp;&nbsp;&nbsp; <A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>* 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>'</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A>* 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>,<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>1</FONT></SUB>',<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A><SUB><FONT 
      size=2>2</FONT></SUB>')</TD></TR></TBODY></TABLE><BR></DIV>
<P>To annotate an element with no xsi:type attribute, first look up the element 
type, next resolve the resulting type reference, then annotate the value against 
the resolved type, and finally return a new element with the name of the 
original element, the resolved type name, and the annotated value.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:type <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  ()</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      ( element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <CODE>xs:anyType</CODE> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>' 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>To annotate an element with an xsi:type attribute, define a type reference 
corresponding to the xsi:type. Look up the element type, yielding a type 
reference, and check that the xsi:type reference derives from this type 
reference. Resolve the xsi:type reference, then annotate the value against the 
resolved type, and finally return a new element with the name of the original 
element, the resolved type name, and the annotated value.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>filter</B></A> 
                  @xsi:type <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_filter"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><EM>Xsi</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  = of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_lookup"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  of type <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_derives_from"><B>derives 
                  from</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>BaseTypeName</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <EM>Xsi</EM><A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>) 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementType"><EM>ElementType</EM></A> 
      ( element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <CODE>xs:anyType</CODE> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      element <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-ElementName"><EM>ElementName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>' 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>The rule for attributes is similar to the first rule for elements.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD>
      <TABLE cellSpacing=0 cellPadding=0 summary="">
        <TBODY>
        <TR vAlign=center align=middle>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 summary="">
              <TBODY>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>name 
                  lookup</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_attribute_lookup"><B>yields</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A></TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeReference"><EM>TypeReference</EM></A> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_resolves_to"><B>resolves 
                  to</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
                  { <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  }</TD></TR>
              <TR vAlign=center align=middle>
                <TD><A class=env 
                  href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
                  <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>nil-annotate 
                  as</B></A> <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-OptNillable"><EM>OptNillable</EM></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
                  (<A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>1</FONT></SUB>) <A class=judgment 
                  href="REC-xquery-semantics-20070123.htm#jd_nil_annotate_as"><B>=&gt;</B></A> 
                  <A 
                  href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
                  size=2>2</FONT></SUB></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeType"><EM>AttributeType</EM></A> 
      ( attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <CODE>xs:anySimpleType</CODE> { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>1</FONT></SUB> } ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      attribute <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-AttributeName"><EM>AttributeName</EM></A> 
      of type <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-TypeName"><EM>TypeName</EM></A> 
      { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A><SUB><FONT 
      size=2>2</FONT></SUB> }</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a document node yields a document with the annotation of its 
contents.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      (<A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>) 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>'</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Type"><EM>Type</EM></A> 
      } ( document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A> 
      } ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      document { <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-Value"><EM>Value</EM></A>' 
      }</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a text node as text yields itself.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD></TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> text (text { <EM>String</EM> }) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      text { <EM>String</EM> }</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a text nodes as a simple type is identical to casting.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM> ( <EM>String</EM> ) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A>'</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <EM>SimpleType</EM> ( text { <EM>String</EM> } ) <A 
      class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A>'</TD></TR></TBODY></TABLE><BR></DIV>
<P>Annotating a simple value as a simple type is identical to casting.</P>
<DIV align=center>
<TABLE cellSpacing=0 cellPadding=0 summary="">
  <TBODY>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>simply 
      annotate as</B></A> <EM>SimpleType</EM> ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
      ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_cast_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A>'</TD></TR>
  <TR>
    <TD>
      <HR style="COLOR: black" noShade SIZE=1>
    </TD></TR>
  <TR vAlign=center align=middle>
    <TD><A class=env 
      href="REC-xquery-semantics-20070123.htm#xq_stat_env_def">statEnv</A><B>&nbsp;|-&nbsp;</B> 
      <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>annotate 
      as</B></A> <EM>SimpleType</EM> ( <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A> 
      ) <A class=judgment 
      href="REC-xquery-semantics-20070123.htm#jd_annotate_as"><B>=&gt;</B></A> 
      <A 
      href="REC-xquery-semantics-20070123.htm#doc-fs-SimpleValue"><EM>SimpleValue</EM></A>'</TD></TR></TBODY></TABLE><BR></DIV></DIV></DIV></DIV></DIV>
<DIV class=div1>
<H2><A id=id-fs-revisions-log name=id-fs-revisions-log></A>G Revision Log 
(Non-Normative)</H2>
<P>This appendix lists the changes that have been made to this specification 
since the publication of the Proposed Recommendation Draft on 21 November 
2006.</P>
<OL class=enumar>
  <LI>
  <P>Fixed a number of typos and editorial issues throughout the 
  document.</P></LI></OL></DIV></DIV></BODY></HTML>
